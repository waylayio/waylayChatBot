!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).waylay=t()}(this,(function(){"use strict";function e(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(r){if("default"!==r&&!(r in e)){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}))})),Object.freeze(e)}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var o="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}var s=i,u=a;function c(e){if(s===setTimeout)return setTimeout(e,0);if((s===i||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}"function"==typeof o.setTimeout&&(s=setTimeout),"function"==typeof o.clearTimeout&&(u=clearTimeout);var l,p=[],f=!1,h=-1;function d(){f&&l&&(f=!1,l.length?p=l.concat(p):h=-1,p.length&&y())}function y(){if(!f){var e=c(d);f=!0;for(var t=p.length;t;){for(l=p,p=[];++h<t;)l&&l[h].run();h=-1,t=p.length}l=null,f=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===a||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}m.prototype.run=function(){this.fun.apply(null,this.array)};function g(){}var b=g,_=g,w=g,E=g,v=g,A=g,S=g;var O=o.performance||{},R=O.now||O.mozNow||O.msNow||O.oNow||O.webkitNow||function(){return(new Date).getTime()};var P=new Date;var T,C,x,U,j,q={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new m(e,t)),1!==p.length||f||c(y)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:b,addListener:_,once:w,off:E,removeListener:v,removeAllListeners:A,emit:S,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*R.call(O),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-P)/1e3}},k={exports:{}};function L(){if(C)return T;C=1;var e=1e3,t=60*e,r=60*t,n=24*r,o=7*n,i=365.25*n;function a(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}return T=function(s,u){u=u||{};var c=typeof s;if("string"===c&&s.length>0)return function(a){if((a=String(a)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(!s)return;var u=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*i;case"weeks":case"week":case"w":return u*o;case"days":case"day":case"d":return u*n;case"hours":case"hour":case"hrs":case"hr":case"h":return u*r;case"minutes":case"minute":case"mins":case"min":case"m":return u*t;case"seconds":case"second":case"secs":case"sec":case"s":return u*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(s);if("number"===c&&isFinite(s))return u.long?function(o){var i=Math.abs(o);if(i>=n)return a(o,i,n,"day");if(i>=r)return a(o,i,r,"hour");if(i>=t)return a(o,i,t,"minute");if(i>=e)return a(o,i,e,"second");return o+" ms"}(s):function(o){var i=Math.abs(o);if(i>=n)return Math.round(o/n)+"d";if(i>=r)return Math.round(o/r)+"h";if(i>=t)return Math.round(o/t)+"m";if(i>=e)return Math.round(o/e)+"s";return o+"ms"}(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))},T}var I,F,D=(j||(j=1,function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"env"in q&&(e=q.env.DEBUG),e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=(U||(U=1,x=function(e){function t(e){let n,o,i,a=null;function s(...e){if(!s.enabled)return;const r=s,o=Number(new Date),i=o-(n||o);r.diff=i,r.prev=n,r.curr=o,n=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,o)=>{if("%%"===n)return"%";a++;const i=t.formatters[o];if("function"==typeof i){const t=e[a];n=i.call(r,t),e.splice(a,1),a--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=r,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i),set:e=>{a=e}}),"function"==typeof t.init&&t.init(s),s}function r(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function n(e,t){let r=0,n=0,o=-1,i=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(o=n,i=r,n++):(r++,n++);else{if(-1===o)return!1;n=o+1,i++,r=i}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names,...t.skips.map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean);for(const e of r)"-"===e[0]?t.skips.push(e.slice(1)):t.names.push(e)},t.enabled=function(e){for(const r of t.skips)if(n(e,r))return!1;for(const r of t.names)if(n(e,r))return!0;return!1},t.humanize=L(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}),x)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(k,k.exports)),k.exports),N=r(D);var M=r(F?I:(F=1,I=(e,t)=>{if("string"!=typeof e)throw new TypeError(`Expected \`url\` to be of type \`string\`, got \`${typeof e}\``);return e=e.trim(),t={https:!0,...t},/^\.*\/|^(?!localhost)\w+:/.test(e)?e:e.replace(/^(?!(?:\w+:)?\/\/)/,t.https?"https://":"http://")}));function $(e,t){return function(){return e.apply(t,arguments)}}const{toString:B}=Object.prototype,{getPrototypeOf:W}=Object,z=(G=Object.create(null),e=>{const t=B.call(e);return G[t]||(G[t]=t.slice(8,-1).toLowerCase())});var G;const H=e=>(e=e.toLowerCase(),t=>z(t)===e),Y=e=>t=>typeof t===e,{isArray:K}=Array,V=Y("undefined");const J=H("ArrayBuffer");const Q=Y("string"),X=Y("function"),Z=Y("number"),ee=e=>null!==e&&"object"==typeof e,te=e=>{if("object"!==z(e))return!1;const t=W(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},re=H("Date"),ne=H("File"),oe=H("Blob"),ie=H("FileList"),ae=H("URLSearchParams"),[se,ue,ce,le]=["ReadableStream","Request","Response","Headers"].map(H);function pe(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,o;if("object"!=typeof e&&(e=[e]),K(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let a;for(n=0;n<i;n++)a=o[n],t.call(null,e[a],a,e)}}function fe(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,o=r.length;for(;o-- >0;)if(n=r[o],t===n.toLowerCase())return n;return null}const he="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:o,de=e=>!V(e)&&e!==he;const ye=(me="undefined"!=typeof Uint8Array&&W(Uint8Array),e=>me&&e instanceof me);var me;const ge=H("HTMLFormElement"),be=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),_e=H("RegExp"),we=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};pe(r,((r,o)=>{let i;!1!==(i=t(r,o,e))&&(n[o]=i||r)})),Object.defineProperties(e,n)};const Ee=H("AsyncFunction"),ve=(Ae="function"==typeof setImmediate,Se=X(he.postMessage),Ae?setImmediate:Se?(Oe=`axios@${Math.random()}`,Re=[],he.addEventListener("message",(({source:e,data:t})=>{e===he&&t===Oe&&Re.length&&Re.shift()()}),!1),e=>{Re.push(e),he.postMessage(Oe,"*")}):e=>setTimeout(e));var Ae,Se,Oe,Re;const Pe="undefined"!=typeof queueMicrotask?queueMicrotask.bind(he):q.nextTick||ve;var Te={isArray:K,isArrayBuffer:J,isBuffer:function(e){return null!==e&&!V(e)&&null!==e.constructor&&!V(e.constructor)&&X(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||X(e.append)&&("formdata"===(t=z(e))||"object"===t&&X(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&J(e.buffer),t},isString:Q,isNumber:Z,isBoolean:e=>!0===e||!1===e,isObject:ee,isPlainObject:te,isReadableStream:se,isRequest:ue,isResponse:ce,isHeaders:le,isUndefined:V,isDate:re,isFile:ne,isBlob:oe,isRegExp:_e,isFunction:X,isStream:e=>ee(e)&&X(e.pipe),isURLSearchParams:ae,isTypedArray:ye,isFileList:ie,forEach:pe,merge:function e(){const{caseless:t}=de(this)&&this||{},r={},n=(n,o)=>{const i=t&&fe(r,o)||o;te(r[i])&&te(n)?r[i]=e(r[i],n):te(n)?r[i]=e({},n):K(n)?r[i]=n.slice():r[i]=n};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&pe(arguments[e],n);return r},extend:(e,t,r,{allOwnKeys:n}={})=>(pe(t,((t,n)=>{r&&X(t)?e[n]=$(t,r):e[n]=t}),{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let o,i,a;const s={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)a=o[i],n&&!n(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==r&&W(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:z,kindOfTest:H,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(K(e))return e;let t=e.length;if(!Z(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:ge,hasOwnProperty:be,hasOwnProp:be,reduceDescriptors:we,freezeMethods:e=>{we(e,((t,r)=>{if(X(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];X(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach((e=>{r[e]=!0}))};return K(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:fe,global:he,isContextDefined:de,isSpecCompliantForm:function(e){return!!(e&&X(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(ee(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const o=K(e)?[]:{};return pe(e,((e,t)=>{const i=r(e,n+1);!V(i)&&(o[t]=i)})),t[n]=void 0,o}}return e};return r(e,0)},isAsyncFn:Ee,isThenable:e=>e&&(ee(e)||X(e))&&X(e.then)&&X(e.catch),setImmediate:ve,asap:Pe},Ce=[],xe=[],Ue="undefined"!=typeof Uint8Array?Uint8Array:Array,je=!1;function qe(){je=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)Ce[t]=e[t],xe[e.charCodeAt(t)]=t;xe["-".charCodeAt(0)]=62,xe["_".charCodeAt(0)]=63}function ke(e,t,r){for(var n,o,i=[],a=t;a<r;a+=3)n=(e[a]<<16)+(e[a+1]<<8)+e[a+2],i.push(Ce[(o=n)>>18&63]+Ce[o>>12&63]+Ce[o>>6&63]+Ce[63&o]);return i.join("")}function Le(e){var t;je||qe();for(var r=e.length,n=r%3,o="",i=[],a=16383,s=0,u=r-n;s<u;s+=a)i.push(ke(e,s,s+a>u?u:s+a));return 1===n?(t=e[r-1],o+=Ce[t>>2],o+=Ce[t<<4&63],o+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],o+=Ce[t>>10],o+=Ce[t>>4&63],o+=Ce[t<<2&63],o+="="),i.push(o),i.join("")}function Ie(e,t,r,n,o){var i,a,s=8*o-n-1,u=(1<<s)-1,c=u>>1,l=-7,p=r?o-1:0,f=r?-1:1,h=e[t+p];for(p+=f,i=h&(1<<-l)-1,h>>=-l,l+=s;l>0;i=256*i+e[t+p],p+=f,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=n;l>0;a=256*a+e[t+p],p+=f,l-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),i-=c}return(h?-1:1)*a*Math.pow(2,i-n)}function Fe(e,t,r,n,o,i){var a,s,u,c=8*i-o-1,l=(1<<c)-1,p=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+p>=1?f/u:f*Math.pow(2,1-p))*u>=2&&(a++,u/=2),a+p>=l?(s=0,a=l):a+p>=1?(s=(t*u-1)*Math.pow(2,o),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,o),a=0));o>=8;e[r+h]=255&s,h+=d,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;e[r+h]=255&a,h+=d,a/=256,c-=8);e[r+h-d]|=128*y}var De={}.toString,Ne=Array.isArray||function(e){return"[object Array]"==De.call(e)};function Me(){return Be.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function $e(e,t){if(Me()<t)throw new RangeError("Invalid typed array length");return Be.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Be.prototype:(null===e&&(e=new Be(t)),e.length=t),e}function Be(e,t,r){if(!(Be.TYPED_ARRAY_SUPPORT||this instanceof Be))return new Be(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Ge(this,e)}return We(this,e,t,r)}function We(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);Be.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Be.prototype:e=He(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!Be.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|Ve(t,r);e=$e(e,n);var o=e.write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(Ke(t)){var r=0|Ye(t.length);return 0===(e=$e(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?$e(e,0):He(e,t);if("Buffer"===t.type&&Ne(t.data))return He(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function ze(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Ge(e,t){if(ze(t),e=$e(e,t<0?0:0|Ye(t)),!Be.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function He(e,t){var r=t.length<0?0:0|Ye(t.length);e=$e(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function Ye(e){if(e>=Me())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Me().toString(16)+" bytes");return 0|e}function Ke(e){return!(null==e||!e._isBuffer)}function Ve(e,t){if(Ke(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return vt(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return At(e).length;default:if(n)return vt(e).length;t=(""+t).toLowerCase(),n=!0}}function Je(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return pt(this,t,r);case"utf8":case"utf-8":return st(this,t,r);case"ascii":return ct(this,t,r);case"latin1":case"binary":return lt(this,t,r);case"base64":return at(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ft(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function Qe(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function Xe(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=Be.from(t,n)),Ke(t))return 0===t.length?-1:Ze(e,t,r,n,o);if("number"==typeof t)return t&=255,Be.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):Ze(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function Ze(e,t,r,n,o){var i,a=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var l=-1;for(i=r;i<s;i++)if(c(e,i)===c(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(r+u>s&&(r=s-u),i=r;i>=0;i--){for(var p=!0,f=0;f<u;f++)if(c(e,i+f)!==c(t,f)){p=!1;break}if(p)return i}return-1}function et(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function tt(e,t,r,n){return St(vt(t,e.length-r),e,r,n)}function rt(e,t,r,n){return St(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function nt(e,t,r,n){return rt(e,t,r,n)}function ot(e,t,r,n){return St(At(t),e,r,n)}function it(e,t,r,n){return St(function(e,t){for(var r,n,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function at(e,t,r){return 0===t&&r===e.length?Le(e):Le(e.slice(t,r))}function st(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,a,s,u,c=e[o],l=null,p=c>239?4:c>223?3:c>191?2:1;if(o+p<=r)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(i=e[o+1]))&&(u=(31&c)<<6|63&i)>127&&(l=u);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(u=(15&c)<<12|(63&i)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,p=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=p}return function(e){var t=e.length;if(t<=ut)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=ut));return r}(n)}Be.TYPED_ARRAY_SUPPORT=void 0===o.TYPED_ARRAY_SUPPORT||o.TYPED_ARRAY_SUPPORT,Me(),Be.poolSize=8192,Be._augment=function(e){return e.__proto__=Be.prototype,e},Be.from=function(e,t,r){return We(null,e,t,r)},Be.TYPED_ARRAY_SUPPORT&&(Be.prototype.__proto__=Uint8Array.prototype,Be.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Be[Symbol.species]),Be.alloc=function(e,t,r){return function(e,t,r,n){return ze(t),t<=0?$e(e,t):void 0!==r?"string"==typeof n?$e(e,t).fill(r,n):$e(e,t).fill(r):$e(e,t)}(null,e,t,r)},Be.allocUnsafe=function(e){return Ge(null,e)},Be.allocUnsafeSlow=function(e){return Ge(null,e)},Be.isBuffer=function(e){return null!=e&&(!!e._isBuffer||Ot(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Ot(e.slice(0,0))}(e))},Be.compare=function(e,t){if(!Ke(e)||!Ke(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},Be.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Be.concat=function(e,t){if(!Ne(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Be.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=Be.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(!Ke(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},Be.byteLength=Ve,Be.prototype._isBuffer=!0,Be.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Qe(this,t,t+1);return this},Be.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Qe(this,t,t+3),Qe(this,t+1,t+2);return this},Be.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Qe(this,t,t+7),Qe(this,t+1,t+6),Qe(this,t+2,t+5),Qe(this,t+3,t+4);return this},Be.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?st(this,0,e):Je.apply(this,arguments)},Be.prototype.equals=function(e){if(!Ke(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Be.compare(this,e)},Be.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},Be.prototype.compare=function(e,t,r,n,o){if(!Ke(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(i,a),u=this.slice(n,o),c=e.slice(t,r),l=0;l<s;++l)if(u[l]!==c[l]){i=u[l],a=c[l];break}return i<a?-1:a<i?1:0},Be.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Be.prototype.indexOf=function(e,t,r){return Xe(this,e,t,r,!0)},Be.prototype.lastIndexOf=function(e,t,r){return Xe(this,e,t,r,!1)},Be.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return et(this,e,t,r);case"utf8":case"utf-8":return tt(this,e,t,r);case"ascii":return rt(this,e,t,r);case"latin1":case"binary":return nt(this,e,t,r);case"base64":return ot(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},Be.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ut=4096;function ct(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function lt(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function pt(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=Et(e[i]);return o}function ft(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function ht(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function dt(e,t,r,n,o,i){if(!Ke(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function yt(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function mt(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function gt(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function bt(e,t,r,n,o){return o||gt(e,0,r,4),Fe(e,t,r,n,23,4),r+4}function _t(e,t,r,n,o){return o||gt(e,0,r,8),Fe(e,t,r,n,52,8),r+8}Be.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),Be.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=Be.prototype;else{var o=t-e;r=new Be(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},Be.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||ht(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},Be.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||ht(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},Be.prototype.readUInt8=function(e,t){return t||ht(e,1,this.length),this[e]},Be.prototype.readUInt16LE=function(e,t){return t||ht(e,2,this.length),this[e]|this[e+1]<<8},Be.prototype.readUInt16BE=function(e,t){return t||ht(e,2,this.length),this[e]<<8|this[e+1]},Be.prototype.readUInt32LE=function(e,t){return t||ht(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Be.prototype.readUInt32BE=function(e,t){return t||ht(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Be.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||ht(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},Be.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||ht(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},Be.prototype.readInt8=function(e,t){return t||ht(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Be.prototype.readInt16LE=function(e,t){t||ht(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Be.prototype.readInt16BE=function(e,t){t||ht(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Be.prototype.readInt32LE=function(e,t){return t||ht(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Be.prototype.readInt32BE=function(e,t){return t||ht(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Be.prototype.readFloatLE=function(e,t){return t||ht(e,4,this.length),Ie(this,e,!0,23,4)},Be.prototype.readFloatBE=function(e,t){return t||ht(e,4,this.length),Ie(this,e,!1,23,4)},Be.prototype.readDoubleLE=function(e,t){return t||ht(e,8,this.length),Ie(this,e,!0,52,8)},Be.prototype.readDoubleBE=function(e,t){return t||ht(e,8,this.length),Ie(this,e,!1,52,8)},Be.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||dt(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},Be.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||dt(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},Be.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||dt(this,e,t,1,255,0),Be.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Be.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||dt(this,e,t,2,65535,0),Be.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):yt(this,e,t,!0),t+2},Be.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||dt(this,e,t,2,65535,0),Be.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):yt(this,e,t,!1),t+2},Be.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||dt(this,e,t,4,4294967295,0),Be.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):mt(this,e,t,!0),t+4},Be.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||dt(this,e,t,4,4294967295,0),Be.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):mt(this,e,t,!1),t+4},Be.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);dt(this,e,t,r,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a|0)-s&255;return t+r},Be.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);dt(this,e,t,r,o-1,-o)}var i=r-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a|0)-s&255;return t+r},Be.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||dt(this,e,t,1,127,-128),Be.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Be.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||dt(this,e,t,2,32767,-32768),Be.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):yt(this,e,t,!0),t+2},Be.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||dt(this,e,t,2,32767,-32768),Be.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):yt(this,e,t,!1),t+2},Be.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||dt(this,e,t,4,2147483647,-2147483648),Be.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):mt(this,e,t,!0),t+4},Be.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||dt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Be.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):mt(this,e,t,!1),t+4},Be.prototype.writeFloatLE=function(e,t,r){return bt(this,e,t,!0,r)},Be.prototype.writeFloatBE=function(e,t,r){return bt(this,e,t,!1,r)},Be.prototype.writeDoubleLE=function(e,t,r){return _t(this,e,t,!0,r)},Be.prototype.writeDoubleBE=function(e,t,r){return _t(this,e,t,!1,r)},Be.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,i=n-r;if(this===e&&r<t&&t<n)for(o=i-1;o>=0;--o)e[o+t]=this[o+r];else if(i<1e3||!Be.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},Be.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Be.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var a=Ke(e)?e:vt(new Be(e,n).toString()),s=a.length;for(i=0;i<r-t;++i)this[i+t]=a[i%s]}return this};var wt=/[^+\/0-9A-Za-z-_]/g;function Et(e){return e<16?"0"+e.toString(16):e.toString(16)}function vt(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function At(e){return function(e){var t,r,n,o,i,a;je||qe();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");i="="===e[s-2]?2:"="===e[s-1]?1:0,a=new Ue(3*s/4-i),n=i>0?s-4:s;var u=0;for(t=0,r=0;t<n;t+=4,r+=3)o=xe[e.charCodeAt(t)]<<18|xe[e.charCodeAt(t+1)]<<12|xe[e.charCodeAt(t+2)]<<6|xe[e.charCodeAt(t+3)],a[u++]=o>>16&255,a[u++]=o>>8&255,a[u++]=255&o;return 2===i?(o=xe[e.charCodeAt(t)]<<2|xe[e.charCodeAt(t+1)]>>4,a[u++]=255&o):1===i&&(o=xe[e.charCodeAt(t)]<<10|xe[e.charCodeAt(t+1)]<<4|xe[e.charCodeAt(t+2)]>>2,a[u++]=o>>8&255,a[u++]=255&o),a}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(wt,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function St(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function Ot(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function Rt(e,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}Te.inherits(Rt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Te.toJSONObject(this.config),code:this.code,status:this.status}}});const Pt=Rt.prototype,Tt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Tt[e]={value:e}})),Object.defineProperties(Rt,Tt),Object.defineProperty(Pt,"isAxiosError",{value:!0}),Rt.from=(e,t,r,n,o,i)=>{const a=Object.create(Pt);return Te.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Rt.call(a,e.message,t,r,n,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};function Ct(e){return Te.isPlainObject(e)||Te.isArray(e)}function xt(e){return Te.endsWith(e,"[]")?e.slice(0,-2):e}function Ut(e,t,r){return e?e.concat(t).map((function(e,t){return e=xt(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}const jt=Te.toFlatObject(Te,{},null,(function(e){return/^is[A-Z]/.test(e)}));function qt(e,t,r){if(!Te.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=Te.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Te.isUndefined(t[e])}))).metaTokens,o=r.visitor||c,i=r.dots,a=r.indexes,s=(r.Blob||"undefined"!=typeof Blob&&Blob)&&Te.isSpecCompliantForm(t);if(!Te.isFunction(o))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(Te.isDate(e))return e.toISOString();if(!s&&Te.isBlob(e))throw new Rt("Blob is not supported. Use a Buffer instead.");return Te.isArrayBuffer(e)||Te.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Be.from(e):e}function c(e,r,o){let s=e;if(e&&!o&&"object"==typeof e)if(Te.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(Te.isArray(e)&&function(e){return Te.isArray(e)&&!e.some(Ct)}(e)||(Te.isFileList(e)||Te.endsWith(r,"[]"))&&(s=Te.toArray(e)))return r=xt(r),s.forEach((function(e,n){!Te.isUndefined(e)&&null!==e&&t.append(!0===a?Ut([r],n,i):null===a?r:r+"[]",u(e))})),!1;return!!Ct(e)||(t.append(Ut(o,r,i),u(e)),!1)}const l=[],p=Object.assign(jt,{defaultVisitor:c,convertValue:u,isVisitable:Ct});if(!Te.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!Te.isUndefined(r)){if(-1!==l.indexOf(r))throw Error("Circular reference detected in "+n.join("."));l.push(r),Te.forEach(r,(function(r,i){!0===(!(Te.isUndefined(r)||null===r)&&o.call(t,r,Te.isString(i)?i.trim():i,n,p))&&e(r,n?n.concat(i):[i])})),l.pop()}}(e),t}function kt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Lt(e,t){this._pairs=[],e&&qt(e,this,t)}const It=Lt.prototype;function Ft(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Dt(e,t,r){if(!t)return e;const n=r&&r.encode||Ft;Te.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let i;if(i=o?o(t,r):Te.isURLSearchParams(t)?t.toString():new Lt(t,r).toString(n),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}It.append=function(e,t){this._pairs.push([e,t])},It.toString=function(e){const t=e?function(t){return e.call(this,t,kt)}:kt;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class Nt{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Te.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}var Mt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$t={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Lt,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const Bt="undefined"!=typeof window&&"undefined"!=typeof document,Wt="object"==typeof navigator&&navigator||void 0,zt=Bt&&(!Wt||["ReactNative","NativeScript","NS"].indexOf(Wt.product)<0),Gt="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Ht=Bt&&window.location.href||"http://localhost";var Yt={...Object.freeze({__proto__:null,hasBrowserEnv:Bt,hasStandardBrowserEnv:zt,hasStandardBrowserWebWorkerEnv:Gt,navigator:Wt,origin:Ht}),...$t};function Kt(e){function t(e,r,n,o){let i=e[o++];if("__proto__"===i)return!0;const a=Number.isFinite(+i),s=o>=e.length;if(i=!i&&Te.isArray(n)?n.length:i,s)return Te.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!a;n[i]&&Te.isObject(n[i])||(n[i]=[]);return t(e,r,n[i],o)&&Te.isArray(n[i])&&(n[i]=function(e){const t={},r=Object.keys(e);let n;const o=r.length;let i;for(n=0;n<o;n++)i=r[n],t[i]=e[i];return t}(n[i])),!a}if(Te.isFormData(e)&&Te.isFunction(e.entries)){const r={};return Te.forEachEntry(e,((e,n)=>{t(function(e){return Te.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,r,0)})),r}return null}const Vt={transitional:Mt,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,o=Te.isObject(e);o&&Te.isHTMLForm(e)&&(e=new FormData(e));if(Te.isFormData(e))return n?JSON.stringify(Kt(e)):e;if(Te.isArrayBuffer(e)||Te.isBuffer(e)||Te.isStream(e)||Te.isFile(e)||Te.isBlob(e)||Te.isReadableStream(e))return e;if(Te.isArrayBufferView(e))return e.buffer;if(Te.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return qt(e,new Yt.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return Yt.isNode&&Te.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=Te.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return qt(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||n?(t.setContentType("application/json",!1),function(e,t,r){if(Te.isString(e))try{return(t||JSON.parse)(e),Te.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Vt.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(Te.isResponse(e)||Te.isReadableStream(e))return e;if(e&&Te.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw Rt.from(e,Rt.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Yt.classes.FormData,Blob:Yt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Te.forEach(["delete","get","head","post","put","patch"],(e=>{Vt.headers[e]={}}));const Jt=Te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const Qt=Symbol("internals");function Xt(e){return e&&String(e).trim().toLowerCase()}function Zt(e){return!1===e||null==e?e:Te.isArray(e)?e.map(Zt):String(e)}function er(e,t,r,n,o){return Te.isFunction(n)?n.call(this,t,r):(o&&(t=r),Te.isString(t)?Te.isString(n)?-1!==t.indexOf(n):Te.isRegExp(n)?n.test(t):void 0:void 0)}let tr=class{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function o(e,t,r){const o=Xt(t);if(!o)throw new Error("header name must be a non-empty string");const i=Te.findKey(n,o);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||t]=Zt(e))}const i=(e,t)=>Te.forEach(e,((e,r)=>o(e,r,t)));if(Te.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(Te.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let r,n,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),r=e.substring(0,o).trim().toLowerCase(),n=e.substring(o+1).trim(),!r||t[r]&&Jt[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)})),t})(e),t);else if(Te.isHeaders(e))for(const[t,n]of e.entries())o(n,t,r);else null!=e&&o(t,e,r);return this}get(e,t){if(e=Xt(e)){const r=Te.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(Te.isFunction(t))return t.call(this,e,r);if(Te.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Xt(e)){const r=Te.findKey(this,e);return!(!r||void 0===this[r]||t&&!er(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function o(e){if(e=Xt(e)){const o=Te.findKey(r,e);!o||t&&!er(0,r[o],o,t)||(delete r[o],n=!0)}}return Te.isArray(e)?e.forEach(o):o(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const o=t[r];e&&!er(0,this[o],o,e,!0)||(delete this[o],n=!0)}return n}normalize(e){const t=this,r={};return Te.forEach(this,((n,o)=>{const i=Te.findKey(r,o);if(i)return t[i]=Zt(n),void delete t[o];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,r)=>t.toUpperCase()+r))}(o):String(o).trim();a!==o&&delete t[o],t[a]=Zt(n),r[a]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Te.forEach(this,((r,n)=>{null!=r&&!1!==r&&(t[n]=e&&Te.isArray(r)?r.join(", "):r)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach((e=>r.set(e))),r}static accessor(e){const t=(this[Qt]=this[Qt]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=Xt(e);t[n]||(!function(e,t){const r=Te.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+r,{value:function(e,r,o){return this[n].call(this,t,e,r,o)},configurable:!0})}))}(r,e),t[n]=!0)}return Te.isArray(e)?e.forEach(n):n(e),this}};function rr(e,t){const r=this||Vt,n=t||r,o=tr.from(n.headers);let i=n.data;return Te.forEach(e,(function(e){i=e.call(r,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function nr(e){return!(!e||!e.__CANCEL__)}function or(e,t,r){Rt.call(this,null==e?"canceled":e,Rt.ERR_CANCELED,t,r),this.name="CanceledError"}function ir(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new Rt("Request failed with status code "+r.status,[Rt.ERR_BAD_REQUEST,Rt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}tr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Te.reduceDescriptors(tr.prototype,(({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}})),Te.freezeMethods(tr),Te.inherits(or,Rt,{__CANCEL__:!0});const ar=(e,t,r=3)=>{let n=0;const o=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let o,i=0,a=0;return t=void 0!==t?t:1e3,function(s){const u=Date.now(),c=n[a];o||(o=u),r[i]=s,n[i]=u;let l=a,p=0;for(;l!==i;)p+=r[l++],l%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),u-o<t)return;const f=c&&u-c;return f?Math.round(1e3*p/f):void 0}}(50,250);return function(e,t){let r,n,o=0,i=1e3/t;const a=(t,i=Date.now())=>{o=i,r=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),s=t-o;s>=i?a(e,t):(r=e,n||(n=setTimeout((()=>{n=null,a(r)}),i-s)))},()=>r&&a(r)]}((r=>{const i=r.loaded,a=r.lengthComputable?r.total:void 0,s=i-n,u=o(s);n=i;e({loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&i<=a?(a-i)/u:void 0,event:r,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),r)},sr=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},ur=e=>(...t)=>Te.asap((()=>e(...t)));var cr=Yt.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Yt.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Yt.origin),Yt.navigator&&/(msie|trident)/i.test(Yt.navigator.userAgent)):()=>!0,lr=Yt.hasStandardBrowserEnv?{write(e,t,r,n,o,i){const a=[e+"="+encodeURIComponent(t)];Te.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),Te.isString(n)&&a.push("path="+n),Te.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function pr(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const fr=e=>e instanceof tr?{...e}:e;function hr(e,t){t=t||{};const r={};function n(e,t,r,n){return Te.isPlainObject(e)&&Te.isPlainObject(t)?Te.merge.call({caseless:n},e,t):Te.isPlainObject(t)?Te.merge({},t):Te.isArray(t)?t.slice():t}function o(e,t,r,o){return Te.isUndefined(t)?Te.isUndefined(e)?void 0:n(void 0,e,0,o):n(e,t,0,o)}function i(e,t){if(!Te.isUndefined(t))return n(void 0,t)}function a(e,t){return Te.isUndefined(t)?Te.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function s(r,o,i){return i in t?n(r,o):i in e?n(void 0,r):void 0}const u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t,r)=>o(fr(e),fr(t),0,!0)};return Te.forEach(Object.keys(Object.assign({},e,t)),(function(n){const i=u[n]||o,a=i(e[n],t[n],n);Te.isUndefined(a)&&i!==s||(r[n]=a)})),r}var dr=e=>{const t=hr({},e);let r,{data:n,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:u}=t;if(t.headers=s=tr.from(s),t.url=Dt(pr(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&s.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),Te.isFormData(n))if(Yt.hasStandardBrowserEnv||Yt.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(r=s.getContentType())){const[e,...t]=r?r.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(Yt.hasStandardBrowserEnv&&(o&&Te.isFunction(o)&&(o=o(t)),o||!1!==o&&cr(t.url))){const e=i&&a&&lr.read(a);e&&s.set(i,e)}return t};var yr="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,r){const n=dr(e);let o=n.data;const i=tr.from(n.headers).normalize();let a,s,u,c,l,{responseType:p,onUploadProgress:f,onDownloadProgress:h}=n;function d(){c&&c(),l&&l(),n.cancelToken&&n.cancelToken.unsubscribe(a),n.signal&&n.signal.removeEventListener("abort",a)}let y=new XMLHttpRequest;function m(){if(!y)return;const n=tr.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders());ir((function(e){t(e),d()}),(function(e){r(e),d()}),{data:p&&"text"!==p&&"json"!==p?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:n,config:e,request:y}),y=null}y.open(n.method.toUpperCase(),n.url,!0),y.timeout=n.timeout,"onloadend"in y?y.onloadend=m:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(m)},y.onabort=function(){y&&(r(new Rt("Request aborted",Rt.ECONNABORTED,e,y)),y=null)},y.onerror=function(){r(new Rt("Network Error",Rt.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const o=n.transitional||Mt;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new Rt(t,o.clarifyTimeoutError?Rt.ETIMEDOUT:Rt.ECONNABORTED,e,y)),y=null},void 0===o&&i.setContentType(null),"setRequestHeader"in y&&Te.forEach(i.toJSON(),(function(e,t){y.setRequestHeader(t,e)})),Te.isUndefined(n.withCredentials)||(y.withCredentials=!!n.withCredentials),p&&"json"!==p&&(y.responseType=n.responseType),h&&([u,l]=ar(h,!0),y.addEventListener("progress",u)),f&&y.upload&&([s,c]=ar(f),y.upload.addEventListener("progress",s),y.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(a=t=>{y&&(r(!t||t.type?new or(null,e,y):t),y.abort(),y=null)},n.cancelToken&&n.cancelToken.subscribe(a),n.signal&&(n.signal.aborted?a():n.signal.addEventListener("abort",a)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);g&&-1===Yt.protocols.indexOf(g)?r(new Rt("Unsupported protocol "+g+":",Rt.ERR_BAD_REQUEST,e)):y.send(o||null)}))};const mr=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const o=function(e){if(!r){r=!0,a();const t=e instanceof Error?e:this.reason;n.abort(t instanceof Rt?t:new or(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,o(new Rt(`timeout ${t} of ms exceeded`,Rt.ETIMEDOUT))}),t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:s}=n;return s.unsubscribe=()=>Te.asap(a),s}},gr=function*(e,t){let r=e.byteLength;if(r<t)return void(yield e);let n,o=0;for(;o<r;)n=o+t,yield e.slice(o,n),o=n},br=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},_r=(e,t,r,n)=>{const o=async function*(e,t){for await(const r of br(e))yield*gr(r,t)}(e,t);let i,a=0,s=e=>{i||(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await o.next();if(t)return s(),void e.close();let i=n.byteLength;if(r){let e=a+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw s(e),e}},cancel:e=>(s(e),o.return())},{highWaterMark:2})},wr="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Er=wr&&"function"==typeof ReadableStream,vr=wr&&("function"==typeof TextEncoder?(Ar=new TextEncoder,e=>Ar.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Ar;const Sr=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},Or=Er&&Sr((()=>{let e=!1;const t=new Request(Yt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Rr=Er&&Sr((()=>Te.isReadableStream(new Response("").body))),Pr={stream:Rr&&(e=>e.body)};var Tr;wr&&(Tr=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Pr[e]&&(Pr[e]=Te.isFunction(Tr[e])?t=>t[e]():(t,r)=>{throw new Rt(`Response type '${e}' is not supported`,Rt.ERR_NOT_SUPPORT,r)})})));const Cr=async(e,t)=>{const r=Te.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(Te.isBlob(e))return e.size;if(Te.isSpecCompliantForm(e)){const t=new Request(Yt.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Te.isArrayBufferView(e)||Te.isArrayBuffer(e)?e.byteLength:(Te.isURLSearchParams(e)&&(e+=""),Te.isString(e)?(await vr(e)).byteLength:void 0)})(t):r};var xr=wr&&(async e=>{let{url:t,method:r,data:n,signal:o,cancelToken:i,timeout:a,onDownloadProgress:s,onUploadProgress:u,responseType:c,headers:l,withCredentials:p="same-origin",fetchOptions:f}=dr(e);c=c?(c+"").toLowerCase():"text";let h,d=mr([o,i&&i.toAbortSignal()],a);const y=d&&d.unsubscribe&&(()=>{d.unsubscribe()});let m;try{if(u&&Or&&"get"!==r&&"head"!==r&&0!==(m=await Cr(l,n))){let e,r=new Request(t,{method:"POST",body:n,duplex:"half"});if(Te.isFormData(n)&&(e=r.headers.get("content-type"))&&l.setContentType(e),r.body){const[e,t]=sr(m,ar(ur(u)));n=_r(r.body,65536,e,t)}}Te.isString(p)||(p=p?"include":"omit");const o="credentials"in Request.prototype;h=new Request(t,{...f,signal:d,method:r.toUpperCase(),headers:l.normalize().toJSON(),body:n,duplex:"half",credentials:o?p:void 0});let i=await fetch(h);const a=Rr&&("stream"===c||"response"===c);if(Rr&&(s||a&&y)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=Te.toFiniteNumber(i.headers.get("content-length")),[r,n]=s&&sr(t,ar(ur(s),!0))||[];i=new Response(_r(i.body,65536,r,(()=>{n&&n(),y&&y()})),e)}c=c||"text";let g=await Pr[Te.findKey(Pr,c)||"text"](i,e);return!a&&y&&y(),await new Promise(((t,r)=>{ir(t,r,{data:g,headers:tr.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:h})}))}catch(t){if(y&&y(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new Rt("Network Error",Rt.ERR_NETWORK,e,h),{cause:t.cause||t});throw Rt.from(t,t&&t.code,e,h)}});const Ur={http:null,xhr:yr,fetch:xr};Te.forEach(Ur,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const jr=e=>`- ${e}`,qr=e=>Te.isFunction(e)||null===e||!1===e;var kr=e=>{e=Te.isArray(e)?e:[e];const{length:t}=e;let r,n;const o={};for(let i=0;i<t;i++){let t;if(r=e[i],n=r,!qr(r)&&(n=Ur[(t=String(r)).toLowerCase()],void 0===n))throw new Rt(`Unknown adapter '${t}'`);if(n)break;o[t||"#"+i]=n}if(!n){const e=Object.entries(o).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new Rt("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(jr).join("\n"):" "+jr(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function Lr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new or(null,e)}function Ir(e){Lr(e),e.headers=tr.from(e.headers),e.data=rr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return kr(e.adapter||Vt.adapter)(e).then((function(t){return Lr(e),t.data=rr.call(e,e.transformResponse,t),t.headers=tr.from(t.headers),t}),(function(t){return nr(t)||(Lr(e),t&&t.response&&(t.response.data=rr.call(e,e.transformResponse,t.response),t.response.headers=tr.from(t.response.headers))),Promise.reject(t)}))}const Fr="1.8.4",Dr={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Dr[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));const Nr={};Dr.transitional=function(e,t,r){function n(e,t){return"[Axios v1.8.4] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,o,i)=>{if(!1===e)throw new Rt(n(o," has been removed"+(t?" in "+t:"")),Rt.ERR_DEPRECATED);return t&&!Nr[o]&&(Nr[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,o,i)}},Dr.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};var Mr={assertOptions:function(e,t,r){if("object"!=typeof e)throw new Rt("options must be an object",Rt.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let o=n.length;for(;o-- >0;){const i=n[o],a=t[i];if(a){const t=e[i],r=void 0===t||a(t,i,e);if(!0!==r)throw new Rt("option "+i+" must be "+r,Rt.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new Rt("Unknown option "+i,Rt.ERR_BAD_OPTION)}},validators:Dr};const $r=Mr.validators;let Br=class{constructor(e){this.defaults=e,this.interceptors={request:new Nt,response:new Nt}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=hr(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:o}=t;void 0!==r&&Mr.assertOptions(r,{silentJSONParsing:$r.transitional($r.boolean),forcedJSONParsing:$r.transitional($r.boolean),clarifyTimeoutError:$r.transitional($r.boolean)},!1),null!=n&&(Te.isFunction(n)?t.paramsSerializer={serialize:n}:Mr.assertOptions(n,{encode:$r.function,serialize:$r.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Mr.assertOptions(t,{baseUrl:$r.spelling("baseURL"),withXsrfToken:$r.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&Te.merge(o.common,o[t.method]);o&&Te.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=tr.concat(i,o);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const u=[];let c;this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)}));let l,p=0;if(!s){const e=[Ir.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,u),l=e.length,c=Promise.resolve(t);p<l;)c=c.then(e[p++],e[p++]);return c}l=a.length;let f=t;for(p=0;p<l;){const e=a[p++],t=a[p++];try{f=e(f)}catch(e){t.call(this,e);break}}try{c=Ir.call(this,f)}catch(e){return Promise.reject(e)}for(p=0,l=u.length;p<l;)c=c.then(u[p++],u[p++]);return c}getUri(e){return Dt(pr((e=hr(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};Te.forEach(["delete","get","head","options"],(function(e){Br.prototype[e]=function(t,r){return this.request(hr(r||{},{method:e,url:t,data:(r||{}).data}))}})),Te.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,o){return this.request(hr(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}Br.prototype[e]=t(),Br.prototype[e+"Form"]=t(!0)}));const Wr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Wr).forEach((([e,t])=>{Wr[t]=e}));const zr=function e(t){const r=new Br(t),n=$(Br.prototype.request,r);return Te.extend(n,Br.prototype,r,{allOwnKeys:!0}),Te.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(hr(t,r))},n}(Vt);zr.Axios=Br,zr.CanceledError=or,zr.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const r=this;this.promise.then((e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e,n,o){r.reason||(r.reason=new or(e,n,o),t(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e((function(e){t=e})),cancel:t}}},zr.isCancel=nr,zr.VERSION=Fr,zr.toFormData=qt,zr.AxiosError=Rt,zr.Cancel=zr.CanceledError,zr.all=function(e){return Promise.all(e)},zr.spread=function(e){return function(t){return e.apply(null,t)}},zr.isAxiosError=function(e){return Te.isObject(e)&&!0===e.isAxiosError},zr.mergeConfig=hr,zr.AxiosHeaders=tr,zr.formToJSON=e=>Kt(Te.isHTMLForm(e)?new FormData(e):e),zr.getAdapter=kr,zr.HttpStatusCode=Wr,zr.default=zr;const{Axios:Gr,AxiosError:Hr,CanceledError:Yr,isCancel:Kr,CancelToken:Vr,VERSION:Jr,all:Qr,Cancel:Xr,isAxiosError:Zr,spread:en,toFormData:tn,AxiosHeaders:rn,HttpStatusCode:nn,formToJSON:on,getAdapter:an,mergeConfig:sn}=zr;var un,cn={exports:{}};var ln=(un||(un=1,function(e,r){var n="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",a="[object Function]",s="[object Object]",u=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l[i]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l[a]=l["[object Map]"]=l["[object Number]"]=l[s]=l["[object RegExp]"]=l["[object Set]"]=l["[object String]"]=l["[object WeakMap]"]=!1;var p="object"==typeof t&&t&&t.Object===Object&&t,f="object"==typeof self&&self&&self.Object===Object&&self,h=p||f||Function("return this")(),d=r&&!r.nodeType&&r,y=d&&e&&!e.nodeType&&e,m=y&&y.exports===d,g=m&&p.process,b=function(){try{var e=y&&y.require&&y.require("util").types;return e||g&&g.binding&&g.binding("util")}catch(e){}}(),_=b&&b.isTypedArray;function w(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var E,v=Array.prototype,A=Function.prototype,S=Object.prototype,O=h["__core-js_shared__"],R=A.toString,P=S.hasOwnProperty,T=(E=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"",C=S.toString,x=R.call(Object),U=RegExp("^"+R.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=m?h.Buffer:void 0,q=h.Symbol,k=h.Uint8Array;j&&j.allocUnsafe;var L,I,F=(L=Object.getPrototypeOf,I=Object,function(e){return L(I(e))}),D=Object.create,N=S.propertyIsEnumerable,M=v.splice,$=q?q.toStringTag:void 0,B=function(){try{var e=de(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),W=j?j.isBuffer:void 0,z=Math.max,G=Date.now,H=de(h,"Map"),Y=de(Object,"create"),K=function(){function e(){}return function(t){if(!Re(t))return{};if(D)return D(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function V(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function J(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Q(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function X(e){var t=this.__data__=new J(e);this.size=t.size}function Z(e,t){var r=Ee(e),n=!r&&we(e),o=!r&&!n&&Ae(e),i=!r&&!n&&!o&&Te(e),a=r||n||o||i,s=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],u=s.length;for(var c in e)a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ye(c,u))||s.push(c);return s}function ee(e,t,r){(void 0!==r&&!_e(e[t],r)||void 0===r&&!(t in e))&&ne(e,t,r)}function te(e,t,r){var n=e[t];P.call(e,t)&&_e(n,r)&&(void 0!==r||t in e)||ne(e,t,r)}function re(e,t){for(var r=e.length;r--;)if(_e(e[r][0],t))return r;return-1}function ne(e,t,r){"__proto__"==t&&B?B(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}V.prototype.clear=function(){this.__data__=Y?Y(null):{},this.size=0},V.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},V.prototype.get=function(e){var t=this.__data__;if(Y){var r=t[e];return r===n?void 0:r}return P.call(t,e)?t[e]:void 0},V.prototype.has=function(e){var t=this.__data__;return Y?void 0!==t[e]:P.call(t,e)},V.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Y&&void 0===t?n:t,this},J.prototype.clear=function(){this.__data__=[],this.size=0},J.prototype.delete=function(e){var t=this.__data__,r=re(t,e);return!(r<0||(r==t.length-1?t.pop():M.call(t,r,1),--this.size,0))},J.prototype.get=function(e){var t=this.__data__,r=re(t,e);return r<0?void 0:t[r][1]},J.prototype.has=function(e){return re(this.__data__,e)>-1},J.prototype.set=function(e,t){var r=this.__data__,n=re(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Q.prototype.clear=function(){this.size=0,this.__data__={hash:new V,map:new(H||J),string:new V}},Q.prototype.delete=function(e){var t=he(this,e).delete(e);return this.size-=t?1:0,t},Q.prototype.get=function(e){return he(this,e).get(e)},Q.prototype.has=function(e){return he(this,e).has(e)},Q.prototype.set=function(e,t){var r=he(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},X.prototype.clear=function(){this.__data__=new J,this.size=0},X.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},X.prototype.get=function(e){return this.__data__.get(e)},X.prototype.has=function(e){return this.__data__.has(e)},X.prototype.set=function(e,t){var r=this.__data__;if(r instanceof J){var n=r.__data__;if(!H||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Q(n)}return r.set(e,t),this.size=r.size,this};var oe=function(e,t,r){for(var n=-1,o=Object(e),i=r(e),a=i.length;a--;){var s=i[++n];if(!1===t(o[s],s,o))break}return e};function ie(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":$&&$ in Object(e)?function(e){var t=P.call(e,$),r=e[$];try{e[$]=void 0;var n=!0}catch(e){}var o=C.call(e);return n&&(t?e[$]=r:delete e[$]),o}(e):function(e){return C.call(e)}(e)}function ae(e){return Pe(e)&&ie(e)==i}function se(e){return!(!Re(e)||function(e){return!!T&&T in e}(e))&&(Se(e)?U:u).test(function(e){if(null!=e){try{return R.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function ue(e){if(!Re(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=me(e),r=[];for(var n in e)("constructor"!=n||!t&&P.call(e,n))&&r.push(n);return r}function ce(e,t,r,n,o){e!==t&&oe(t,(function(i,a){if(o||(o=new X),Re(i))!function(e,t,r,n,o,i,a){var u=ge(e,r),c=ge(t,r),l=a.get(c);if(l)ee(e,r,l);else{var p,f=i?i(u,c,r+"",e,t,a):void 0,h=void 0===f;if(h){var d=Ee(c),y=!d&&Ae(c),m=!d&&!y&&Te(c);f=c,d||y||m?Ee(u)?f=u:Pe(p=u)&&ve(p)?f=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(u):y?(h=!1,f=c.slice()):m?(h=!1,f=function(e){var t,r,n=(t=e.buffer,r=new t.constructor(t.byteLength),new k(r).set(new k(t)),r);return new e.constructor(n,e.byteOffset,e.length)}(c)):f=[]:function(e){if(!Pe(e)||ie(e)!=s)return!1;var t=F(e);if(null===t)return!0;var r=P.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&R.call(r)==x}(c)||we(c)?(f=u,we(u)?f=function(e){return function(e,t,r){var n=!r;r||(r={});for(var o=-1,i=t.length;++o<i;){var a=t[o],s=void 0;void 0===s&&(s=e[a]),n?ne(r,a,s):te(r,a,s)}return r}(e,xe(e))}(u):Re(u)&&!Se(u)||(f=function(e){return"function"!=typeof e.constructor||me(e)?{}:K(F(e))}(c))):h=!1}h&&(a.set(c,f),o(f,c,n,i,a),a.delete(c)),ee(e,r,f)}}(e,t,a,r,ce,n,o);else{var u=n?n(ge(e,a),i,a+"",e,t,o):void 0;void 0===u&&(u=i),ee(e,a,u)}}),xe)}function le(e,t){return be(function(e,t,r){return t=z(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=z(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(a),w(e,this,s)}}(e,t,qe),e+"")}var pe=B?function(e,t){return B(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:qe;function fe(e,t,r,n,o,i){return Re(e)&&Re(t)&&(i.set(t,e),ce(e,t,void 0,fe,i),i.delete(t)),e}function he(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function de(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return se(r)?r:void 0}function ye(e,t){var r=typeof e;return!!(t=null==t?o:t)&&("number"==r||"symbol"!=r&&c.test(e))&&e>-1&&e%1==0&&e<t}function me(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||S)}function ge(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var be=function(e){var t=0,r=0;return function(){var n=G(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(pe);function _e(e,t){return e===t||e!=e&&t!=t}var we=ae(function(){return arguments}())?ae:function(e){return Pe(e)&&P.call(e,"callee")&&!N.call(e,"callee")},Ee=Array.isArray;function ve(e){return null!=e&&Oe(e.length)&&!Se(e)}var Ae=W||function(){return!1};function Se(e){if(!Re(e))return!1;var t=ie(e);return t==a||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Oe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function Re(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Pe(e){return null!=e&&"object"==typeof e}var Te=_?function(e){return function(t){return e(t)}}(_):function(e){return Pe(e)&&Oe(e.length)&&!!l[ie(e)]},Ce=le((function(e){return e.push(void 0,fe),w(je,void 0,e)}));function xe(e){return ve(e)?Z(e):ue(e)}var Ue,je=(Ue=function(e,t,r,n){ce(e,t,r,n)},le((function(e,t){var r=-1,n=t.length,o=n>1?t[n-1]:void 0,i=n>2?t[2]:void 0;for(o=Ue.length>3&&"function"==typeof o?(n--,o):void 0,i&&function(e,t,r){if(!Re(r))return!1;var n=typeof t;return!!("number"==n?ve(r)&&ye(t,r.length):"string"==n&&t in r)&&_e(r[t],e)}(t[0],t[1],i)&&(o=n<3?void 0:o,n=1),e=Object(e);++r<n;){var a=t[r];a&&Ue(e,a,r,o)}return e})));function qe(e){return e}e.exports=Ce}(cn,cn.exports)),cn.exports),pn=r(ln);function fn(e){this.message=e}fn.prototype=new Error,fn.prototype.name="InvalidCharacterError";var hn,dn,yn="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new fn("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,o=0,i=0,a="";n=t.charAt(i++);~n&&(r=o%4?64*r+n:n,o++%4)?a+=String.fromCharCode(255&r>>(-2*o&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return a};function mn(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(yn(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return yn(t)}}function gn(e){this.message=e}function bn(e,t){if("string"!=typeof e)throw new gn("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(mn(e.split(".")[r]))}catch(e){throw new gn("Invalid token specified: "+e.message)}}function _n(){return dn?hn:(dn=1,hn=TypeError)}gn.prototype=new Error,gn.prototype.name="InvalidTokenError";var wn,En,vn,An,Sn,On,Rn,Pn,Tn,Cn,xn,Un,jn,qn,kn,Ln,In,Fn,Dn,Nn,Mn,$n,Bn,Wn,zn,Gn,Hn,Yn,Kn,Vn,Jn,Qn,Xn,Zn,eo,to,ro,no,oo,io,ao,so,uo,co,lo,po,fo,ho,yo,mo,go,bo,_o,wo,Eo,vo,Ao,So,Oo,Ro,Po,To,Co,xo,Uo,jo,qo,ko,Lo,Io,Fo,Do,No,Mo,$o,Bo,Wo,zo,Go,Ho,Yo,Ko,Vo,Jo,Qo,Xo,Zo,ei,ti,ri,ni,oi,ii,ai,si,ui,ci,li,pi,fi,hi,di,yi,mi,gi,bi,_i,wi,Ei,vi,Ai,Si,Oi,Ri,Pi,Ti,Ci=n(Object.freeze({__proto__:null,default:{}}));function xi(){if(En)return wn;En=1;var e="function"==typeof Map&&Map.prototype,r=Object.getOwnPropertyDescriptor&&e?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,n=e&&r&&"function"==typeof r.get?r.get:null,o=e&&Map.prototype.forEach,i="function"==typeof Set&&Set.prototype,a=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=i&&a&&"function"==typeof a.get?a.get:null,u=i&&Set.prototype.forEach,c="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,l="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,h=Object.prototype.toString,d=Function.prototype.toString,y=String.prototype.match,m=String.prototype.slice,g=String.prototype.replace,b=String.prototype.toUpperCase,_=String.prototype.toLowerCase,w=RegExp.prototype.test,E=Array.prototype.concat,v=Array.prototype.join,A=Array.prototype.slice,S=Math.floor,O="function"==typeof BigInt?BigInt.prototype.valueOf:null,R=Object.getOwnPropertySymbols,P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,T="function"==typeof Symbol&&"object"==typeof Symbol.iterator,C="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===T||"symbol")?Symbol.toStringTag:null,x=Object.prototype.propertyIsEnumerable,U=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function j(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||w.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-S(-e):S(e);if(n!==e){var o=String(n),i=m.call(t,o.length+1);return g.call(o,r,"$&_")+"."+g.call(g.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return g.call(t,r,"$&_")}var q=Ci,k=q.custom,L=B(k)?k:null,I={__proto__:null,double:'"',single:"'"},F={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function D(e,t,r){var n=r.quoteStyle||t,o=I[n];return o+e+o}function N(e){return g.call(String(e),/"/g,"&quot;")}function M(e){return!("[object Array]"!==G(e)||C&&"object"==typeof e&&C in e)}function $(e){return!("[object RegExp]"!==G(e)||C&&"object"==typeof e&&C in e)}function B(e){if(T)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!P)return!1;try{return P.call(e),!0}catch(e){}return!1}wn=function e(r,i,a,h){var b=i||{};if(z(b,"quoteStyle")&&!z(I,b.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(z(b,"maxStringLength")&&("number"==typeof b.maxStringLength?b.maxStringLength<0&&b.maxStringLength!==1/0:null!==b.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var w=!z(b,"customInspect")||b.customInspect;if("boolean"!=typeof w&&"symbol"!==w)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(z(b,"indent")&&null!==b.indent&&"\t"!==b.indent&&!(parseInt(b.indent,10)===b.indent&&b.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(z(b,"numericSeparator")&&"boolean"!=typeof b.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var S=b.numericSeparator;if(void 0===r)return"undefined";if(null===r)return"null";if("boolean"==typeof r)return r?"true":"false";if("string"==typeof r)return Y(r,b);if("number"==typeof r){if(0===r)return 1/0/r>0?"0":"-0";var R=String(r);return S?j(r,R):R}if("bigint"==typeof r){var k=String(r)+"n";return S?j(r,k):k}var F=void 0===b.depth?5:b.depth;if(void 0===a&&(a=0),a>=F&&F>0&&"object"==typeof r)return M(r)?"[Array]":"[Object]";var W=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=v.call(Array(e.indent+1)," ")}return{base:r,prev:v.call(Array(t+1),r)}}(b,a);if(void 0===h)h=[];else if(H(h,r)>=0)return"[Circular]";function K(t,r,n){if(r&&(h=A.call(h)).push(r),n){var o={depth:b.depth};return z(b,"quoteStyle")&&(o.quoteStyle=b.quoteStyle),e(t,o,a+1,h)}return e(t,b,a+1,h)}if("function"==typeof r&&!$(r)){var ee=function(e){if(e.name)return e.name;var t=y.call(d.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(r),te=Z(r,K);return"[Function"+(ee?": "+ee:" (anonymous)")+"]"+(te.length>0?" { "+v.call(te,", ")+" }":"")}if(B(r)){var re=T?g.call(String(r),/^(Symbol\(.*\))_[^)]*$/,"$1"):P.call(r);return"object"!=typeof r||T?re:V(re)}if(function(e){if(!e||"object"!=typeof e)return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute}(r)){for(var ne="<"+_.call(String(r.nodeName)),oe=r.attributes||[],ie=0;ie<oe.length;ie++)ne+=" "+oe[ie].name+"="+D(N(oe[ie].value),"double",b);return ne+=">",r.childNodes&&r.childNodes.length&&(ne+="..."),ne+="</"+_.call(String(r.nodeName))+">"}if(M(r)){if(0===r.length)return"[]";var ae=Z(r,K);return W&&!function(e){for(var t=0;t<e.length;t++)if(H(e[t],"\n")>=0)return!1;return!0}(ae)?"["+X(ae,W)+"]":"[ "+v.call(ae,", ")+" ]"}if(function(e){return!("[object Error]"!==G(e)||C&&"object"==typeof e&&C in e)}(r)){var se=Z(r,K);return"cause"in Error.prototype||!("cause"in r)||x.call(r,"cause")?0===se.length?"["+String(r)+"]":"{ ["+String(r)+"] "+v.call(se,", ")+" }":"{ ["+String(r)+"] "+v.call(E.call("[cause]: "+K(r.cause),se),", ")+" }"}if("object"==typeof r&&w){if(L&&"function"==typeof r[L]&&q)return q(r,{depth:F-a});if("symbol"!==w&&"function"==typeof r.inspect)return r.inspect()}if(function(e){if(!n||!e||"object"!=typeof e)return!1;try{n.call(e);try{s.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(r)){var ue=[];return o&&o.call(r,(function(e,t){ue.push(K(t,r,!0)+" => "+K(e,r))})),Q("Map",n.call(r),ue,W)}if(function(e){if(!s||!e||"object"!=typeof e)return!1;try{s.call(e);try{n.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(r)){var ce=[];return u&&u.call(r,(function(e){ce.push(K(e,r))})),Q("Set",s.call(r),ce,W)}if(function(e){if(!c||!e||"object"!=typeof e)return!1;try{c.call(e,c);try{l.call(e,l)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(r))return J("WeakMap");if(function(e){if(!l||!e||"object"!=typeof e)return!1;try{l.call(e,l);try{c.call(e,c)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(r))return J("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(r))return J("WeakRef");if(function(e){return!("[object Number]"!==G(e)||C&&"object"==typeof e&&C in e)}(r))return V(K(Number(r)));if(function(e){if(!e||"object"!=typeof e||!O)return!1;try{return O.call(e),!0}catch(e){}return!1}(r))return V(K(O.call(r)));if(function(e){return!("[object Boolean]"!==G(e)||C&&"object"==typeof e&&C in e)}(r))return V(f.call(r));if(function(e){return!("[object String]"!==G(e)||C&&"object"==typeof e&&C in e)}(r))return V(K(String(r)));if("undefined"!=typeof window&&r===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&r===globalThis||void 0!==t&&r===t)return"{ [object globalThis] }";if(!function(e){return!("[object Date]"!==G(e)||C&&"object"==typeof e&&C in e)}(r)&&!$(r)){var le=Z(r,K),pe=U?U(r)===Object.prototype:r instanceof Object||r.constructor===Object,fe=r instanceof Object?"":"null prototype",he=!pe&&C&&Object(r)===r&&C in r?m.call(G(r),8,-1):fe?"Object":"",de=(pe||"function"!=typeof r.constructor?"":r.constructor.name?r.constructor.name+" ":"")+(he||fe?"["+v.call(E.call([],he||[],fe||[]),": ")+"] ":"");return 0===le.length?de+"{}":W?de+"{"+X(le,W)+"}":de+"{ "+v.call(le,", ")+" }"}return String(r)};var W=Object.prototype.hasOwnProperty||function(e){return e in this};function z(e,t){return W.call(e,t)}function G(e){return h.call(e)}function H(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function Y(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Y(m.call(e,0,t.maxStringLength),t)+n}var o=F[t.quoteStyle||"single"];return o.lastIndex=0,D(g.call(g.call(e,o,"\\$1"),/[\x00-\x1f]/g,K),"single",t)}function K(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+b.call(t.toString(16))}function V(e){return"Object("+e+")"}function J(e){return e+" { ? }"}function Q(e,t,r,n){return e+" ("+t+") {"+(n?X(r,n):v.call(r,", "))+"}"}function X(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+v.call(e,","+r)+"\n"+t.prev}function Z(e,t){var r=M(e),n=[];if(r){n.length=e.length;for(var o=0;o<e.length;o++)n[o]=z(e,o)?t(e[o],e):""}var i,a="function"==typeof R?R(e):[];if(T){i={};for(var s=0;s<a.length;s++)i["$"+a[s]]=a[s]}for(var u in e)z(e,u)&&(r&&String(Number(u))===u&&u<e.length||T&&i["$"+u]instanceof Symbol||(w.call(/[^\w$]/,u)?n.push(t(u,e)+": "+t(e[u],e)):n.push(u+": "+t(e[u],e))));if("function"==typeof R)for(var c=0;c<a.length;c++)x.call(e,a[c])&&n.push("["+t(a[c])+"]: "+t(e[a[c]],e));return n}return wn}function Ui(){if(An)return vn;An=1;var e=xi(),t=_n(),r=function(e,t,r){for(var n,o=e;null!=(n=o.next);o=n)if(n.key===t)return o.next=n.next,r||(n.next=e.next,e.next=n),n};return vn=function(){var n,o={assert:function(r){if(!o.has(r))throw new t("Side channel does not contain "+e(r))},delete:function(e){var t=n&&n.next,o=function(e,t){if(e)return r(e,t,!0)}(n,e);return o&&t&&t===o&&(n=void 0),!!o},get:function(e){return function(e,t){if(e){var n=r(e,t);return n&&n.value}}(n,e)},has:function(e){return function(e,t){return!!e&&!!r(e,t)}(n,e)},set:function(e,t){n||(n={next:void 0}),function(e,t,n){var o=r(e,t);o?o.value=n:e.next={key:t,next:e.next,value:n}}(n,e,t)}};return o}}function ji(){return On?Sn:(On=1,Sn=Object)}function qi(){return Pn?Rn:(Pn=1,Rn=Error)}function ki(){return Cn?Tn:(Cn=1,Tn=EvalError)}function Li(){return Un?xn:(Un=1,xn=RangeError)}function Ii(){return qn?jn:(qn=1,jn=ReferenceError)}function Fi(){return Ln?kn:(Ln=1,kn=SyntaxError)}function Di(){return Fn?In:(Fn=1,In=URIError)}function Ni(){return Nn?Dn:(Nn=1,Dn=Math.abs)}function Mi(){return $n?Mn:($n=1,Mn=Math.floor)}function $i(){return Wn?Bn:(Wn=1,Bn=Math.max)}function Bi(){return Gn?zn:(Gn=1,zn=Math.min)}function Wi(){return Yn?Hn:(Yn=1,Hn=Math.pow)}function zi(){return Vn?Kn:(Vn=1,Kn=Math.round)}function Gi(){return Qn?Jn:(Qn=1,Jn=Number.isNaN||function(e){return e!=e})}function Hi(){if(Zn)return Xn;Zn=1;var e=Gi();return Xn=function(t){return e(t)||0===t?t:t<0?-1:1}}function Yi(){return to?eo:(to=1,eo=Object.getOwnPropertyDescriptor)}function Ki(){if(no)return ro;no=1;var e=Yi();if(e)try{e([],"length")}catch(t){e=null}return ro=e}function Vi(){if(io)return oo;io=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch(t){e=!1}return oo=e}function Ji(){if(co)return uo;co=1;var e="undefined"!=typeof Symbol&&Symbol,t=so?ao:(so=1,ao=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var o=Object.getOwnPropertySymbols(e);if(1!==o.length||o[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0});return uo=function(){return"function"==typeof e&&("function"==typeof Symbol&&("symbol"==typeof e("foo")&&("symbol"==typeof Symbol("bar")&&t())))}}function Qi(){return po?lo:(po=1,lo="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null)}function Xi(){return ho?fo:(ho=1,fo=ji().getPrototypeOf||null)}function Zi(){if(mo)return yo;mo=1;var e=Object.prototype.toString,t=Math.max,r=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r};return yo=function(n){var o=this;if("function"!=typeof o||"[object Function]"!==e.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var i,a=function(e,t){for(var r=[],n=t,o=0;n<e.length;n+=1,o+=1)r[o]=e[n];return r}(arguments,1),s=t(0,o.length-a.length),u=[],c=0;c<s;c++)u[c]="$"+c;if(i=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r}(u,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var e=o.apply(this,r(a,arguments));return Object(e)===e?e:this}return o.apply(n,r(a,arguments))})),o.prototype){var l=function(){};l.prototype=o.prototype,i.prototype=new l,l.prototype=null}return i},yo}function ea(){if(bo)return go;bo=1;var e=Zi();return go=Function.prototype.bind||e}function ta(){return wo?_o:(wo=1,_o=Function.prototype.call)}function ra(){return vo?Eo:(vo=1,Eo=Function.prototype.apply)}function na(){if(Ro)return Oo;Ro=1;var e=ea(),t=ra(),r=ta(),n=So?Ao:(So=1,Ao="undefined"!=typeof Reflect&&Reflect&&Reflect.apply);return Oo=n||e.call(r,t)}function oa(){if(To)return Po;To=1;var e=ea(),t=_n(),r=ta(),n=na();return Po=function(o){if(o.length<1||"function"!=typeof o[0])throw new t("a function is required");return n(e,r,o)}}function ia(){return xo?Co:(xo=1,Co=Object.getOwnPropertyDescriptor)}function aa(){if(jo)return Uo;jo=1;var e=ia();if(e)try{e([],"length")}catch(t){e=null}return Uo=e}function sa(){if(ko)return qo;ko=1;var e,t=oa(),r=aa();try{e=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var n=!!e&&r&&r(Object.prototype,"__proto__"),o=Object,i=o.getPrototypeOf;return qo=n&&"function"==typeof n.get?t([n.get]):"function"==typeof i&&function(e){return i(null==e?e:o(e))}}function ua(){if(Io)return Lo;Io=1;var e=Qi(),t=Xi(),r=sa();return Lo=e?function(t){return e(t)}:t?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("getProto: not an object");return t(e)}:r?function(e){return r(e)}:null}function ca(){if(Do)return Fo;Do=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=ea();return Fo=r.call(e,t)}function la(){if(Mo)return No;var e;Mo=1;var t=ji(),r=qi(),n=ki(),o=Li(),i=Ii(),a=Fi(),s=_n(),u=Di(),c=Ni(),l=Mi(),p=$i(),f=Bi(),h=Wi(),d=zi(),y=Hi(),m=Function,g=function(e){try{return m('"use strict"; return ('+e+").constructor;")()}catch(e){}},b=Ki(),_=Vi(),w=function(){throw new s},E=b?function(){try{return w}catch(e){try{return b(arguments,"callee").get}catch(e){return w}}}():w,v=Ji()(),A=ua(),S=Xi(),O=Qi(),R=ra(),P=ta(),T={},C="undefined"!=typeof Uint8Array&&A?A(Uint8Array):e,x={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?e:ArrayBuffer,"%ArrayIteratorPrototype%":v&&A?A([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":T,"%AsyncGenerator%":T,"%AsyncGeneratorFunction%":T,"%AsyncIteratorPrototype%":T,"%Atomics%":"undefined"==typeof Atomics?e:Atomics,"%BigInt%":"undefined"==typeof BigInt?e:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?e:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float32Array%":"undefined"==typeof Float32Array?e:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?e:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?e:FinalizationRegistry,"%Function%":m,"%GeneratorFunction%":T,"%Int8Array%":"undefined"==typeof Int8Array?e:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?e:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":v&&A?A(A([][Symbol.iterator]())):e,"%JSON%":"object"==typeof JSON?JSON:e,"%Map%":"undefined"==typeof Map?e:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&v&&A?A((new Map)[Symbol.iterator]()):e,"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":b,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?e:Promise,"%Proxy%":"undefined"==typeof Proxy?e:Proxy,"%RangeError%":o,"%ReferenceError%":i,"%Reflect%":"undefined"==typeof Reflect?e:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?e:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&v&&A?A((new Set)[Symbol.iterator]()):e,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":v&&A?A(""[Symbol.iterator]()):e,"%Symbol%":v?Symbol:e,"%SyntaxError%":a,"%ThrowTypeError%":E,"%TypedArray%":C,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?e:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?e:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?e:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?e:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"==typeof WeakMap?e:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?e:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?e:WeakSet,"%Function.prototype.call%":P,"%Function.prototype.apply%":R,"%Object.defineProperty%":_,"%Object.getPrototypeOf%":S,"%Math.abs%":c,"%Math.floor%":l,"%Math.max%":p,"%Math.min%":f,"%Math.pow%":h,"%Math.round%":d,"%Math.sign%":y,"%Reflect.getPrototypeOf%":O};if(A)try{null.error}catch(e){var U=A(A(e));x["%Error.prototype%"]=U}var j=function e(t){var r;if("%AsyncFunction%"===t)r=g("async function () {}");else if("%GeneratorFunction%"===t)r=g("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=g("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&A&&(r=A(o.prototype))}return x[t]=r,r},q={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},k=ea(),L=ca(),I=k.call(P,Array.prototype.concat),F=k.call(R,Array.prototype.splice),D=k.call(P,String.prototype.replace),N=k.call(P,String.prototype.slice),M=k.call(P,RegExp.prototype.exec),$=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,B=/\\(\\)?/g,W=function(e,t){var r,n=e;if(L(q,n)&&(n="%"+(r=q[n])[0]+"%"),L(x,n)){var o=x[n];if(o===T&&(o=j(n)),void 0===o&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new a("intrinsic "+e+" does not exist!")};return No=function(e,t){if("string"!=typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new s('"allowMissing" argument must be a boolean');if(null===M(/^%?[^%]*%?$/,e))throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=N(e,0,1),r=N(e,-1);if("%"===t&&"%"!==r)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new a("invalid intrinsic syntax, expected opening `%`");var n=[];return D(e,$,(function(e,t,r,o){n[n.length]=r?D(o,B,"$1"):t||e})),n}(e),n=r.length>0?r[0]:"",o=W("%"+n+"%",t),i=o.name,u=o.value,c=!1,l=o.alias;l&&(n=l[0],F(r,I([0,1],l)));for(var p=1,f=!0;p<r.length;p+=1){var h=r[p],d=N(h,0,1),y=N(h,-1);if(('"'===d||"'"===d||"`"===d||'"'===y||"'"===y||"`"===y)&&d!==y)throw new a("property names with quotes must have matching quotes");if("constructor"!==h&&f||(c=!0),L(x,i="%"+(n+="."+h)+"%"))u=x[i];else if(null!=u){if(!(h in u)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(b&&p+1>=r.length){var m=b(u,h);u=(f=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:u[h]}else f=L(u,h),u=u[h];f&&!c&&(x[i]=u)}}return u},No}function pa(){return Bo?$o:(Bo=1,$o=Object.getOwnPropertyDescriptor)}function fa(){if(zo)return Wo;zo=1;var e=pa();if(e)try{e([],"length")}catch(t){e=null}return Wo=e}function ha(){if(Ho)return Go;Ho=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch(t){e=!1}return Go=e}function da(){if(Jo)return Vo;Jo=1;var e="undefined"!=typeof Symbol&&Symbol,t=Ko?Yo:(Ko=1,Yo=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var o=Object.getOwnPropertySymbols(e);if(1!==o.length||o[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0});return Vo=function(){return"function"==typeof e&&("function"==typeof Symbol&&("symbol"==typeof e("foo")&&("symbol"==typeof Symbol("bar")&&t())))}}function ya(){if(Xo)return Qo;var e;Xo=1;var t=ji(),r=qi(),n=ki(),o=Li(),i=Ii(),a=Fi(),s=_n(),u=Di(),c=Ni(),l=Mi(),p=$i(),f=Bi(),h=Wi(),d=zi(),y=Hi(),m=Function,g=function(e){try{return m('"use strict"; return ('+e+").constructor;")()}catch(e){}},b=fa(),_=ha(),w=function(){throw new s},E=b?function(){try{return w}catch(e){try{return b(arguments,"callee").get}catch(e){return w}}}():w,v=da()(),A=ua(),S=Xi(),O=Qi(),R=ra(),P=ta(),T={},C="undefined"!=typeof Uint8Array&&A?A(Uint8Array):e,x={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?e:ArrayBuffer,"%ArrayIteratorPrototype%":v&&A?A([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":T,"%AsyncGenerator%":T,"%AsyncGeneratorFunction%":T,"%AsyncIteratorPrototype%":T,"%Atomics%":"undefined"==typeof Atomics?e:Atomics,"%BigInt%":"undefined"==typeof BigInt?e:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?e:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float32Array%":"undefined"==typeof Float32Array?e:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?e:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?e:FinalizationRegistry,"%Function%":m,"%GeneratorFunction%":T,"%Int8Array%":"undefined"==typeof Int8Array?e:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?e:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":v&&A?A(A([][Symbol.iterator]())):e,"%JSON%":"object"==typeof JSON?JSON:e,"%Map%":"undefined"==typeof Map?e:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&v&&A?A((new Map)[Symbol.iterator]()):e,"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":b,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?e:Promise,"%Proxy%":"undefined"==typeof Proxy?e:Proxy,"%RangeError%":o,"%ReferenceError%":i,"%Reflect%":"undefined"==typeof Reflect?e:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?e:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&v&&A?A((new Set)[Symbol.iterator]()):e,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":v&&A?A(""[Symbol.iterator]()):e,"%Symbol%":v?Symbol:e,"%SyntaxError%":a,"%ThrowTypeError%":E,"%TypedArray%":C,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?e:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?e:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?e:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?e:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"==typeof WeakMap?e:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?e:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?e:WeakSet,"%Function.prototype.call%":P,"%Function.prototype.apply%":R,"%Object.defineProperty%":_,"%Object.getPrototypeOf%":S,"%Math.abs%":c,"%Math.floor%":l,"%Math.max%":p,"%Math.min%":f,"%Math.pow%":h,"%Math.round%":d,"%Math.sign%":y,"%Reflect.getPrototypeOf%":O};if(A)try{null.error}catch(e){var U=A(A(e));x["%Error.prototype%"]=U}var j=function e(t){var r;if("%AsyncFunction%"===t)r=g("async function () {}");else if("%GeneratorFunction%"===t)r=g("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=g("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&A&&(r=A(o.prototype))}return x[t]=r,r},q={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},k=ea(),L=ca(),I=k.call(P,Array.prototype.concat),F=k.call(R,Array.prototype.splice),D=k.call(P,String.prototype.replace),N=k.call(P,String.prototype.slice),M=k.call(P,RegExp.prototype.exec),$=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,B=/\\(\\)?/g,W=function(e,t){var r,n=e;if(L(q,n)&&(n="%"+(r=q[n])[0]+"%"),L(x,n)){var o=x[n];if(o===T&&(o=j(n)),void 0===o&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new a("intrinsic "+e+" does not exist!")};return Qo=function(e,t){if("string"!=typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new s('"allowMissing" argument must be a boolean');if(null===M(/^%?[^%]*%?$/,e))throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=N(e,0,1),r=N(e,-1);if("%"===t&&"%"!==r)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new a("invalid intrinsic syntax, expected opening `%`");var n=[];return D(e,$,(function(e,t,r,o){n[n.length]=r?D(o,B,"$1"):t||e})),n}(e),n=r.length>0?r[0]:"",o=W("%"+n+"%",t),i=o.name,u=o.value,c=!1,l=o.alias;l&&(n=l[0],F(r,I([0,1],l)));for(var p=1,f=!0;p<r.length;p+=1){var h=r[p],d=N(h,0,1),y=N(h,-1);if(('"'===d||"'"===d||"`"===d||'"'===y||"'"===y||"`"===y)&&d!==y)throw new a("property names with quotes must have matching quotes");if("constructor"!==h&&f||(c=!0),L(x,i="%"+(n+="."+h)+"%"))u=x[i];else if(null!=u){if(!(h in u)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(b&&p+1>=r.length){var m=b(u,h);u=(f=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:u[h]}else f=L(u,h),u=u[h];f&&!c&&(x[i]=u)}}return u},Qo}function ma(){if(ei)return Zo;ei=1;var e=ya(),t=oa(),r=t([e("%String.prototype.indexOf%")]);return Zo=function(n,o){var i=e(n,!!o);return"function"==typeof i&&r(n,".prototype.")>-1?t([i]):i}}function ga(){if(ri)return ti;ri=1;var e=la(),t=ma(),r=xi(),n=_n(),o=e("%Map%",!0),i=t("Map.prototype.get",!0),a=t("Map.prototype.set",!0),s=t("Map.prototype.has",!0),u=t("Map.prototype.delete",!0),c=t("Map.prototype.size",!0);return ti=!!o&&function(){var e,t={assert:function(e){if(!t.has(e))throw new n("Side channel does not contain "+r(e))},delete:function(t){if(e){var r=u(e,t);return 0===c(e)&&(e=void 0),r}return!1},get:function(t){if(e)return i(e,t)},has:function(t){return!!e&&s(e,t)},set:function(t,r){e||(e=new o),a(e,t,r)}};return t}}function ba(){return oi?ni:(oi=1,ni=Object.getOwnPropertyDescriptor)}function _a(){if(ai)return ii;ai=1;var e=ba();if(e)try{e([],"length")}catch(t){e=null}return ii=e}function wa(){if(ui)return si;ui=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch(t){e=!1}return si=e}function Ea(){if(fi)return pi;fi=1;var e="undefined"!=typeof Symbol&&Symbol,t=li?ci:(li=1,ci=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var o=Object.getOwnPropertySymbols(e);if(1!==o.length||o[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0});return pi=function(){return"function"==typeof e&&("function"==typeof Symbol&&("symbol"==typeof e("foo")&&("symbol"==typeof Symbol("bar")&&t())))}}function va(){if(di)return hi;var e;di=1;var t=ji(),r=qi(),n=ki(),o=Li(),i=Ii(),a=Fi(),s=_n(),u=Di(),c=Ni(),l=Mi(),p=$i(),f=Bi(),h=Wi(),d=zi(),y=Hi(),m=Function,g=function(e){try{return m('"use strict"; return ('+e+").constructor;")()}catch(e){}},b=_a(),_=wa(),w=function(){throw new s},E=b?function(){try{return w}catch(e){try{return b(arguments,"callee").get}catch(e){return w}}}():w,v=Ea()(),A=ua(),S=Xi(),O=Qi(),R=ra(),P=ta(),T={},C="undefined"!=typeof Uint8Array&&A?A(Uint8Array):e,x={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?e:ArrayBuffer,"%ArrayIteratorPrototype%":v&&A?A([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":T,"%AsyncGenerator%":T,"%AsyncGeneratorFunction%":T,"%AsyncIteratorPrototype%":T,"%Atomics%":"undefined"==typeof Atomics?e:Atomics,"%BigInt%":"undefined"==typeof BigInt?e:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?e:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float32Array%":"undefined"==typeof Float32Array?e:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?e:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?e:FinalizationRegistry,"%Function%":m,"%GeneratorFunction%":T,"%Int8Array%":"undefined"==typeof Int8Array?e:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?e:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":v&&A?A(A([][Symbol.iterator]())):e,"%JSON%":"object"==typeof JSON?JSON:e,"%Map%":"undefined"==typeof Map?e:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&v&&A?A((new Map)[Symbol.iterator]()):e,"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":b,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?e:Promise,"%Proxy%":"undefined"==typeof Proxy?e:Proxy,"%RangeError%":o,"%ReferenceError%":i,"%Reflect%":"undefined"==typeof Reflect?e:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?e:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&v&&A?A((new Set)[Symbol.iterator]()):e,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":v&&A?A(""[Symbol.iterator]()):e,"%Symbol%":v?Symbol:e,"%SyntaxError%":a,"%ThrowTypeError%":E,"%TypedArray%":C,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?e:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?e:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?e:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?e:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"==typeof WeakMap?e:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?e:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?e:WeakSet,"%Function.prototype.call%":P,"%Function.prototype.apply%":R,"%Object.defineProperty%":_,"%Object.getPrototypeOf%":S,"%Math.abs%":c,"%Math.floor%":l,"%Math.max%":p,"%Math.min%":f,"%Math.pow%":h,"%Math.round%":d,"%Math.sign%":y,"%Reflect.getPrototypeOf%":O};if(A)try{null.error}catch(e){var U=A(A(e));x["%Error.prototype%"]=U}var j=function e(t){var r;if("%AsyncFunction%"===t)r=g("async function () {}");else if("%GeneratorFunction%"===t)r=g("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=g("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&A&&(r=A(o.prototype))}return x[t]=r,r},q={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},k=ea(),L=ca(),I=k.call(P,Array.prototype.concat),F=k.call(R,Array.prototype.splice),D=k.call(P,String.prototype.replace),N=k.call(P,String.prototype.slice),M=k.call(P,RegExp.prototype.exec),$=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,B=/\\(\\)?/g,W=function(e,t){var r,n=e;if(L(q,n)&&(n="%"+(r=q[n])[0]+"%"),L(x,n)){var o=x[n];if(o===T&&(o=j(n)),void 0===o&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new a("intrinsic "+e+" does not exist!")};return hi=function(e,t){if("string"!=typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new s('"allowMissing" argument must be a boolean');if(null===M(/^%?[^%]*%?$/,e))throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=N(e,0,1),r=N(e,-1);if("%"===t&&"%"!==r)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new a("invalid intrinsic syntax, expected opening `%`");var n=[];return D(e,$,(function(e,t,r,o){n[n.length]=r?D(o,B,"$1"):t||e})),n}(e),n=r.length>0?r[0]:"",o=W("%"+n+"%",t),i=o.name,u=o.value,c=!1,l=o.alias;l&&(n=l[0],F(r,I([0,1],l)));for(var p=1,f=!0;p<r.length;p+=1){var h=r[p],d=N(h,0,1),y=N(h,-1);if(('"'===d||"'"===d||"`"===d||'"'===y||"'"===y||"`"===y)&&d!==y)throw new a("property names with quotes must have matching quotes");if("constructor"!==h&&f||(c=!0),L(x,i="%"+(n+="."+h)+"%"))u=x[i];else if(null!=u){if(!(h in u)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(b&&p+1>=r.length){var m=b(u,h);u=(f=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:u[h]}else f=L(u,h),u=u[h];f&&!c&&(x[i]=u)}}return u},hi}function Aa(){if(bi)return gi;bi=1;var e=_n(),t=xi(),r=Ui(),n=ga(),o=function(){if(mi)return yi;mi=1;var e=va(),t=ma(),r=xi(),n=ga(),o=_n(),i=e("%WeakMap%",!0),a=t("WeakMap.prototype.get",!0),s=t("WeakMap.prototype.set",!0),u=t("WeakMap.prototype.has",!0),c=t("WeakMap.prototype.delete",!0);return yi=i?function(){var e,t,l={assert:function(e){if(!l.has(e))throw new o("Side channel does not contain "+r(e))},delete:function(r){if(i&&r&&("object"==typeof r||"function"==typeof r)){if(e)return c(e,r)}else if(n&&t)return t.delete(r);return!1},get:function(r){return i&&r&&("object"==typeof r||"function"==typeof r)&&e?a(e,r):t&&t.get(r)},has:function(r){return i&&r&&("object"==typeof r||"function"==typeof r)&&e?u(e,r):!!t&&t.has(r)},set:function(r,o){i&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new i),s(e,r,o)):n&&(t||(t=n()),t.set(r,o))}};return l}:n}(),i=o||n||r;return gi=function(){var r,n={assert:function(r){if(!n.has(r))throw new e("Side channel does not contain "+t(r))},delete:function(e){return!!r&&r.delete(e)},get:function(e){return r&&r.get(e)},has:function(e){return!!r&&r.has(e)},set:function(e,t){r||(r=i()),r.set(e,t)}};return n}}function Sa(){if(wi)return _i;wi=1;var e=String.prototype.replace,t=/%20/g,r="RFC3986";return _i={default:r,formatters:{RFC1738:function(r){return e.call(r,t,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:r}}function Oa(){if(vi)return Ei;vi=1;var e=Sa(),t=Object.prototype.hasOwnProperty,r=Array.isArray,n=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var r=t&&t.plainObjects?{__proto__:null}:{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},i=1024;return Ei={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],o=0;o<t.length;++o)for(var i=t[o],a=i.obj[i.prop],s=Object.keys(a),u=0;u<s.length;++u){var c=s[u],l=a[c];"object"==typeof l&&null!==l&&-1===n.indexOf(l)&&(t.push({obj:a,prop:c}),n.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(r(n)){for(var o=[],i=0;i<n.length;++i)void 0!==n[i]&&o.push(n[i]);t.obj[t.prop]=o}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(t,r,o,a,s){if(0===t.length)return t;var u=t;if("symbol"==typeof t?u=Symbol.prototype.toString.call(t):"string"!=typeof t&&(u=String(t)),"iso-8859-1"===o)return escape(u).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var c="",l=0;l<u.length;l+=i){for(var p=u.length>=i?u.slice(l,l+i):u,f=[],h=0;h<p.length;++h){var d=p.charCodeAt(h);45===d||46===d||95===d||126===d||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||s===e.RFC1738&&(40===d||41===d)?f[f.length]=p.charAt(h):d<128?f[f.length]=n[d]:d<2048?f[f.length]=n[192|d>>6]+n[128|63&d]:d<55296||d>=57344?f[f.length]=n[224|d>>12]+n[128|d>>6&63]+n[128|63&d]:(h+=1,d=65536+((1023&d)<<10|1023&p.charCodeAt(h)),f[f.length]=n[240|d>>18]+n[128|d>>12&63]+n[128|d>>6&63]+n[128|63&d])}c+=f.join("")}return c},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(r(e)){for(var n=[],o=0;o<e.length;o+=1)n.push(t(e[o]));return n}return t(e)},merge:function e(n,i,a){if(!i)return n;if("object"!=typeof i&&"function"!=typeof i){if(r(n))n.push(i);else{if(!n||"object"!=typeof n)return[n,i];(a&&(a.plainObjects||a.allowPrototypes)||!t.call(Object.prototype,i))&&(n[i]=!0)}return n}if(!n||"object"!=typeof n)return[n].concat(i);var s=n;return r(n)&&!r(i)&&(s=o(n,a)),r(n)&&r(i)?(i.forEach((function(r,o){if(t.call(n,o)){var i=n[o];i&&"object"==typeof i&&r&&"object"==typeof r?n[o]=e(i,r,a):n.push(r)}else n[o]=r})),n):Object.keys(i).reduce((function(r,n){var o=i[n];return t.call(r,n)?r[n]=e(r[n],o,a):r[n]=o,r}),s)}},Ei}function Ra(){if(Si)return Ai;Si=1;var e=Aa(),t=Oa(),r=Sa(),n=Object.prototype.hasOwnProperty,o={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},i=Array.isArray,a=Array.prototype.push,s=function(e,t){a.apply(e,i(t)?t:[t])},u=Date.prototype.toISOString,c=r.default,l={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:t.encode,encodeValuesOnly:!1,filter:void 0,format:c,formatter:r.formatters[c],indices:!1,serializeDate:function(e){return u.call(e)},skipNulls:!1,strictNullHandling:!1},p={},f=function r(n,o,a,u,c,f,h,d,y,m,g,b,_,w,E,v,A,S){for(var O,R=n,P=S,T=0,C=!1;void 0!==(P=P.get(p))&&!C;){var x=P.get(n);if(T+=1,void 0!==x){if(x===T)throw new RangeError("Cyclic object value");C=!0}void 0===P.get(p)&&(T=0)}if("function"==typeof m?R=m(o,R):R instanceof Date?R=_(R):"comma"===a&&i(R)&&(R=t.maybeMap(R,(function(e){return e instanceof Date?_(e):e}))),null===R){if(f)return y&&!v?y(o,l.encoder,A,"key",w):o;R=""}if("string"==typeof(O=R)||"number"==typeof O||"boolean"==typeof O||"symbol"==typeof O||"bigint"==typeof O||t.isBuffer(R))return y?[E(v?o:y(o,l.encoder,A,"key",w))+"="+E(y(R,l.encoder,A,"value",w))]:[E(o)+"="+E(String(R))];var U,j=[];if(void 0===R)return j;if("comma"===a&&i(R))v&&y&&(R=t.maybeMap(R,y)),U=[{value:R.length>0?R.join(",")||null:void 0}];else if(i(m))U=m;else{var q=Object.keys(R);U=g?q.sort(g):q}var k=d?String(o).replace(/\./g,"%2E"):String(o),L=u&&i(R)&&1===R.length?k+"[]":k;if(c&&i(R)&&0===R.length)return L+"[]";for(var I=0;I<U.length;++I){var F=U[I],D="object"==typeof F&&F&&void 0!==F.value?F.value:R[F];if(!h||null!==D){var N=b&&d?String(F).replace(/\./g,"%2E"):String(F),M=i(R)?"function"==typeof a?a(L,N):L:L+(b?"."+N:"["+N+"]");S.set(n,T);var $=e();$.set(p,S),s(j,r(D,M,a,u,c,f,h,d,"comma"===a&&v&&i(R)?null:y,m,g,b,_,w,E,v,A,$))}}return j};return Ai=function(t,a){var u,c=t,p=function(e){if(!e)return l;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||l.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var a=r.default;if(void 0!==e.format){if(!n.call(r.formatters,e.format))throw new TypeError("Unknown format option provided.");a=e.format}var s,u=r.formatters[a],c=l.filter;if(("function"==typeof e.filter||i(e.filter))&&(c=e.filter),s=e.arrayFormat in o?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":l.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var p=void 0===e.allowDots?!0===e.encodeDotInKeys||l.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:l.addQueryPrefix,allowDots:p,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:l.allowEmptyArrays,arrayFormat:s,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:l.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?l.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:l.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:l.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:l.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:l.encodeValuesOnly,filter:c,format:a,formatter:u,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:l.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:l.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:l.strictNullHandling}}(a);"function"==typeof p.filter?c=(0,p.filter)("",c):i(p.filter)&&(u=p.filter);var h=[];if("object"!=typeof c||null===c)return"";var d=o[p.arrayFormat],y="comma"===d&&p.commaRoundTrip;u||(u=Object.keys(c)),p.sort&&u.sort(p.sort);for(var m=e(),g=0;g<u.length;++g){var b=u[g],_=c[b];p.skipNulls&&null===_||s(h,f(_,b,d,y,p.allowEmptyArrays,p.strictNullHandling,p.skipNulls,p.encodeDotInKeys,p.encode?p.encoder:null,p.filter,p.sort,p.allowDots,p.serializeDate,p.format,p.formatter,p.encodeValuesOnly,p.charset,m))}var w=h.join(p.delimiter),E=!0===p.addQueryPrefix?"?":"";return p.charsetSentinel&&("iso-8859-1"===p.charset?E+="utf8=%26%2310003%3B&":E+="utf8=%E2%9C%93&"),w.length>0?E+w:""},Ai}function Pa(){if(Ri)return Oi;Ri=1;var e=Oa(),t=Object.prototype.hasOwnProperty,r=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:e.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},o=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},i=function(e,t,r){if(e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1)return e.split(",");if(t.throwOnLimitExceeded&&r>=t.arrayLimit)throw new RangeError("Array limit exceeded. Only "+t.arrayLimit+" element"+(1===t.arrayLimit?"":"s")+" allowed in an array.");return e},a=function(r,n,o,a){if(r){var s=o.allowDots?r.replace(/\.([^.[]+)/g,"[$1]"):r,u=/(\[[^[\]]*])/g,c=o.depth>0&&/(\[[^[\]]*])/.exec(s),l=c?s.slice(0,c.index):s,p=[];if(l){if(!o.plainObjects&&t.call(Object.prototype,l)&&!o.allowPrototypes)return;p.push(l)}for(var f=0;o.depth>0&&null!==(c=u.exec(s))&&f<o.depth;){if(f+=1,!o.plainObjects&&t.call(Object.prototype,c[1].slice(1,-1))&&!o.allowPrototypes)return;p.push(c[1])}if(c){if(!0===o.strictDepth)throw new RangeError("Input depth exceeded depth option of "+o.depth+" and strictDepth is true");p.push("["+s.slice(c.index)+"]")}return function(t,r,n,o){var a=0;if(t.length>0&&"[]"===t[t.length-1]){var s=t.slice(0,-1).join("");a=Array.isArray(r)&&r[s]?r[s].length:0}for(var u=o?r:i(r,n,a),c=t.length-1;c>=0;--c){var l,p=t[c];if("[]"===p&&n.parseArrays)l=n.allowEmptyArrays&&(""===u||n.strictNullHandling&&null===u)?[]:e.combine([],u);else{l=n.plainObjects?{__proto__:null}:{};var f="["===p.charAt(0)&&"]"===p.charAt(p.length-1)?p.slice(1,-1):p,h=n.decodeDotInKeys?f.replace(/%2E/g,"."):f,d=parseInt(h,10);n.parseArrays||""!==h?!isNaN(d)&&p!==h&&String(d)===h&&d>=0&&n.parseArrays&&d<=n.arrayLimit?(l=[])[d]=u:"__proto__"!==h&&(l[h]=u):l={0:u}}u=l}return u}(p,n,o,a)}};return Oi=function(s,u){var c=function(t){if(!t)return n;if(void 0!==t.allowEmptyArrays&&"boolean"!=typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==t.decodeDotInKeys&&"boolean"!=typeof t.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(void 0!==t.throwOnLimitExceeded&&"boolean"!=typeof t.throwOnLimitExceeded)throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=void 0===t.charset?n.charset:t.charset,o=void 0===t.duplicates?n.duplicates:t.duplicates;if("combine"!==o&&"first"!==o&&"last"!==o)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===t.allowDots?!0===t.decodeDotInKeys||n.allowDots:!!t.allowDots,allowEmptyArrays:"boolean"==typeof t.allowEmptyArrays?!!t.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:n.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:n.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:n.arrayLimit,charset:r,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:n.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:n.comma,decodeDotInKeys:"boolean"==typeof t.decodeDotInKeys?t.decodeDotInKeys:n.decodeDotInKeys,decoder:"function"==typeof t.decoder?t.decoder:n.decoder,delimiter:"string"==typeof t.delimiter||e.isRegExp(t.delimiter)?t.delimiter:n.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:n.depth,duplicates:o,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:n.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:n.plainObjects,strictDepth:"boolean"==typeof t.strictDepth?!!t.strictDepth:n.strictDepth,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:n.strictNullHandling,throwOnLimitExceeded:"boolean"==typeof t.throwOnLimitExceeded&&t.throwOnLimitExceeded}}(u);if(""===s||null==s)return c.plainObjects?{__proto__:null}:{};for(var l="string"==typeof s?function(a,s){var u={__proto__:null},c=s.ignoreQueryPrefix?a.replace(/^\?/,""):a;c=c.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var l=s.parameterLimit===1/0?void 0:s.parameterLimit,p=c.split(s.delimiter,s.throwOnLimitExceeded?l+1:l);if(s.throwOnLimitExceeded&&p.length>l)throw new RangeError("Parameter limit exceeded. Only "+l+" parameter"+(1===l?"":"s")+" allowed.");var f,h=-1,d=s.charset;if(s.charsetSentinel)for(f=0;f<p.length;++f)0===p[f].indexOf("utf8=")&&("utf8=%E2%9C%93"===p[f]?d="utf-8":"utf8=%26%2310003%3B"===p[f]&&(d="iso-8859-1"),h=f,f=p.length);for(f=0;f<p.length;++f)if(f!==h){var y,m,g=p[f],b=g.indexOf("]="),_=-1===b?g.indexOf("="):b+1;-1===_?(y=s.decoder(g,n.decoder,d,"key"),m=s.strictNullHandling?null:""):(y=s.decoder(g.slice(0,_),n.decoder,d,"key"),m=e.maybeMap(i(g.slice(_+1),s,r(u[y])?u[y].length:0),(function(e){return s.decoder(e,n.decoder,d,"value")}))),m&&s.interpretNumericEntities&&"iso-8859-1"===d&&(m=o(String(m))),g.indexOf("[]=")>-1&&(m=r(m)?[m]:m);var w=t.call(u,y);w&&"combine"===s.duplicates?u[y]=e.combine(u[y],m):w&&"last"!==s.duplicates||(u[y]=m)}return u}(s,c):s,p=c.plainObjects?{__proto__:null}:{},f=Object.keys(l),h=0;h<f.length;++h){var d=f[h],y=a(d,l[d],c,"string"==typeof s);p=e.merge(p,y,c)}return!0===c.allowSparse?p:e.compact(p)}}function Ta(){if(Ti)return Pi;Ti=1;var e=Ra(),t=Pa();return Pi={formats:Sa(),parse:t,stringify:e}}var Ca=r(Ta()),xa=/%[sdj%]/g;function Ua(e,t){var r={seen:[],stylize:qa};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),Fa(t)?r.showHidden=t:t&&function(e,t){if(!t||!Ba(t))return e;var r=Object.keys(t),n=r.length;for(;n--;)e[r[n]]=t[r[n]]}(r,t),Ma(r.showHidden)&&(r.showHidden=!1),Ma(r.depth)&&(r.depth=2),Ma(r.colors)&&(r.colors=!1),Ma(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=ja),ka(r,e,r.depth)}function ja(e,t){var r=Ua.styles[t];return r?"["+Ua.colors[r][0]+"m"+e+"["+Ua.colors[r][1]+"m":e}function qa(e,t){return e}function ka(e,t,r){if(e.customInspect&&t&&Ga(t.inspect)&&t.inspect!==Ua&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return Na(n)||(n=ka(e,n,r)),n}var o=function(e,t){if(Ma(t))return e.stylize("undefined","undefined");if(Na(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(n=t,"number"==typeof n)return e.stylize(""+t,"number");var n;if(Fa(t))return e.stylize(""+t,"boolean");if(Da(t))return e.stylize("null","null")}(e,t);if(o)return o;var i=Object.keys(t),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),za(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return La(t);if(0===i.length){if(Ga(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if($a(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Wa(t))return e.stylize(Date.prototype.toString.call(t),"date");if(za(t))return La(t)}var u,c,l="",p=!1,f=["{","}"];(u=t,Array.isArray(u)&&(p=!0,f=["[","]"]),Ga(t))&&(l=" [Function"+(t.name?": "+t.name:"")+"]");return $a(t)&&(l=" "+RegExp.prototype.toString.call(t)),Wa(t)&&(l=" "+Date.prototype.toUTCString.call(t)),za(t)&&(l=" "+La(t)),0!==i.length||p&&0!=t.length?r<0?$a(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=p?function(e,t,r,n,o){for(var i=[],a=0,s=t.length;a<s;++a)Ya(t,String(a))?i.push(Ia(e,t,r,n,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(Ia(e,t,r,n,o,!0))})),i}(e,t,r,a,i):i.map((function(n){return Ia(e,t,r,a,n,p)})),e.seen.pop(),function(e,t,r){var n=e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(n>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(c,l,f)):f[0]+l+f[1]}function La(e){return"["+Error.prototype.toString.call(e)+"]"}function Ia(e,t,r,n,o,i){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),Ya(n,o)||(a="["+o+"]"),s||(e.seen.indexOf(u.value)<0?(s=Da(r)?ka(e,u.value,null):ka(e,u.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),Ma(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function Fa(e){return"boolean"==typeof e}function Da(e){return null===e}function Na(e){return"string"==typeof e}function Ma(e){return void 0===e}function $a(e){return Ba(e)&&"[object RegExp]"===Ha(e)}function Ba(e){return"object"==typeof e&&null!==e}function Wa(e){return Ba(e)&&"[object Date]"===Ha(e)}function za(e){return Ba(e)&&("[object Error]"===Ha(e)||e instanceof Error)}function Ga(e){return"function"==typeof e}function Ha(e){return Object.prototype.toString.call(e)}function Ya(e,t){return Object.prototype.hasOwnProperty.call(e,t)}Ua.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Ua.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Ka(e){return"string"==typeof e}function Va(e){return(e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(e)}function Ja(e){return null!=(t=e)&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)||ArrayBuffer.isView(e);var t}function Qa(e){return!e||["latest","*"].some((t=>t===e))}function Xa(e){const t=[{fn:Ka,mime:"text/plain"},{fn:Va,mime:"application/json"},{fn:Ja,mime:"application/octet-stream"}].find((({fn:t})=>t(e)));if(null==t)throw new TypeError("Unsupported vault data type: "+typeof e);return t.mime}function Za(e){const{exp:t}=bn(e);return new Date(1e3*t).getTime()-6e4<(new Date).getTime()}function es(e,t){const r=Array.isArray(t)?t.map((e=>function(e){return ns(e)?e:encodeURIComponent(e)}(e))).join("/"):t;return e?r?e.endsWith("/")!==r.startsWith("/")?`${e}${r}`:r.startsWith("/")?`${e}${r.replace("/","")}`:`${e}/${r}`:e:r}function ts(e){return"FormData"===e?.constructor?.name}function rs(e){let t;return t="undefined"!=typeof window&&window.FormData?window.FormData:require("form-data"),new t(e)}function ns(e){try{return e!==decodeURIComponent(e)}catch(e){return!1}}function os({args:e,predicate:t,errorMessageFormat:r}){if(Va(e)){const n=Object.keys(e).reduce(((r,n)=>(t(e[n])&&r.push(`'${n}'`),r)),[]);if(n.length>0)throw new Error(function(e){if(!Na(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(Ua(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,i=String(e).replace(xa,(function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),a=n[r];r<o;a=n[++r])Da(a)||!Ba(a)?i+=" "+a:i+=" "+Ua(a);return i}(r,n.join(", ")))}}function is(e){os({args:e,predicate:e=>null==e,errorMessageFormat:"Required argument(s) %s are missing or are passed as null/undefined"})}function as(e){if(!e)return e;const t=new URL(e);return t.protocol="wss",t.toString()}function ss(e,t,r){const{href:n,...o}=r??{},i=n??es(e,t),a=new URL(i);for(const[e,t]of Object.entries(o))a.searchParams.set(e,t);return a}const us=N("waylay:client"),cs="The '@waylay/wql' package is required when using the 'wql' option, but it was not found. Please install it as a peer dependency.";class ls{constructor(e,t){this._options=e??{},this.wqlModuleLoaded=null,this.wqlModule=null,this.wqlCompiler=ps.QUERY_RESOURCES;const r=t??this._options.client;if(!r)throw new Error("Missing 'client' information");this._client=r}_request(e){if(!(void 0!==e.url&&null!==e.url||void 0!==e.path&&null!==e.path))throw new Error("Missing a required 'url' or 'path' option.");const t=null==e.path?e.url:es(this.baseUrl,e.path);return delete(e=Object.assign({url:t},e)).path,"wql"in e?this._handleWQLRequest(e):this._client._request(e)}async _loadWqlModule(){try{null===this.wqlModuleLoaded&&(this.wqlModule=await this.loadWqlModule(),this.wqlModuleLoaded=!0)}catch(e){throw"MODULE_NOT_FOUND"===e.code?(this.wqlModuleLoaded=!1,new Error(cs)):e}}async _handleWQLRequest(e){if(null===this.wqlModuleLoaded&&await this._loadWqlModule(),!this.wqlModuleLoaded)throw new Error(cs);const{WqlParser:t}=this.wqlModule,{compilers:r}=this.wqlModule,n=new t(r[this.wqlCompiler]).parse(e.wql,{from:this.convertToURLSearchParams(e.params)});return e.params=this.convertToRecord(n),delete e.wql,this._client._request(e)}get _hasBaseUrlOverride(){return Object.prototype.hasOwnProperty.call(this._options,"baseUrl")}get _baseUrlOverride(){const e=this._options.routePrefix||"";let{baseUrl:t}=this._options;return t?(t.endsWith("/")&&(t=t.slice(0,-1)),t.endsWith(e)||(t=es(t,e)),M(t,{https:!0})):t}get _key(){return this._options.settingsBaseUrlKey||this.constructor.name}get _baseUrlGateway(){const e=this._options.gatewayRoutePrefix??this._options.routePrefix;if(null==e)return void us(`WARNING: cannot infer a gateway endpoint for ${this._key} while a gateway is configured.`);const t=this._client.gateway;if(null!=t)return M(t+e,{https:!0});if(this._client.enforceGateway)throw new Error("A gateway is enforced but not configured.")}get _baseUrlGlobalSettings(){const e=this._options.settingsBaseUrlKey,t=e&&this._client._settings&&this._client._settings[e];if(!t)return;const r=es(t,this._options.routePrefix||"");return M(r,{https:!0})}get _baseUrlDefault(){const e=this._options.defaultBaseUrl;if(!e)return;const t=es(e,this._options.routePrefix||"");return M(t,{https:!0})}get _baseUrlDomain(){const e=this._client.baseUrl;if(!e||"https://"===e)return;const t=es(e,this._options.routePrefix||"");return M(t,{https:!0})}get baseUrl(){if(this._hasBaseUrlOverride)return this._baseUrlOverride;const e=this._baseUrlGateway;if(e)return e;if(this._client.enforceGateway)throw new Error(`The ${this._key} service is not supported when the waylay API gateway is enforced.`);const t=this._baseUrlGlobalSettings;if(t)return t;if(this._client.enforceConfigured){if(this._options.api_legacy)return this._baseUrlDomain;throw new Error(`The endpoint for the ${this._key} service has not been configured.`)}return this._baseUrlDefault||this._baseUrlDomain||""}set baseUrl(e){this._options.baseUrl=e}get _isConfigured(){return this._hasBaseUrlOverride||null!=this._baseUrlGateway||null!=this._baseUrlGlobalSettings}_status(){return this.version()}version(){const{statusRoute:e,gatewayStatusRoute:t}=this._options,r=null==e?"/":e,n=null==t?r:t,o=this._baseUrlGateway?n:r;return this._request({method:"GET",path:o})}convertToURLSearchParams(e){const t=new URLSearchParams;return e&&Object.entries(e).forEach((([e,r])=>{Array.isArray(r)?r.forEach((r=>{t.append(e,String(r))})):null!=r&&t.append(e,String(r))})),t}convertToRecord(e){const t={};for(const r of e.keys()){const n=e.getAll(r);t[r]=1===n.length?n[0]:n}return t}async loadWqlModule(){return await Promise.resolve().then((function(){return al}))}}var ps;!function(e){e.QUERY_RULES="QUERY_RULES",e.QUERY_RESOURCES="QUERY_RESOURCES",e.QUERY_REGISTRY="QUERY_REGISTRY"}(ps||(ps={}));const fs="/batch";class hs extends ls{constructor(e,t,r={}){super(e,t);const n=`${e.routePrefix||""}${fs}`,o=`${e.gatewayRoutePrefix||e.routePrefix||""}${fs}`,i=pn({},r,{routePrefix:n,gatewayRoutePrefix:o},e);this.batchService=new ls(i,t)}_batch(e,t,r,n){const o={entity:e,action:t,query:r,actionParameters:n};return this.batchService._request({path:"",method:"POST",data:o})}operation(e){return is({id:e}),this.batchService._request({path:[e]})}}function ds(){const e=(...e)=>this._batch("alarm",...e);return{raw:e,remove:t=>e("delete",{ids:t}),update:(t,r)=>e("update",{ids:t},r)}}const ys={routePrefix:"/alarms/v1/batch"};class ms extends hs{constructor(e,t){super(e,t,ys),this.batch=ds.bind(this)()}create(e){return this._request({method:"POST",path:"/alarms",data:e})}get(e){return is({id:e}),this._request({path:["alarms",e]})}search(e){return this._request({path:"/alarms",params:e})}timeline(e,t,r){return this._request({path:"/alarms",params:{source:e,from:t,to:r},headers:{Accept:"application/vnd.waylay.alarms.timeseries+json"}})}update(e,t){return is({id:e}),this._request({method:"PUT",path:["alarms",e],data:t})}remove(e){return is({id:e}),this._request({method:"DELETE",path:["alarms",e]})}removeAll(e){return this._request({method:"DELETE",path:"/alarms",params:e})}}var gs,bs,_s,ws,Es,vs;!function(e){e.Warning="WARNING",e.Minor="MINOR",e.Major="MAJOR",e.Critical="CRITICAL"}(gs||(gs={})),function(e){e.Active="ACTIVE",e.Acknowledged="ACKNOWLEDGED",e.Cleared="CLEARED"}(bs||(bs={}));class As extends ls{_modelPath(e){return`/models/${encodeURIComponent(e)}`}list(){return this._request({path:"/models"})}get(e){return is({name:e}),this._request({path:this._modelPath(e)})}exampleInput(e){return is({name:e}),this._request({path:`${this._modelPath(e)}/examples`})}predict(e,t){return is({name:e}),this._request({path:`${this._modelPath(e)}/predict`,method:"POST",data:t})}regress(e,t){return is({name:e}),this._request({path:`${this._modelPath(e)}/regress`,method:"POST",data:t})}classify(e,t){return is({name:e}),this._request({path:`${this._modelPath(e)}/classify`,method:"POST",data:t})}remove(e){return is({name:e}),this._request({method:"DELETE",path:this._modelPath(e)})}patch(e,t){is({name:e});const r=Object.assign({},t.metadata);return t.description&&(r.description=t.description),this._request({path:this._modelPath(e),method:"PATCH",data:{metadata:r}})}}class Ss extends ls{getSeries(e,t){return is({resource:e}),this._request({path:["series",e],params:t})}postSeries(e,t,r){const n={method:"POST"};return"object"==typeof e?(n.path="/events",n.data=e,n.params=t):(is({resourceOrBulkEvent:e}),n.path=["events",e],n.data=t,n.params=r),this._request(n)}deleteSeries(e,t,r={}){const n={...r,onlytimeseries:!0,metrics:Array.isArray(t)?t.join(","):t};return this.remove(e,n)}getMetricSeries(e,t,r){is({resource:e,metric:t});const n=Object.assign({},{grouping:"auto",aggregate:"mean"},r);return"none"===n.aggregate&&Object.assign(n,{aggregate:void 0,grouping:void 0}),this._request({path:["series",e,t],params:n})}getLastDatapointsForMetric(e,t,r){is({resource:e,metric:t});const n=Object.assign({},{limit:2e3},r);return this._request({path:["series",e,t,"last"],params:n})}getDatapointsForMetricRaw(e,t,r){is({resource:e,metric:t});const n=Object.assign({},{limit:2e3},r);return this._request({path:["series",e,t,"raw"],params:n,headers:{Accept:"application/hal+json"}})}queryTimeSeries(e){return this._request({path:"/series/query",method:"POST",data:e})}queryMessages(e){return this._request({path:"/messages/query",method:"POST",data:e})}getLastMetric(e,t){return is({resource:e,metric:t}),this._request({path:["series",e,t,"latest"]})}getLatestDocument(e){return is({resource:e}),this._request({path:["messages",e,"current"]})}getLatestMessages(e,t){return t?this.queryMessages({...t,resources:[e]}).then((e=>0===e.results.length?[]:e.results[0].messages)):(is({resource:e}),this._request({path:["messages",e]}))}remove(e,t){return is({resource:e}),t&&t.onlytimeseries?this._request({method:"DELETE",path:["series",e],params:t}):Promise.all([this._request({method:"DELETE",path:["series",e],params:t}),this._request({method:"DELETE",path:["messages",e],params:t})]).then((([e,t])=>({...e,...t,message:`${e.message} / ${t.message}`})))}ws(e){let t="events";e&&(t=this._client.gateway?["events",e,"subscribe"]:["resources",e,"events","subscribe"]);const r=as(this.baseUrl);return r?es(r,t):void 0}}function Os(){const e=(...e)=>this._batch("resource",...e);return{raw:e,remove:(t,r)=>e("delete",{ids:t},r?{cascade:r}:void 0)}}Ss.prototype.getMessages=Ss.prototype.getSeries,Ss.prototype.postMessage=Ss.prototype.postSeries,function(e){e.Ascending="ascending",e.Descending="descending"}(_s||(_s={})),function(e){e.None="none",e.Mean="mean",e.Median="median",e.Min="min",e.Max="max",e.Sum="sum",e.Count="count",e.CountNumeric="count-numeric",e.CountNonNumeric="count-non-numeric",e.First="first",e.Last="last",e.Std="std",e.Diff="diff",e.Percentile="percentile"}(ws||(ws={}));var Rs,Ps=function(){if(vs)return Es;vs=1;var e="__lodash_hash_undefined__",r=9007199254740991,n="[object Symbol]",o=/^\[object .+?Constructor\]$/,i=/^(?:0|[1-9]\d*)$/,a="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,u=a||s||Function("return this")();function c(e,t){return!!(e?e.length:0)&&function(e,t,r){if(t!=t)return function(e,t,r){var n=e.length,o=r+-1;for(;++o<n;)if(t(e[o],o,e))return o;return-1}(e,p,r);var n=r-1,o=e.length;for(;++n<o;)if(e[n]===t)return n;return-1}(e,t,0)>-1}function l(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function p(e){return e!=e}function f(e,t){return e.has(t)}function h(e,t){return function(r){return e(t(r))}}var d,y=Array.prototype,m=Function.prototype,g=Object.prototype,b=u["__core-js_shared__"],_=(d=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",w=m.toString,E=g.hasOwnProperty,v=g.toString,A=RegExp("^"+w.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=u.Symbol,O=h(Object.getPrototypeOf,Object),R=g.propertyIsEnumerable,P=y.splice,T=S?S.isConcatSpreadable:void 0,C=Object.getOwnPropertySymbols,x=Math.max,U=W(u,"Map"),j=W(Object,"create");function q(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function k(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function L(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function I(e){var t=-1,r=e?e.length:0;for(this.__data__=new L;++t<r;)this.add(e[t])}function F(e,t){var r=J(e)||V(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var i in e)o&&("length"==i||Y(i,n))||r.push(i);return r}function D(e,t){for(var r,n,o=e.length;o--;)if((r=e[o][0])===(n=t)||r!=r&&n!=n)return o;return-1}function N(e){if(!Z(e)||(t=e,_&&_ in t))return!1;var t,r=X(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?A:o;return r.test(function(e){if(null!=e){try{return w.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function M(e){if(!Z(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t,r,n,o=(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||g,t===n),i=[];for(var a in e)("constructor"!=a||!o&&E.call(e,a))&&i.push(a);return i}function $(e){return function(e,t,r){var n=t(e);return J(e)?n:l(n,r(e))}(e,te,G)}function B(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function W(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return N(r)?r:void 0}q.prototype.clear=function(){this.__data__=j?j(null):{}},q.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},q.prototype.get=function(t){var r=this.__data__;if(j){var n=r[t];return n===e?void 0:n}return E.call(r,t)?r[t]:void 0},q.prototype.has=function(e){var t=this.__data__;return j?void 0!==t[e]:E.call(t,e)},q.prototype.set=function(t,r){return this.__data__[t]=j&&void 0===r?e:r,this},k.prototype.clear=function(){this.__data__=[]},k.prototype.delete=function(e){var t=this.__data__,r=D(t,e);return!(r<0)&&(r==t.length-1?t.pop():P.call(t,r,1),!0)},k.prototype.get=function(e){var t=this.__data__,r=D(t,e);return r<0?void 0:t[r][1]},k.prototype.has=function(e){return D(this.__data__,e)>-1},k.prototype.set=function(e,t){var r=this.__data__,n=D(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},L.prototype.clear=function(){this.__data__={hash:new q,map:new(U||k),string:new q}},L.prototype.delete=function(e){return B(this,e).delete(e)},L.prototype.get=function(e){return B(this,e).get(e)},L.prototype.has=function(e){return B(this,e).has(e)},L.prototype.set=function(e,t){return B(this,e).set(e,t),this},I.prototype.add=I.prototype.push=function(t){return this.__data__.set(t,e),this},I.prototype.has=function(e){return this.__data__.has(e)};var z=C?h(C,Object):ie,G=C?function(e){for(var t=[];e;)l(t,z(e)),e=O(e);return t}:ie;function H(e){return J(e)||V(e)||!!(T&&e&&e[T])}function Y(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||i.test(e))&&e>-1&&e%1==0&&e<t}function K(e){if("string"==typeof e||function(e){return"symbol"==typeof e||ee(e)&&v.call(e)==n}(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function V(e){return function(e){return ee(e)&&Q(e)}(e)&&E.call(e,"callee")&&(!R.call(e,"callee")||"[object Arguments]"==v.call(e))}var J=Array.isArray;function Q(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!X(e)}function X(e){var t=Z(e)?v.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function Z(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ee(e){return!!e&&"object"==typeof e}function te(e){return Q(e)?F(e):M(e)}var re,ne,oe=(re=function(e,t){return null==e?{}:(t=function(e,t){for(var r=-1,n=e?e.length:0,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(function(e,t,r,n,o){var i=-1,a=e.length;for(r||(r=H),o||(o=[]);++i<a;){var s=e[i];r(s)?l(o,s):o[o.length]=s}return o}(t),K),function(e,t){return function(e,t,r){for(var n=-1,o=t.length,i={};++n<o;){var a=t[n],s=e[a];r(s,a)&&(i[a]=s)}return i}(e=Object(e),t,(function(t,r){return r in e}))}(e,function(e,t,r,n){var o=-1,i=c,a=!0,s=e.length,u=[],l=t.length;if(!s)return u;t.length>=200&&(i=f,a=!1,t=new I(t));e:for(;++o<s;){var p=e[o],h=p;if(p=0!==p?p:0,a&&h==h){for(var d=l;d--;)if(t[d]===h)continue e;u.push(p)}else i(t,h,n)||u.push(p)}return u}($(e),t)))},ne=x(void 0===ne?re.length-1:ne,0),function(){for(var e=arguments,t=-1,r=x(e.length-ne,0),n=Array(r);++t<r;)n[t]=e[ne+t];t=-1;for(var o=Array(ne+1);++t<ne;)o[t]=e[t];return o[ne]=n,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(re,this,o)});function ie(){return[]}return Es=oe}(),Ts=r(Ps),Cs={exports:{}};var xs,Us,js,qs=(Rs||(Rs=1,function(e,r){var n="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",a="[object Array]",s="[object Boolean]",u="[object Date]",c="[object Error]",l="[object Function]",p="[object Map]",f="[object Number]",h="[object Object]",d="[object Promise]",y="[object RegExp]",m="[object Set]",g="[object String]",b="[object Symbol]",_="[object WeakMap]",w="[object ArrayBuffer]",E="[object DataView]",v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A=/^\w*$/,S=/^\./,O=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,R=/\\(\\)?/g,P=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,C={};C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C[i]=C[a]=C[w]=C[s]=C[E]=C[u]=C[c]=C[l]=C[p]=C[f]=C[h]=C[y]=C[m]=C[g]=C[_]=!1;var x="object"==typeof t&&t&&t.Object===Object&&t,U="object"==typeof self&&self&&self.Object===Object&&self,j=x||U||Function("return this")(),q=r&&!r.nodeType&&r,k=q&&e&&!e.nodeType&&e,L=k&&k.exports===q&&x.process,I=function(){try{return L&&L.binding("util")}catch(e){}}(),F=I&&I.isTypedArray;function D(e,t,r,n){var o=-1,i=e?e.length:0;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}function N(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function M(e,t,r,n,o){return o(e,(function(e,o,i){r=n?(n=!1,e):t(r,e,o,i)})),r}function $(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function B(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function W(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var z,G,H,Y=Array.prototype,K=Function.prototype,V=Object.prototype,J=j["__core-js_shared__"],Q=(z=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"",X=K.toString,Z=V.hasOwnProperty,ee=V.toString,te=RegExp("^"+X.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=j.Symbol,ne=j.Uint8Array,oe=V.propertyIsEnumerable,ie=Y.splice,ae=(G=Object.keys,H=Object,function(e){return G(H(e))}),se=Me(j,"DataView"),ue=Me(j,"Map"),ce=Me(j,"Promise"),le=Me(j,"Set"),pe=Me(j,"WeakMap"),fe=Me(Object,"create"),he=Ke(se),de=Ke(ue),ye=Ke(ce),me=Ke(le),ge=Ke(pe),be=re?re.prototype:void 0,_e=be?be.valueOf:void 0,we=be?be.toString:void 0;function Ee(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ve(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ae(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Se(e){var t=-1,r=e?e.length:0;for(this.__data__=new Ae;++t<r;)this.add(e[t])}function Oe(e){this.__data__=new ve(e)}function Re(e,t){var r=Xe(e)||Qe(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var i in e)!Z.call(e,i)||o&&("length"==i||Be(i,n))||r.push(i);return r}function Pe(e,t){for(var r=e.length;r--;)if(Je(e[r][0],t))return r;return-1}Ee.prototype.clear=function(){this.__data__=fe?fe(null):{}},Ee.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ee.prototype.get=function(e){var t=this.__data__;if(fe){var r=t[e];return r===n?void 0:r}return Z.call(t,e)?t[e]:void 0},Ee.prototype.has=function(e){var t=this.__data__;return fe?void 0!==t[e]:Z.call(t,e)},Ee.prototype.set=function(e,t){return this.__data__[e]=fe&&void 0===t?n:t,this},ve.prototype.clear=function(){this.__data__=[]},ve.prototype.delete=function(e){var t=this.__data__,r=Pe(t,e);return!(r<0||(r==t.length-1?t.pop():ie.call(t,r,1),0))},ve.prototype.get=function(e){var t=this.__data__,r=Pe(t,e);return r<0?void 0:t[r][1]},ve.prototype.has=function(e){return Pe(this.__data__,e)>-1},ve.prototype.set=function(e,t){var r=this.__data__,n=Pe(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Ae.prototype.clear=function(){this.__data__={hash:new Ee,map:new(ue||ve),string:new Ee}},Ae.prototype.delete=function(e){return Ne(this,e).delete(e)},Ae.prototype.get=function(e){return Ne(this,e).get(e)},Ae.prototype.has=function(e){return Ne(this,e).has(e)},Ae.prototype.set=function(e,t){return Ne(this,e).set(e,t),this},Se.prototype.add=Se.prototype.push=function(e){return this.__data__.set(e,n),this},Se.prototype.has=function(e){return this.__data__.has(e)},Oe.prototype.clear=function(){this.__data__=new ve},Oe.prototype.delete=function(e){return this.__data__.delete(e)},Oe.prototype.get=function(e){return this.__data__.get(e)},Oe.prototype.has=function(e){return this.__data__.has(e)},Oe.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ve){var n=r.__data__;if(!ue||n.length<199)return n.push([e,t]),this;r=this.__data__=new Ae(n)}return r.set(e,t),this};var Te,Ce=(Te=function(e,t){return e&&xe(e,t,at)},function(e,t){if(null==e)return e;if(!Ze(e))return Te(e,t);for(var r=e.length,n=-1,o=Object(e);++n<r&&!1!==t(o[n],n,o););return e}),xe=function(e,t,r){for(var n=-1,o=Object(e),i=r(e),a=i.length;a--;){var s=i[++n];if(!1===t(o[s],s,o))break}return e};function Ue(e,t){for(var r=0,n=(t=We(t,e)?[t]:Fe(t)).length;null!=e&&r<n;)e=e[Ye(t[r++])];return r&&r==n?e:void 0}function je(e,t){return null!=e&&t in Object(e)}function qe(e,t,r,n,o){return e===t||(null==e||null==t||!rt(e)&&!nt(t)?e!=e&&t!=t:function(e,t,r,n,o,l){var d=Xe(e),_=Xe(t),v=a,A=a;d||(v=(v=$e(e))==i?h:v),_||(A=(A=$e(t))==i?h:A);var S=v==h&&!$(e),O=A==h&&!$(t),R=v==A;if(R&&!S)return l||(l=new Oe),d||it(e)?De(e,t,r,n,o,l):function(e,t,r,n,o,i,a){switch(r){case E:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!n(new ne(e),new ne(t)));case s:case u:case f:return Je(+e,+t);case c:return e.name==t.name&&e.message==t.message;case y:case g:return e==t+"";case p:var l=B;case m:var h=2&i;if(l||(l=W),e.size!=t.size&&!h)return!1;var d=a.get(e);if(d)return d==t;i|=1,a.set(e,t);var _=De(l(e),l(t),n,o,i,a);return a.delete(e),_;case b:if(_e)return _e.call(e)==_e.call(t)}return!1}(e,t,v,r,n,o,l);if(!(2&o)){var P=S&&Z.call(e,"__wrapped__"),T=O&&Z.call(t,"__wrapped__");if(P||T){var C=P?e.value():e,x=T?t.value():t;return l||(l=new Oe),r(C,x,n,o,l)}}return!!R&&(l||(l=new Oe),function(e,t,r,n,o,i){var a=2&o,s=at(e),u=s.length,c=at(t),l=c.length;if(u!=l&&!a)return!1;for(var p=u;p--;){var f=s[p];if(!(a?f in t:Z.call(t,f)))return!1}var h=i.get(e);if(h&&i.get(t))return h==t;var d=!0;i.set(e,t),i.set(t,e);for(var y=a;++p<u;){var m=e[f=s[p]],g=t[f];if(n)var b=a?n(g,m,f,t,e,i):n(m,g,f,e,t,i);if(!(void 0===b?m===g||r(m,g,n,o,i):b)){d=!1;break}y||(y="constructor"==f)}if(d&&!y){var _=e.constructor,w=t.constructor;_==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(d=!1)}return i.delete(e),i.delete(t),d}(e,t,r,n,o,l))}(e,t,qe,r,n,o))}function ke(e){return!(!rt(e)||function(e){return!!Q&&Q in e}(e))&&(et(e)||$(e)?te:P).test(Ke(e))}function Le(e){return"function"==typeof e?e:null==e?st:"object"==typeof e?Xe(e)?function(e,t){return We(e)&&ze(t)?Ge(Ye(e),t):function(r){var n=function(e,t,r){var n=null==e?void 0:Ue(e,t);return void 0===n?r:n}(r,e);return void 0===n&&n===t?function(e,t){return null!=e&&function(e,t,r){t=We(t,e)?[t]:Fe(t);for(var n,o=-1,i=t.length;++o<i;){var a=Ye(t[o]);if(!(n=null!=e&&r(e,a)))break;e=e[a]}return n||!!(i=e?e.length:0)&&tt(i)&&Be(a,i)&&(Xe(e)||Qe(e))}(e,t,je)}(r,e):qe(t,n,void 0,3)}}(e[0],e[1]):(r=function(e){for(var t=at(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,ze(o)]}return t}(t=e),1==r.length&&r[0][2]?Ge(r[0][0],r[0][1]):function(e){return e===t||function(e,t,r,n){var o=r.length,i=o;if(null==e)return!i;for(e=Object(e);o--;){var a=r[o];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){var s=(a=r[o])[0],u=e[s],c=a[1];if(a[2]){if(void 0===u&&!(s in e))return!1}else if(!qe(c,u,n,3,new Oe))return!1}return!0}(e,0,r)}):We(n=e)?(o=Ye(n),function(e){return null==e?void 0:e[o]}):function(e){return function(t){return Ue(t,e)}}(n);var t,r,n,o}function Ie(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||V,t!==n)return ae(e);var t,r,n,o=[];for(var i in Object(e))Z.call(e,i)&&"constructor"!=i&&o.push(i);return o}function Fe(e){return Xe(e)?e:He(e)}function De(e,t,r,n,o,i){var a=2&o,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var l=-1,p=!0,f=1&o?new Se:void 0;for(i.set(e,t),i.set(t,e);++l<s;){var h=e[l],d=t[l];if(n)var y=a?n(d,h,l,t,e,i):n(h,d,l,e,t,i);if(void 0!==y){if(y)continue;p=!1;break}if(f){if(!N(t,(function(e,t){if(!f.has(t)&&(h===e||r(h,e,n,o,i)))return f.add(t)}))){p=!1;break}}else if(h!==d&&!r(h,d,n,o,i)){p=!1;break}}return i.delete(e),i.delete(t),p}function Ne(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function Me(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return ke(r)?r:void 0}var $e=function(e){return ee.call(e)};function Be(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||T.test(e))&&e>-1&&e%1==0&&e<t}function We(e,t){if(Xe(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!ot(e))||A.test(e)||!v.test(e)||null!=t&&e in Object(t)}function ze(e){return e==e&&!rt(e)}function Ge(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}(se&&$e(new se(new ArrayBuffer(1)))!=E||ue&&$e(new ue)!=p||ce&&$e(ce.resolve())!=d||le&&$e(new le)!=m||pe&&$e(new pe)!=_)&&($e=function(e){var t=ee.call(e),r=t==h?e.constructor:void 0,n=r?Ke(r):void 0;if(n)switch(n){case he:return E;case de:return p;case ye:return d;case me:return m;case ge:return _}return t});var He=Ve((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(ot(e))return we?we.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var r=[];return S.test(e)&&r.push(""),e.replace(O,(function(e,t,n,o){r.push(n?o.replace(R,"$1"):t||e)})),r}));function Ye(e){if("string"==typeof e||ot(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ke(e){if(null!=e){try{return X.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ve(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(Ve.Cache||Ae),r}function Je(e,t){return e===t||e!=e&&t!=t}function Qe(e){return function(e){return nt(e)&&Ze(e)}(e)&&Z.call(e,"callee")&&(!oe.call(e,"callee")||ee.call(e)==i)}Ve.Cache=Ae;var Xe=Array.isArray;function Ze(e){return null!=e&&tt(e.length)&&!et(e)}function et(e){var t=rt(e)?ee.call(e):"";return t==l||"[object GeneratorFunction]"==t}function tt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function rt(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function nt(e){return!!e&&"object"==typeof e}function ot(e){return"symbol"==typeof e||nt(e)&&ee.call(e)==b}var it=F?function(e){return function(t){return e(t)}}(F):function(e){return nt(e)&&tt(e.length)&&!!C[ee.call(e)]};function at(e){return Ze(e)?Re(e):Ie(e)}function st(e){return e}e.exports=function(e,t,r){var n=Xe(e)?D:M,o=arguments.length<3;return n(e,Le(t),r,o,Ce)}}(Cs,Cs.exports)),Cs.exports),ks=r(qs);class Ls extends hs{constructor(e,t){super(e,t),this.batch=Os.bind(this)()}get data(){return this._client.data}create(e){return this._request({path:"/resources",method:"POST",data:e})}get(e,t={}){is({id:e}),os({args:{id:e},predicate:e=>""===(e||"").trim(),errorMessageFormat:"Required argument(s) %s are empty"});const r=Object.assign({},{path:["resources",e]},t);return this._request(r)}children(e,t){is({id:e});const r=Object.assign({limit:10,skip:0},t),n=Object.assign({},{path:["resources",e,"children"],params:r});return this._request(n)}async parent(e){is({id:e});const t=Object.assign({},{path:["resources",e]}),r=await this._request(t),{parentId:n}=r;if(!n)return;const o=Object.assign({},{path:["resources",n]});return await this._request(o)}async references(e){is({id:e});const t=Object.assign({},{path:["resources",e],headers:{Accept:"application/hal+json"}}),{_links:r}=await this._request(t),n=Ts(r,["self","children","parent","resourceType"]);if(0===Object.entries(n).length)return;const o=ks(n,((e,t,r)=>`${e}id=${t.id}&`),"").slice(0,-1),i=Object.assign({},{path:`/resources?${o}`});return await this._request(i)}referrers(e,t={}){is({id:e});const r={path:["resources",e,"referrers"],params:Object.assign({limit:10,skip:0},t)};return this._request(r)}update(e,t){return is({id:e}),this._request({path:["resources",e],method:"PATCH",data:t})}replace(e,t){return is({id:e}),this._request({path:["resources",e],method:"PUT",data:t})}remove(e,t){return is({id:e}),this._request({path:["resources",e],params:t,method:"DELETE"})}search(e,t={}){const r=Object.assign({},{path:"/resources",params:e},t);return this._request(r)}changelog(e,t={}){is({resource:e});const r={path:["resources",e,"changes"],headers:{Accept:"application/vnd.waylay.paged+json"},params:Object.assign({limit:10,skip:0},t)};return this._request(r)}}class Is extends ls{getMetrics(e){return this._request({path:"/metrics",params:e})}getMetric(e,t){return is({name:e}),this._request({path:["metrics",e],params:t})}}function Fs(){const e=(...e)=>this._batch("task",...e);return{raw:e,start:t=>e("start",{ids:t}),stop:t=>e("stop",{ids:t}),remove:t=>e("delete",{ids:t})}}class Ds extends hs{constructor(e,t){super(e,t),this.batch=Fs.bind(this)(),this.wqlCompiler=ps.QUERY_RULES}create(e,t){return this._request({path:"/tasks",method:"POST",data:e,params:t})}update(e,t){return is({id:e}),this._request({path:["tasks",e],method:"PUT",data:t})}list(e,t,r){const n=Object.assign({},r);"object"==typeof e&&(r=t,t=e,e=void 0,"wql"in n&&(r=Object.assign({},r,{wql:n.wql}))),"string"==typeof e&&(t={...t,filter:e}),t=Object.assign({limit:10,offset:0},t);const{limit:o,offset:i,headers:a,...s}=t;return this._request({path:"/tasks",params:Object.assign({hits:o,startIndex:i},s),headers:a,...r})}count(e){return this._request({method:"head",wantsFullResponse:!0,path:"/tasks",params:Object.assign({hits:0,startIndex:0},e)}).then((e=>{const t=e.headers["x-count"];return t?Number(t):void 0}))}remove(e,t=!1){return is({id:e}),this._request({path:["tasks",e],method:"DELETE",params:{forceStop:t}})}batchRemove(e=[]){return this._request({path:"/tasks",method:"DELETE",params:{id:e}})}get(e,t={},r){return is({id:e}),this._request({path:["tasks",e],params:t,...r})}start(e){return is({id:e}),this._request({path:["tasks",e,"command","start"],method:"POST"})}stop(e){return is({id:e}),this._request({path:["tasks",e,"command","stop"],method:"POST"})}stopAndRemove(e){return is({id:e}),this.remove(e,!0)}childRuns(e,t){return is({parentId:e,from:t.from,to:t.to}),this._request({path:["tasks",e,"childRuns"],method:"GET",params:{from:t.from,to:t.to,skip:t.skip,limit:t.limit}})}log({taskId:e,logLevel:t,messageContains:r,from:n,until:o,pageToken:i}){return this._request({path:"/tasklogs",method:"POST",data:{taskId:e,logLevel:t,messageContains:r,from:n,until:o,pageToken:i}})}logsUrl(e={}){const t=new URL(`${this.baseUrl}/tasklogs`);return Object.keys(e).forEach((r=>{t.searchParams.set(r,e[r])})),t}eventsUrl(e){return new URL(es(this.baseUrl,["tasks",e,"events"]))}pushState(e,t,r){is({id:e,node:t});const n=new URLSearchParams({state:r}).toString();return this._request({path:["tasks",e,"nodes",t],method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:n})}patchNode(e,t,r){return is({id:e,node:t}),this._request({path:["tasks",e,"nodes",t],method:"PATCH",data:r})}}function Ns(){const e=(...e)=>this._batch("resourcetype",...e);return{raw:e,remove:t=>e("delete",{ids:t})}}!function(e){e.OneTime="onetime",e.Periodic="periodic",e.Scheduled="scheduled",e.Reactive="reactive"}(xs||(xs={})),function(e){e.Running="running",e.Stopped="stopped",e.Failed="failed"}(Us||(Us={}));class Ms extends hs{constructor(e,t){super(e,t),this.batch=Ns.bind(this)(),this.wqlCompiler=ps.QUERY_RESOURCES}create(e){return this._request({path:"/resourcetypes",method:"POST",data:e})}remove(e){return is({id:e}),this._request({path:["resourcetypes",e],method:"DELETE"})}update(e,t){return is({id:e}),this._request({path:["resourcetypes",e],method:"PUT",data:t})}patch(e,t){return is({id:e}),this._request({path:["resourcetypes",e],method:"PATCH",data:t})}list(e,t={}){const r={path:"/resourcetypes",params:e,...t};return this._request(r)}get(e){return is({id:e}),this._request({path:["resourcetypes",e]})}constraints(e,t={}){return is({id:e}),this._request({path:["resourcetypes",e,"constraints"],...t})}revalidate(e){return is({id:e}),this._request({path:["resourcetypes",e,"revalidate"],method:"POST"})}changelog(e,t={}){is({id:e});const r={path:["resourcetypes",e,"changes"],headers:{Accept:"application/vnd.waylay.paged+json"},params:Object.assign({limit:10,skip:0},t)};return this._request(r)}}!function(e){e.Created="created",e.Updated="updated",e.Deleted="deleted"}(js||(js={}));class $s extends ls{set(e,t){is({key:e});var r;return Ka(r=t)||Va(r)||Ja(r)?this._request({method:"PUT",headers:{"Content-Type":Xa(t)},path:[e],data:t}):Promise.reject(new TypeError(`unsupported data value, only strings buffers or plain objects are allowed, got "${typeof t}" instead.`))}get(e){return is({key:e}),this._request({path:[e]})}remove(e){return is({key:e}),this._request({method:"DELETE",path:[e]})}keys(e={}){return this._request({path:"",params:e})}}const Bs="application/octet-stream";class Ws extends ls{constructor(e,t){super(e,t),this.runtimes=new zs(e,t),this.jobs=new Hs(e,t),this.webscripts=new Ks(e,t),this.plugs=new Vs(e,t),this.models=new Js(e,t)}}class zs extends ls{constructor(){super(...arguments),this.example=new Gs(this)}list(e){return this._request({path:["runtimes"],params:e})}get(e,t,r){return this._request({path:["runtimes",e,"versions",t],params:r})}getLatest(e,t){return this._request({path:["runtimes",e],params:t})}listVersions(e,t){return this._request({path:["runtimes",e,"versions"],params:t})}async getSchema(e,t,r,n){const{runtime:o}=await this.get(e,t,n),i=o.assets.conditions.find((e=>e.role===r));if(!i)return;const a=i.schema?.$ref;return a?await this._request({path:["schemas",a.replace("waylay:/registry/v2/schemas/","")],params:n}):i.schema}}class Gs{constructor(e){this.runtimes=e}content(e,t,r,n){const o={ls:!1,...r},i={responseType:"arraybuffer",...n};return this.runtimes._request({path:["runtimes",e,"versions",t,"example"],params:o,...i})}getFileContent(e,t,r,n,o){const i={ls:!1,...n};return this.runtimes._request({path:["runtimes",e,"versions",t,"example",r],params:i,...o})}listContent(e,t,r="",n){const o={ls:!0,...n};return this.runtimes._request({path:["runtimes",e,"versions",t,"example",r],params:o})}}class Hs extends ls{list(e){return this._request({path:["jobs"],params:e})}get(e,t,r){return this._request({path:["jobs",e,t],params:r})}getByURL(e,t){return this._request({url:e,params:t})}getEventStreamUrl(e){return{url:ss(this.baseUrl,["jobs","events"],e),headers:{Authorization:`Bearer ${this._client.token}`}}}}class Ys extends ls{constructor(e,t,r){super(t,r),this.functionPath=e,this.wqlCompiler=ps.QUERY_REGISTRY}list(e,t={}){return this._request({path:[this.functionPath],params:e,...t})}get(e,t,r){return this._request({path:[this.functionPath,e,"versions",t],params:r})}getLatest(e,t){return this._request({path:[this.functionPath,e],params:t})}async exists(e,t,r){const n=t?[this.functionPath,e,"versions",t]:[this.functionPath,e],o=t?r:{...r,includeUndeployed:!0};try{return await this._request({path:n,params:o}),!0}catch(e){if(e.response&&404===e.response.status)return!1;throw e}}listVersions(e,t){return this._request({path:[this.functionPath,e,"versions"],params:t})}jobs(e,t,r){return this._request({path:[this.functionPath,e,"versions",t,"jobs"],params:r})}content(e,t,r,n){const o={...r,ls:!1},i={responseType:"arraybuffer",...n};return this._request({path:[this.functionPath,e,"versions",t,"content"],params:o,...i})}getFileContent(e,t,r,n,o){const i={...n,ls:!1};return this._request({path:[this.functionPath,e,"versions",t,"content",r],params:i,...o})}listContent(e,t,r,n){const o={...n,ls:!0};return this._request({path:[this.functionPath,e,"versions",t,"content",r],params:o})}create(e,t,r){const n=ts(e)?void 0:{"content-type":Bs},o=pn({path:[this.functionPath],method:"POST",data:e,params:t},r,{headers:n});return this._request(o)}patchMetadata(e,t,r,n){return this._request({path:[this.functionPath,e,"versions",t,"metadata"],method:"PATCH",params:n,data:r})}patchManifest(e,t,r,n){return this._request({path:[this.functionPath,e,"versions",t,"manifest"],method:"PATCH",params:n,data:r})}remove(e,t,r){return this._request({path:[this.functionPath,e,"versions",t],method:"DELETE",params:r})}removeAll(e,t){return this._request({path:[this.functionPath,e],method:"DELETE",params:t})}rebuild(e,t,r,n){return this._request({path:[this.functionPath,e,"versions",t,"rebuild"],params:n,method:"POST",data:r??{}})}verify(e,t,r,n){return this._request({path:[this.functionPath,e,"versions",t,"verify"],params:n,method:"POST",data:r??{}})}updateDraftAssets(e,t,r,n,o){const i=ts(r)?void 0:{"content-type":Bs},a=pn({path:[this.functionPath,e,"versions",t,"content"],method:"PUT",data:r,params:n},o,{headers:i});return this._request(a)}updateDraftAsset(e,t,r,n,o,i){const a={"content-type":Bs},s=pn({path:[this.functionPath,e,"versions",t,"content",r],method:"PUT",data:n,params:o},i,{headers:a});return this._request(s)}removeDraftAsset(e,t,r,n){return this._request({path:[this.functionPath,e,"versions",t,"content",r],method:"DELETE",params:n})}publishDraft(e,t,r,n){return this._request({path:[this.functionPath,e,"versions",t,"publish"],params:n,method:"POST",data:r??{}})}protect(e,t,r){return this._request({path:[this.functionPath,e,"versions",t,"protect"],params:r,method:"POST"})}protectAll(e,t){return this._request({path:[this.functionPath,e,"protect"],params:t,method:"POST"})}}let Ks=class extends Ys{constructor(e,t){super("webscripts",e,t)}list(e,t={}){return super.list(e,t)}get(e,t,r){return super.get(e,t,r)}getLatest(e,t){return super.getLatest(e,t)}exists(e,t,r){return super.exists(e,t,r)}listVersions(e,t){return super.listVersions(e,t)}jobs(e,t,r){return super.jobs(e,t,r)}content(e,t,r,n){return super.content(e,t,r,n)}getFileContent(e,t,r,n,o){return super.getFileContent(e,t,r,n,o)}listContent(e,t,r="",n){return super.listContent(e,t,r,n)}create(e,t,r){return super.create(e,t,r)}patchMetadata(e,t,r,n){return super.patchMetadata(e,t,r,n)}patchManifest(e,t,r,n){return super.patchManifest(e,t,r,n)}remove(e,t,r){return super.remove(e,t,r)}removeAll(e,t){return super.removeAll(e,t)}rebuild(e,t,r,n){return super.rebuild(e,t,r,n)}verify(e,t,r,n){return super.verify(e,t,r,n)}updateDraftAssets(e,t,r,n,o){return super.updateDraftAssets(e,t,r,n,o)}updateDraftAsset(e,t,r,n,o,i){return super.updateDraftAsset(e,t,r,n,o,i)}removeDraftAsset(e,t,r,n){return super.removeDraftAsset(e,t,r,n)}publishDraft(e,t,r,n){return super.publishDraft(e,t,r,n)}protect(e,t,r){return super.protect(e,t,r)}protectAll(e,t){return super.protectAll(e,t)}},Vs=class extends Ys{constructor(e,t){super("plugs",e,t)}list(e,t={}){return super.list(e,t)}get(e,t,r){return super.get(e,t,r)}getLatest(e,t){return super.getLatest(e,t)}exists(e,t,r){return super.exists(e,t,r)}listVersions(e,t){return super.listVersions(e,t)}jobs(e,t,r){return super.jobs(e,t,r)}content(e,t,r,n){return super.content(e,t,r,n)}getFileContent(e,t,r,n,o){return super.getFileContent(e,t,r,n,o)}listContent(e,t,r="",n){return super.listContent(e,t,r,n)}create(e,t,r){return super.create(e,t,r)}patchMetadata(e,t,r,n){return super.patchMetadata(e,t,r,n)}patchInterface(e,t,r,n){return this._request({path:["plugs",e,"versions",t,"interface"],method:"PATCH",data:r,params:n})}patchManifest(e,t,r,n){return super.patchManifest(e,t,r,n)}remove(e,t,r){return super.remove(e,t,r)}removeAll(e,t){return super.removeAll(e,t)}rebuild(e,t,r,n){return super.rebuild(e,t,r,n)}verify(e,t,r,n){return super.verify(e,t,r,n)}updateDraftAssets(e,t,r,n,o){return super.updateDraftAssets(e,t,r,n,o)}updateDraftAsset(e,t,r,n,o,i){return super.updateDraftAsset(e,t,r,n,o,i)}removeDraftAsset(e,t,r,n){return super.removeDraftAsset(e,t,r,n)}publishDraft(e,t,r,n){return super.publishDraft(e,t,r,n)}protect(e,t,r){return super.protect(e,t,r)}protectAll(e,t){return super.protectAll(e,t)}};class Js extends Ys{constructor(e,t){super("models",e,t)}list(e){return super.list(e)}get(e,t,r){return super.get(e,t,r)}getLatest(e,t){return super.getLatest(e,t)}exists(e,t,r){return super.exists(e,t,r)}listVersions(e,t){return super.listVersions(e,t)}jobs(e,t,r){return super.jobs(e,t,r)}content(e,t,r,n){return super.content(e,t,r,n)}getFileContent(e,t,r,n,o){return super.getFileContent(e,t,r,n,o)}listContent(e,t,r="",n){return super.listContent(e,t,r,n)}create(e,t,r){return super.create(e,t,r)}patchMetadata(e,t,r,n){return super.patchMetadata(e,t,r,n)}patchManifest(e,t,r,n){return super.patchManifest(e,t,r,n)}remove(e,t,r){return super.remove(e,t,r)}removeAll(e,t){return super.removeAll(e,t)}rebuild(e,t,r,n){return super.rebuild(e,t,r,n)}verify(e,t,r,n){return super.verify(e,t,r,n)}updateDraftAssets(e,t,r,n,o){return super.updateDraftAssets(e,t,r,n,o)}updateDraftAsset(e,t,r,n,o,i){return super.updateDraftAsset(e,t,r,n,o,i)}removeDraftAsset(e,t,r,n){return super.removeDraftAsset(e,t,r,n)}publishDraft(e,t,r,n){return super.publishDraft(e,t,r,n)}protect(e,t,r){return super.protect(e,t,r)}protectAll(e,t){return super.protectAll(e,t)}}class Qs extends ls{constructor(e,t){super(e,t),this.registry=new Ws(e.registry,t),this.logs=new Xs(e,t)}call(e,t,r="latest",n,o){is({namespace:e,name:t});const i={path:[e,t],method:"POST",data:n,...o};return Qa(r)||(i.headers=Object.assign(i.headers??{},{"X-Webscript-Version":r})),this._request(i)}list(e={},t={}){return this.registry._request({path:"/webscripts",params:e,...t})}exists(e){return is({name:e}),this.registry._request({path:["webscripts",e],method:"GET"}).then((()=>!0)).catch((e=>{if(e.response&&404===e.response.status)return!1;throw e}))}get(e,t="latest"){is({name:e});const r={};return Qa(t)||(r["X-Webscript-Version"]=t),this.registry._request({path:["webscripts",e],headers:r})}create(e){return this.registry._request({path:"/webscripts",method:"POST",data:e})}remove(e){return is({name:e}),this.registry._request({path:["webscripts",e],method:"DELETE"})}update(e,t){return is({name:e}),this.registry._request({path:["webscripts",e],method:"PUT",data:t})}log(e,t="latest"){is({name:e});const r={};return Qa(t)||(r["X-Webscript-Version"]=t),this.registry._request({path:["webscripts","logs",e],headers:r})}operation(e){if(is({name:e}),!e.startsWith("operations/"))throw new Error("Expecting name to follow the pattern: operations/{operationId}");return this.registry._request({path:`/webscripts/${e}`})}triggerUrl(e,t){return es(this.baseUrl,[e,t])}version(){return Promise.all([super.version(),this.registry.version()]).then((([e,t])=>({...e,registry:t})))}}class Xs extends ls{getEventStreamUrl(e){return{url:ss(this.baseUrl,["webscriptlogs"],e),headers:{Authorization:`Bearer ${this._client.token}`}}}search(e,t){const r={path:["webscriptlogs"],method:"POST",data:e||{},...t};return this._request(r)}}var Zs,eu,tu,ru,nu;!function(e){e.Running="running",e.Pending="pending",e.Failed="failed"}(Zs||(Zs={}));class ou extends ls{getQuery(e){return is({queryName:e}),this._request({path:["config","query",e]})}removeQuery(e){return is({queryName:e}),this._request({path:["config","query",e],method:"DELETE"})}createQuery(e,t){return is({queryName:e,query:t}),this._request({path:["config","query",e],data:{query:t},method:"PUT"})}replaceQuery(e,t){return is({queryName:e,query:t}),this._request({path:["config","query",e],data:{query:t},method:"PUT"})}getQueries({filter:e="",offset:t=0,limit:r=100}={}){return this._request({path:"/config/query",params:{q:e,offset:t,limit:r}})}getQueryData(e,t={}){return is({queryName:e}),this._request({path:["data","query",e],params:{"render.mode":"RENDER_MODE_SERIES",...t}})}}class iu extends ls{constructor(e,t,r){super(e,t),is({type:r}),this._type=r,this.registry=new Ws(e.registry,t)}execute(e,t,r){const n=Qa(t);is({name:e}),n||is({version:t});const o=n?`/${this._type}/${e}`:`/${this._type}/${e}/versions/${t}`;return this._request({path:o,method:"POST",data:r})}debug(e){return this._request({path:["debug",this._type],method:"POST",data:e})}list(e={},t={}){return this._registry_request({path:[this._type],params:e,...t})}get(e,t,r={}){let n=!0;"object"==typeof t?r=t:n=Qa(t),is({name:e}),n||is({version:t});const o=n?`/${this._type}/${e}`:`/${this._type}/${e}/versions/${t}`;return this._registry_request({path:o,params:r})}create(e){return this._registry_request({path:[this._type],method:"POST",data:e})}remove(e,t){return is({name:e}),this._registry_request({path:[this._type,e],method:"DELETE",params:t})}removeVersion(e,t,r){return is({name:e,version:t}),this._registry_request({path:[this._type,e,"versions",t],method:"DELETE",params:r})}getScript(e,t){return is({name:e,version:t}),this._registry_request({path:[this._type,e,"versions",t,"script"]})}getVersions(e,t={}){return is({name:e}),this._registry_request({path:[this._type,e,"versions"],params:t})}patchMetadata(e,t,r){return is({name:e,version:t}),this._registry_request({path:[this._type,e,"versions",t,"metadata"],method:"PATCH",data:r})}patchDocumentation(e,t,r){return is({name:e,version:t}),this._registry_request({path:[this._type,e,"versions",t,"documentation"],method:"PATCH",data:r})}getAllPlugTags(){return this.listTags()}listTags(e){return this._registry_request({path:[this._type,"tags"],method:"GET",params:e})}getPlugTagByName(e){return is({name:e}),this.listTags({name:`*${e}*`})}getTag(e){return is({name:e}),this._registry_request({path:[this._type,"tags",e],method:"GET"})}_registry_request(e){return this.registry._isConfigured?this.registry._request(e):this._request(e)}version(){return this._client.enforceGateway?this.registry.version():this.registry._isConfigured?Promise.all([super.version(),this.registry.version()]).then((([e,t])=>({...e,registry:t}))):super.version()}}!function(e){e.String="string",e.Integer="integer",e.Double="double",e.Object="object",e.Boolean="boolean",e.Long="long",e.Float="float"}(eu||(eu={})),function(e){e.Enum="enum",e.Resource="resource",e.Vault="vault",e.Duration="duration"}(tu||(tu={})),function(e){e.Sensor="sensors",e.Actuator="actuators",e.Transformer="transformers",e.Webscripts="webscripts"}(ru||(ru={})),function(e){e.Javascript="application/javascript",e.Native="application/java-vm"}(nu||(nu={}));class au extends iu{constructor(e,t){super(e,t,"actions")}}class su extends iu{constructor(e,t){super(e,t,"sensors")}}class uu extends iu{constructor(e,t){super(e,t,"transformers")}}class cu extends ls{constructor(e,t){super(e,t),this.wqlCompiler=ps.QUERY_RULES}create(e,t){return this._request({path:"/templates",method:"POST",data:e,params:t})}update(e,t,r){return is({name:e}),this._request({path:["templates",e],method:"PUT",data:t,params:r})}copy(e,t,r={}){return is({name:e,newName:t}),this._request({path:["templates",e],method:"PATCH",params:{newName:t},...r})}list(e,t,r){return"object"==typeof e&&(r=t,t=e,e=void 0),"string"==typeof e&&(t={...t,filter:e}),this._request({path:"/templates",params:t,...r})}get(e,t={}){return is({name:e}),this._request({path:["templates",e],params:t})}remove(e){return is({id:e}),this._request({path:["templates",e],method:"DELETE"})}variables(e){return this._request({path:"/variableDeclarations",method:"POST",data:e})}declarativeBindings(e){return this._request({path:"/declarativeBindings",method:"POST",data:e})}getDiscoveryTemplate(){return this._request({path:"/discoveryTemplate"})}setDiscoveryTemplate(e){const t=e?{name:e}:{};return this._request({path:"/discoveryTemplate",method:"PUT",params:t})}patch(e,t){return this._request({path:"/templates",method:"PATCH",params:e,data:t})}getRun(e){return is({id:e}),this._request({path:["templates","run",e]})}run(e,t={},r={},n){is({id:e});const o={responseType:"json",...n};return this._request({method:"POST",path:["templates",e,"run"],params:r,data:t,...o})}debug(e,t={},r={nodeToDebug:""},n){is({name:e});const o={responseType:"json",...n};return this._request({method:"POST",path:["templates",e,"debug"],params:r,data:t,...o})}}class lu extends ls{list(){return this._request({path:"/settings"})}set(e,t){return this._request({method:"POST",path:"/settings",responseType:"json",data:{[e]:t}})}remove(e){return is({key:e}),this._request({method:"DELETE",path:["settings",e]})}}class pu extends ls{getAll(){return this._request({path:["converter"],method:"GET"})}get(e){return is({converterName:e}),this._request({path:["converter",e],method:"GET"})}create(e,t,r){is({converterName:e});const n={type:t,template:r};return this._request({path:["converter",e],method:"PUT",data:n})}update(e,t,r){is({converterName:e});const n={type:t,template:r};return this._request({path:["converter",e],method:"PUT",data:n})}delete(e){return is({converterName:e}),this._request({path:["converter",e],method:"DELETE"})}convert(e,t,r){is({converterName:e});const n=rs();return n.append("payload",Buffer.from(JSON.stringify(t),"utf-8"),{filename:"payload.json",contentType:"application/json"}),this._request({path:["converter",e,"convert"],method:"POST",data:n,params:r})}test(e,t,r){const n={type:e,template:t},o=rs();return o.append("payload",Buffer.from(JSON.stringify(r),"utf-8"),{filename:"payload.json",contentType:"application/json"}),o.append("config",Buffer.from(JSON.stringify(n),"utf-8"),{filename:"config.json",contentType:"application/json"}),this._request({path:["converter","test"],method:"POST",data:o})}}class fu extends ls{list(e,t={}){return this._request({path:"/resourceconstraints",params:e,...t})}get(e){return is({id:e}),this._request({path:["resourceconstraints",e]})}create(e){return this._request({path:"/resourceconstraints",method:"POST",data:e})}update(e,t){return is({id:e}),this._request({path:["resourceconstraints",e],method:"PUT",data:t})}remove(e){return is({id:e}),this._request({path:["resourceconstraints",e],method:"DELETE"})}}class hu extends ls{getTokens(e,t={}){is({provider:e});const{sub:r="",scope:n="personal"}=t;return this._request({method:"GET",path:["tokens",e],params:{sub:r},headers:{"X-Waylay-Auth-Scope":n}})}getAllTokens(e={}){const{sub:t="",scope:r="personal"}=e;return this._request({method:"GET",path:["tokens"],params:{sub:t},headers:{"X-Waylay-Auth-Scope":r}})}provider(e,t={}){is({provider:e});const{sub:r="",scope:n="personal"}=t;return this._request({method:"GET",path:["providers",e],params:{sub:r},headers:{"X-Waylay-Auth-Scope":n}})}providers(e={}){const{sub:t="",scope:r="personal"}=e;return this._request({method:"GET",path:["providers"],params:{sub:t},headers:{"X-Waylay-Auth-Scope":r}})}remove(e,t={}){is({provider:e});const{sub:r="",scope:n="personal"}=t;return this._request({method:"DELETE",path:["tokens",e],params:{sub:r},headers:{"X-Waylay-Auth-Scope":n}})}removeAll(e={}){const{sub:t="",scope:r="personal"}=e;return this._request({method:"DELETE",path:["tokens"],params:{sub:t},headers:{"X-Waylay-Auth-Scope":r}})}authorizeUrl(e,t={}){is({provider:e});const{sub:r="",scope:n="personal",callbackUrl:o=""}=t,i=new URLSearchParams({token:this._client.token,scope:n,sub:r,redirect_uri:o}).toString();return`${this.baseUrl}/authorize/${e}?${i}`}}const du=N("waylay:client");function yu(e){return e?e.replace(/^\/+/,"").replace(/\/+$/,"/"):""}function mu(e){if(!e)return"";const t=e.replace(/^\/+/,"").replace(/\/+$/,"");return""===t?"":t+"/"}class gu extends ls{constructor(e,t){super(e,t),this.bucket=new bu(e,t),this.object=new _u(e,t),this.folder=new wu(e,t),this.content=new vu(e,t),this.subscription=new Eu(e,t)}}class bu extends ls{list(e={}){return this._request({path:"/bucket",params:e})}get(e,t={}){return is({bucket:e}),this._request({path:`/bucket/${e}`,params:t})}}class _u extends ls{list(e,t="",r={}){const n=yu(t);return is({bucket:e}),this._request({path:`/bucket/${e}/${n}`,params:r})}get(e,t,r={}){const n=yu(t);return is({bucket:e}),this._request({path:`/bucket/${e}/${n}`,params:Object.assign({},r,{stat:!0})})}signGet(e,t,r={}){const n=yu(t);return is({bucket:e}),this._request({path:`/bucket/${e}/${n}`,params:Object.assign({},r,{sign:"GET"})})}signPut(e,t,r={content_type:"application/x-www-form-urlencoded"}){const n=yu(t);return is({bucket:e}),this._request({path:`/bucket/${e}/${n}`,params:Object.assign({},r,{sign:"PUT"})})}signPost(e,t="",r={}){const n=yu(t);return is({bucket:e}),this._request({path:`/bucket/${e}/${n}`,params:Object.assign({},r,{sign:"POST"})})}remove(e,t,r={}){const n=yu(t);return is({bucket:e}),this._request({path:`/bucket/${e}/${n}`,params:r,method:"DELETE"})}removeAll(e,t,r={}){const n=yu(t);return is({bucket:e}),this._request({path:`/bucket/${e}/${n}`,params:Object.assign({},r,{recursive:!0}),method:"DELETE"})}move(e,t,r){return is({bucket:e,objectPath:t,moveObjectPath:r}),this._request({path:`/bucket/${e}/${yu(r)}`,params:{source:yu(t),move:!0},method:"PUT"})}copy(e,t,r){return is({bucket:e,objectPath:t,copyObjectPath:r}),this._request({path:`/bucket/${e}/${yu(r)}`,params:{source:yu(t)},method:"PUT"})}}class wu extends ls{list(e,t="",r={}){const n=mu(t);return is({bucket:e}),this._request({path:`/bucket/${e}/${n}`,params:r})}get(e,t,r={}){const n=mu(t);return is({bucket:e}),this._request({path:`/bucket/${e}/${n}`,params:Object.assign({},r,{stat:!0})})}signPost(e,t,r={}){const n=mu(t);return is({bucket:e}),this._request({path:`/bucket/${e}/${n}`,params:Object.assign({},r,{sign:"POST"})})}create(e,t,r={}){const n=mu(t);return is({bucket:e}),this._request({path:`/bucket/${e}/${n}`,params:r,method:"PUT"})}remove(e,t,r={}){const n=mu(t);return is({bucket:e}),this._request({path:`/bucket/${e}/${n}`,params:r,method:"DELETE"})}removeAll(e,t,r={}){const n=mu(t);return is({bucket:e}),this._request({path:`/bucket/${e}/${n}`,params:Object.assign({},r,{recursive:!0}),method:"DELETE"})}}class Eu extends ls{list(e,t={}){return is({bucket:e}),this._request({path:`/subscription/${e}`,params:t})}get(e,t,r={}){return is({bucket:e,id:t}),this._request({path:`/subscription/${e}/${t}`,params:r})}create(e,t,r={}){return is({bucket:e}),this._request({path:`/subscription/${e}`,params:r,data:t,method:"POST"})}replace(e,t,r,n={}){return is({bucket:e,id:t}),this._request({path:`/subscription/${e}/${t}`,params:n,data:r,method:"PUT"})}remove(e,t,r={}){return is({bucket:e,id:t}),this._request({path:`/subscription/${e}/${t}`,params:r,method:"DELETE"})}removeAll(e,t={}){return is({bucket:e}),this._request({path:`/subscription/${e}`,params:t,method:"DELETE"})}}class vu{constructor(e,t){this._options=e,this._client=t}_contentRequest(e){return"undefined"==typeof window&&"object"==typeof process&&(e.headers=Object.assign({},e.headers,{"User-Agent":"waylay-js"})),du("Making request: \n%O",e),this._client.httpClient(e).then((e=>this.wantsFullResponse?e:e.data))}_getResponseData(e){return this.wantsFullResponse?e.data:e}get wantsFullResponse(){return this._client.wantsFullResponse||this._options.wantsFullResponse}get(e,t,r={}){return this._client.storage.object.signGet(e,t,r).then((e=>this.getSigned(this._getResponseData(e)._links.get_object)))}getSigned(e){return this._contentRequest({url:e.href,method:"GET"})}put(e,t,r,n={content_type:"application/octet-stream"}){const{content_length:o,...i}=n;return this._client.storage.object.signPut(e,t,i).then((e=>this.putSigned(this._getResponseData(e)._links.put_object,r,{content_type:n.content_type,content_length:o})))}putSigned(e,t,r={}){const{content_type:n,content_length:o}=r,i={url:e.href,data:t,method:"PUT"};return i.headers={...n&&{"content-type":n},...o&&{"content-length":o},...e.headers??{}},this._contentRequest(i)}post(e,t,r,n={}){const{content_length:o,...i}=n;return this._client.storage.object.signPost(e,t,i).then((e=>this.postSigned(this._getResponseData(e)._links.post_object,r,{content_type:n.content_type,content_length:o})))}postSigned(e,t,r={}){const{content_type:n,content_length:o,path:i}=r,a=Object.assign({},e.form_data);n&&(a["content-type"]=n),i&&(a.key=i);const s=rs();for(const[e,t]of Object.entries(a))s.append(e,t);s.append("file",t,{filename:a.key,contentType:n,knownLength:o});const u={url:e.href,data:s,method:"POST"};return this._contentRequest(u)}move(e,t,r){return this._client.storage.object.move(e,t,r)}copy(e,t,r){return this._client.storage.object.copy(e,t,r)}}class Au extends ls{createRulebase(e,t,r){return is({id:e}),this._request({method:"PUT",path:["rulebase",e],data:{title:t,description:r}})}getRulebase(e){return is({id:e}),this._request({method:"GET",path:["rulebase",e]})}listRulebases(){return this._request({method:"GET",path:"/rulebase"})}deleteRulebase(e){return is({id:e}),this._request({method:"DELETE",path:["rulebase",e]})}createRule(e,t){return is({rulebaseId:e}),this._request({method:"POST",path:["rulebase",e,"rule"],data:t})}getRule(e,t){return is({rulebaseId:e,ruleId:t}),this._request({method:"GET",path:["rulebase",e,"rule",t]})}updateRule(e,t,r){return is({rulebaseId:e,ruleId:t}),this._request({method:"PUT",path:["rulebase",e,"rule",t],data:r})}listRules(e){return is({rulebaseId:e}),this._request({method:"GET",path:["rulebase",e,"rule"]})}deleteRule(e,t){return is({rulebaseId:e,ruleId:t}),this._request({method:"DELETE",path:["rulebase",e,"rule",t]})}createGenerator(e,t){return is({rulebaseId:e}),this._request({method:"POST",path:["rulebase",e,"generator"],data:t})}getGenerator(e,t){return is({rulebaseId:e,ruleId:t}),this._request({method:"GET",path:["rulebase",e,"generator",t]})}listGenerators(e){return is({rulebaseId:e}),this._request({method:"GET",path:["rulebase",e,"generator"]})}updateGenerator(e,t,r){return is({rulebaseId:e,generatorId:t}),this._request({method:"PUT",path:["rulebase",e,"generator",t],data:r})}deleteGenerator(e,t){return is({rulebaseId:e,generatorId:t}),this._request({method:"DELETE",path:["rulebase",e,"generator",t]})}generateTemplate(e,t){return is({rulebaseId:e}),this._request({method:"POST",path:["rulebase",e],data:t})}testRule(e,t,r){return is({rulebaseId:e,ruleId:t}),this._request({method:"POST",path:["rulebase",e,"rule",t,"test"],data:{utterance:r}})}testGenerator(e,t,r){return is({rulebaseId:e,generatorId:t}),this._request({method:"POST",path:["rulebase",e,"generator",t,"test"],data:{canonical:r}})}}class Su extends ls{execute(e,t,r){if(is({queryNameOrDefinition:e}),"string"==typeof e){const n=e;return this._request({path:["data",n],params:Ou(t),...r})}{const n=e;return this._request({method:"POST",path:"/data",data:n,params:Ou(t),...r})}}list(e,t){return this._request({path:"/query",params:e,...t})}get(e,t,r){return is({queryName:e}),this._request({path:["query",e],params:t,...r})}create(e,t,r,n,o){return is({queryDefinition:t,queryName:e}),this._request({method:"POST",path:"/query",data:{name:e,query:t,meta:r},params:n,...o})}update(e,t,r,n,o){return is({queryDefinition:t,queryName:e}),this._request({method:"PUT",path:["query",e],data:{query:t,meta:r},params:n,...o})}remove(e,t,r){return is({queryName:e}),this._request({method:"DELETE",path:["query",e],params:t,...r})}}function Ou(e,t=""){if(null!=e)return Object.entries(e).reduce(((e,[r,n])=>{const o=t?`${t}.${r}`:r;return"object"==typeof n?Object.assign(e,Ou(n,o)):e[o]=n,e}),{})}var Ru,Pu,Tu,Cu,xu,Uu;!function(e){e.Compact="RENDER_MODE_COMPACT_WS",e.Series="RENDER_MODE_SERIES",e.Upload="RENDER_MODE_UPLOAD"}(Ru||(Ru={}));class ju extends ls{get(){return this._request({path:"/users/me"})}listKeys(){return this._request({path:"/users/me/keys"})}createKey(){return this._request({method:"POST",path:"/users/me/keys"})}removeKey(e){return is({id:e}),this._request({method:"DELETE",path:["users","me","keys",e]}).then((()=>{}))}resetPassword(e){return this._request({method:"POST",path:"/users/me/reset-password",data:e}).then((()=>{}))}listFilters(){return this._request({path:"/users/me/filters"})}createFilter(e){return this._request({method:"POST",path:"/users/me/filters",data:e})}updateFilter(e,t){return is({id:e}),this._request({method:"PUT",path:["users","me","filters",e],data:t})}removeFilter(e){return is({id:e}),this._request({method:"DELETE",path:["users","me","filters",e]}).then((()=>{}))}}class qu extends ls{list(e){return this._request({path:"/users",params:e})}get(e){return is({id:e}),this._request({path:["users",e]})}create(e){return this._request({path:"/users",method:"POST",data:e})}update(e,t){return is({id:e}),this._request({path:["users",e],method:"PUT",data:t})}delete(e){return is({id:e}),this._request({path:["users",e],method:"DELETE"})}addRole(e,t,r){return is({role:t}),this._request({path:["roles",t,"user"],method:"POST",data:{userId:e,tenantId:r}})}removeRole(e,t,r){return is({role:t,id:e}),this._request({path:["roles",t,"user",e],method:"DELETE",params:{tenant:r}})}resetPassword(e){return this._request({path:"/password/forgot",method:"POST",data:{userId:e}})}me(){return this._request({path:"/users/me"})}}!function(e){e.enabled="enabled",e.disabled="disabled",e.unverified="unverified"}(Pu||(Pu={}));class ku extends ls{branding(e={}){const{hostname:t}=e;return this._request({path:"/tenants/branding",params:{...t&&{hostname:t}}})}}class Lu extends ls{list(e){return this._request({path:"/roles",params:e})}get(e){return is({id:e}),this._request({path:`/roles/${e}`})}create(e){return this._request({path:"/roles",method:"POST",data:e})}update(e,t){return is({id:e}),this._request({path:`/roles/${e}`,method:"PUT",data:t})}delete(e){return is({id:e}),this._request({path:`/roles/${e}`,method:"DELETE"})}addPermission(e,t){return is({id:e}),this._request({path:`/roles/${e}/permissions`,method:"POST",data:{permissionId:t}})}removePermission(e,t){return is({id:e,permissionId:t}),this._request({path:`/roles/${e}/permissions/${t}`,method:"DELETE"})}addUser(e,t,r){return is({id:e}),this._request({path:`/roles/${e}/user`,method:"POST",data:{userId:t,tenantId:r}})}removeUser(e,t,r){return is({id:e,user:t}),this._request({path:`/roles/${e}/user/${t}`,method:"DELETE",params:{tenant:r}})}}!function(e){e.enabled="enabled",e.disabled="disabled",e.unverified="unverified"}(Tu||(Tu={}));class Iu extends ls{list(){return this._request({path:"/roles/predefined"})}}class Fu extends ls{list(){return this._request({path:"/permissions"})}get(e){return is({id:e}),this._request({path:`/permissions/${e}`})}concepts(){return this._request({path:"/permissions/concepts"})}}!function(e){e.all="all",e.me="me"}(Cu||(Cu={})),function(e){e.create="create",e.read="read",e.update="update",e.delete="delete"}(xu||(xu={}));class Du extends ls{status(e,t){const r=Object.fromEntries([["userId",e],["tenantId",t]].filter((e=>e[1])));return this._request({path:"/auth/2fa/status",params:r})}enableTwoFAEnforcement(e){return is({tenant:e}),this._request({path:["auth","2fa",e,"enforce"],method:"POST",data:{state:!0}})}disableTwoFAEnforcement(e){return is({tenant:e}),this._request({path:["auth","2fa",e,"enforce"],method:"POST",data:{state:!1}})}}class Nu extends ls{constructor(e,t){super(e,t),this.refreshCallback=e.onTokenRefresh}refresh(){const e={method:"post",path:"/tokens",params:{grant_type:"refresh_token"},data:{token:this._client._refreshToken}};return this._request(e).then((e=>(this.refreshCallback&&this.refreshCallback(null,e),e))).catch((e=>{throw this.refreshCallback&&this.refreshCallback(e),e}))}exchange(e,t){const r={method:"post",path:"/tokens",params:{grant_type:"exchange_token"},data:{token:e,tenantId:t}};return this._request(r)}get(e,t){const r={method:"post",path:"/tokens",params:{grant_type:"client_credentials"},data:{clientId:e,clientSecret:t}};return this._request(r)}login(e,t,r,n){const o={method:"POST",path:"/tokens",params:{grant_type:"password"},data:{email:e,password:t,domain:r=null==r?this._client.domain:r}};return n&&(o.data.otp_code=n),this._request(o)}}class Mu extends ls{getStatus(){return this._request({path:"/license"})}}class $u extends Error{constructor(){super("Please configure the api gateway, or the accounts service.")}}class Bu extends ls{login(e,t,r,n){if(this._client.tokens._isConfigured)return this._client.tokens.login(e,t,r,n).then(Wu);throw new $u}me(){if(this._client.users._isConfigured)return this._client.users.me().then(zu);throw new $u}ping(){return this._status()}}function Wu({token:e,expires:t}){return{access_token:e,expires_at:new Date(t).getTime(),token_type:"jwt"}}function zu({id:e,email:t,firstname:r,lastname:n,timezone:o,fullname:i,domain:a,tenant:s,keys:u}){return{id:e,fullname:i,email:t,domain:a,tenant:s,firstname:r,lastname:n,timezone:o,apiKeys:u.map((e=>({apiKey:e.client_id,apiSecret:e.client_secret})))}}class Gu extends ls{ws({domain:e,raise:t}){let r=e;if(!this._client.gateway){if(!r){if(!this._client.domain){if(t)throw new Error("Token/domain not available, please retry.");return}r=`pubsub-${this._client.domain}`}this._options.baseUrl??=`https://${r}`}return r?`wss://${r}`:as(this.baseUrl)}get _baseUrlDomain(){const e=this._client._domainForUrl;if(!e)return;const t=this._options.routePrefix||"";return M(`pubsub-${e}${t}`,{https:!0})}}function Hu({error:e,messageFormat:t=Uu.Verbose}){if(e.config&&e.config.method&&e.config.url&&t===Uu.Verbose){const t=`${e.config.method.toUpperCase()} ${e.config.url}`;e.message=`${e.message} | ${t}`}e.response&&(e.message=t===Uu.Verbose?function(e){const{response:t}=e;let r="[no response body]";if(null!=t?.data){if("object"!=typeof t.data||Array.isArray(t.data))r=t.data.toString();else try{r=JSON.stringify(t.data)}catch(e){r="[cyclic object]"}0===r.length&&(r="[empty response body]"),r=r.substring(0,1024)}return`${e.message} | ${r}`}(e):function(e){const t=e.response?.data;if(null!=t){if("string"==typeof t&&""!==t)return t;if("object"==typeof t&&!Array.isArray(t)&&null!=t.message)return t.message}return e.message}(e))}!function(e){e.Normal="normal",e.Verbose="verbose"}(Uu||(Uu={}));const Yu=N("waylay:client"),Ku=[{name:"production",host:"api.waylay.io"},{name:"staging",host:"api-aws-dev.waylay.io"}],Vu={settingsBaseUrlKey:"waylay_resources",routePrefix:"/api",gatewayRoutePrefix:"/resources/v1"},Ju={settingsBaseUrlKey:"waylay_api",routePrefix:"/api",gatewayRoutePrefix:"/rules/v1",api_legacy:!0},Qu={...Ju,registry:{routePrefix:"/plugs/v0"}},Xu={arrayFormat:"repeat",skipNulls:!1,strictNullHandling:!1},Zu={api:{...Ju,statusRoute:"/",gatewayStatusRoute:"/../../"},settings:{...Ju,gatewayRoutePrefix:"/configs/v1"},actuators:Qu,sensors:Qu,transformers:Qu,tasks:Ju,templates:Ju,resources:Vu,types:Vu,constraints:Vu,data:{defaultBaseUrl:"https://data.waylay.io",settingsBaseUrlKey:"waylay_data",routePrefix:"",gatewayRoutePrefix:"/data/v1"},alarms:{defaultBaseUrl:"https://alarms.waylay.io",settingsBaseUrlKey:"waylay_alarms",routePrefix:"/alarms/v1"},vault:{defaultBaseUrl:"https://vault.waylay.io",settingsBaseUrlKey:"waylay_vault",routePrefix:"/vault",statusRoute:"/..",gatewayRoutePrefix:"/configs/v1/secrets",gatewayStatusRoute:"/.."},webscripts:{defaultBaseUrl:"https://webscripts.waylay.io",settingsBaseUrlKey:"waylay_webscripts",routePrefix:"/api/v1",gatewayRoutePrefix:"/functions/v1",registry:{routePrefix:"/api/v1",gatewayRoutePrefix:"/plugs/v1"}},analytics:{defaultBaseUrl:"https://ts-analytics.waylay.io",settingsBaseUrlKey:"waylay_analytics"},accounts:{defaultBaseUrl:"https://accounts-api.waylay.io",settingsBaseUrlKey:"waylay_accounts",gatewayRoutePrefix:"/accounts/v1"},byoml:{defaultBaseUrl:"https://byoml.waylay.io",settingsBaseUrlKey:"waylay_byoml",gatewayRoutePrefix:"/ml/v1"},stats:{defaultBaseUrl:"https://stats.waylay.io",settingsBaseUrlKey:"waylay_stats",gatewayRoutePrefix:"/stats/v1"},converter:{defaultBaseUrl:"https://converter.waylay.io",settingsBaseUrlKey:"waylay_converter",gatewayRoutePrefix:"/converters/v1"},hoard:{defaultBaseUrl:"https://auth.waylay.io",settingsBaseUrlKey:"waylay_hoard",routePrefix:"/tokens/v1"},storage:{defaultBaseUrl:"https://storage.waylay.io",settingsBaseUrlKey:"waylay_storage",routePrefix:"/storage/v1"},nlp:{defaultBaseUrl:"https://nlp.waylay.io",settingsBaseUrlKey:"waylay_nlp",routePrefix:"/nlp/v0"},queries:{defaultBaseUrl:"https://api.waylay.io",routePrefix:"/queries/v1",settingsBaseUrlKey:"waylay_query"},registry:{defaultBaseUrl:"https://plugs.waylay.io",settingsBaseUrlKey:"waylay_registry",routePrefix:"/registry/v2"},etl:{defaultBaseUrl:"https://etl.waylay.io",settingsBaseUrlKey:"waylay_etl",routePrefix:"/api",gatewayRoutePrefix:"/etl/v1"},billing:{defaultBaseUrl:"https://billing.waylay.io",settingsBaseUrlKey:"waylay_billing",routePrefix:"/api/v1",gatewayRoutePrefix:"/billing/v1"},pubsub:{settingsBaseUrlKey:"waylay_pubsub",routePrefix:"",gatewayRoutePrefix:"/channels/v1",api_legacy:!0},enforceGateway:!1,enforceConfigured:!1,gateway:void 0};class ec{constructor(e={}){this.refreshSubscribers=[];const t={accounts:e.auth,actuators:e.api,sensors:e.api,transformers:e.api,settings:e.settings||e.api,tasks:e.api,templates:e.api,resources:null!=e.resources||e.api,types:null!=e.types||e.resources||e.api,constraints:null!=e.constraints||e.resources||e.api},r=pn({},e,t,Zu);this.enforceConfigured=r.enforceConfigured,this.enforceGateway=r.enforceGateway,this.gateway=r.gateway,this.setToken(r.token),this.setRefreshToken(r.refreshToken),this.wantsFullResponse=r.fullResponse||!1,this.auth=r.clientID&&r.secret?{username:r.clientID,password:r.secret}:void 0,this.setDomain(r.domain),r.globalSettings&&this.withSettings(r.globalSettings),this.httpClient=zr.create(r.httpClient);this.httpClient.interceptors.response.use((e=>e),(async e=>{const t=e.config;if(401===e.response?.status&&null!=t&&!t._retry){if(this._isRefreshing)return await new Promise(((r,n)=>{this.subscribeTokenRefresh((o=>{null!=o?(t.headers.Authorization=`Bearer ${o}`,r(this.httpClient(t))):n(e)}))}));t._retry=!0,this._isRefreshing=!0;try{const{token:e,refresh_token:r}=await this.tokens.refresh();return this.setToken(e),this.notifyRefreshSubscribers(e),this.setRefreshToken(r),t.headers.Authorization=`Bearer ${e}`,await this.httpClient(t)}catch(e){console.error("Failed to refresh token",e),this.notifyRefreshSubscribers()}finally{this._isRefreshing=!1}}throw e})),this.httpClient.interceptors.response.use((e=>e),(e=>{throw Hu({error:e,messageFormat:r.errorMessageFormat}),e})),this.actuators=new au(pn(r.actuators,{registry:r.registry}),this),this.sensors=new su(pn(r.sensors,{registry:r.registry}),this),this.transformers=new uu(pn(r.transformers,{registry:r.registry}),this),this.types=new Ms(r.types,this),this.tasks=new Ds(r.tasks,this),this.data=new Ss(r.data,this),this.resources=new Ls(r.resources,this),this.alarms=new ms(r.alarms,this),this.vault=new $s(r.vault,this),this.webscripts=new Qs(pn(r.webscripts,{registry:r.registry}),this),this.analytics=new ou(r.analytics,this),this.templates=new cu(r.templates,this),this.organisationSettings=new lu(r.settings,this),this.account=new ju(r.accounts,this),this.users=new qu(r.accounts,this),this.tenants=new ku(r.accounts,this),this.roles=new Lu(r.accounts,this),this.predefinedRoles=new Iu(r.accounts,this),this.permissions=new Fu(r.accounts,this),this.twoFA=new Du(r.accounts,this),this.tokens=new Nu(r.accounts,this),this.license=new Mu(r.accounts,this),this.converter=new pu(r.converter,this),this.byoml=new As(r.byoml,this),this.stats=new Is(r.stats,this),this.constraints=new fu(r.constraints,this),this.hoard=new hu(r.hoard,this),this.storage=new gu(r.storage,this),this.nlp=new Au(r.nlp,this),this.queries=new Su(r.queries,this),this.registry=new Ws(r.registry,this),this.etl=new ls(r.etl,this),this.billing=new ls(r.billing,this),this.pubsub=new Gu(r.pubsub,this),this._legacyGateway=new Bu(r.api,this),this.analytics=new ou(r.analytics,this),this.stats=new Is(r.stats,this),this.httpClient.interceptors.request.use((e=>n(e)?this.tokens.refresh().then((({token:t,refresh_token:r})=>(this.setToken(t),this.setRefreshToken(r),e))):e),(e=>{console.error("Failed to refresh token",e)}));const n=e=>{const{params:t}=e,r=t&&"refresh_token"===t.grant_type;if(r)return!1;const n=this._token&&this._refreshToken;if(!n)return!1;const o=Za(this._token)&&!Za(this._refreshToken);return!r&&n&&o}}subscribeTokenRefresh(e){this.refreshSubscribers.push(e)}notifyRefreshSubscribers(e){this.refreshSubscribers.forEach((t=>{t(e)})),this.refreshSubscribers=[]}get token(){return this._token}set token(e){this.setToken(e)}get domain(){return this._tokenDomain?this._tokenDomain:this._domain?this._domain:this._settings&&this._settings.waylay_domain?this._settings.waylay_domain:""}set domain(e){this.setDomain(e)}setToken(e){this._token=e,this._tokenDomain=null;try{this._tokenDomain=bn(this._token).domain}catch(e){}return this}setRefreshToken(e){return this._refreshToken=e,this}setDomain(e){return this._domain=e,this}login(e,t,r,n){return is({email:e,password:t}),this._legacyGateway.login(e,t,r,n).then((e=>(this.setToken(e.access_token),e)))}authenticate(e,t){if(is({apiKey:e,apiSecret:t}),!this.tokens._isConfigured)throw new $u;return this.auth=void 0,this.tokens.get(e,t).then((({token:e})=>(this.setToken(e),this)))}ping(){return this._legacyGateway.ping()}me(){return this._legacyGateway.me()}loadSettings(){return this.settings().then((e=>this.withSettings(e)))}withSettings(e){return this._settings=e,this}settings(){return this.organisationSettings.list()}get baseUrl(){return M(this._settings?.waylay_api??this._domainForUrl,{https:!0})}get gateway(){let e=this._gateway||this._settings&&this._settings.waylay_gateway||void 0;return e||!this.enforceGateway||this.enforceConfigured||(e="production"),this.gatewayConfig=Ku.find((t=>t.name===e)),null!=this.gatewayConfig?`https://${this.gatewayConfig.host}`:e}set gateway(e){this._gateway=e}get _domainForUrl(){if(this.enforceGateway)throw new Error("Usage of the legacy domain api not allowed when gateway is enforced (`enforceGateway=true`).");this.gateway&&Yu("WARNING: requested baseUrl while a gateway is configured.");const e=this._settings&&this._settings.waylay_domain,t=this._domain??e??this._tokenDomain??"";if(""===t&&(Yu("WARNING: requested baseUrl while none of the sources are configured."),this.enforceConfigured))throw new Error("No legacy domain api configured.");return t}_request(e={}){let t=null;e.url||(t=es(this.baseUrl,e.path));const r=Object.assign({},Xu,e.paramsSerializerOptions);return e=Object.assign({method:"GET",url:t,paramsSerializer:e=>Ca.stringify(e,r)},e),e.url&&=ns(e.url)?e.url:encodeURI(e.url),e.url&&e.url.startsWith("http")&&"https://"!==e.url&&(e.url=new URL(e.url).toString()),"undefined"==typeof window&&"object"==typeof process&&(e.headers=Object.assign({},e.headers,{"User-Agent":"waylay-js"})),null!=this.auth&&(e.auth=this.auth),this.token&&(e.headers=Object.assign({},e.headers,{Authorization:`Bearer ${this.token}`})),Yu("Making request: \n%O",e),this.httpClient(e).then((t=>this.wantsFullResponse||e.wantsFullResponse?t:t.data))}}"undefined"!=typeof module&&(module.exports=ec),ec.supportsGateway=!0;var tc,rc,nc={},oc={},ic={},ac={},sc={};function uc(){if(tc)return sc;tc=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.TokenError=void 0;let e=class extends Error{constructor(e,t){if(super(e),this.message=e,this.token=t,!t||!t.errors)throw this;t.errors.push(this)}inspect(){return"SyntaxError: "+this.message}};return sc.TokenError=e,sc}function cc(){if(rc)return ac;rc=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.Parser=ac.findRuleByName=ac.parseRuleName=ac.escapeRegExp=ac.readToken=void 0;const e=/^[A-Z0-9_]+$/,t=/(\?|\+|\*)$/,r=/^(@|&|!)/,n="WS",o=uc();function i(e,t){let r=t.exec(e);return r&&0==r.index?0==r[0].length&&t.source.length>0?null:{type:null,text:r[0],rest:e.substr(r[0].length),start:0,end:r[0].length-1,fullText:r[0],errors:[],children:[],parent:null}:null}function a(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function s(e){e.rest="",e.children&&e.children.forEach((e=>s(e)))}function u(e,t){e.start+=t,e.end+=t,e.children&&e.children.forEach((t=>u(t,e.start)))}function c(e,t){t.errors&&t.errors.length&&t.errors.forEach((t=>e.push(t))),t.children&&t.children.forEach((t=>c(e,t)))}function l(e){let n=t.exec(e),o=r.exec(e),i=n&&n[0]||"",a=o&&o[0]||"",s={raw:e,name:e.replace(t,"").replace(r,""),isOptional:"?"==i||"*"==i,allowRepetition:"+"==i||"*"==i,atLeastOne:"+"==i,lookupPositive:"&"==a,lookupNegative:"!"==a,pinned:"@"==a,lookup:!1,isLiteral:!1};return s.isLiteral="'"==s.name[0]||'"'==s.name[0],s.lookup=s.lookupNegative||s.lookupPositive,s}function p(e,t){let r=l(e);return t.cachedRules[r.name]||null}function f(e,t){if(e.children){let r=e.children.filter((e=>e.type&&t.test(e.type)));for(let t=0;t<r.length;t++){let n=e.children.indexOf(r[t]);-1!=n&&e.children.splice(n,1)}e.children.forEach((e=>f(e,t)))}}ac.readToken=i,ac.escapeRegExp=a,ac.parseRuleName=l,ac.findRuleByName=p;const h=["EOF"];let d=class{constructor(e,t){this.grammarRules=e,this.options=t,this.cachedRules={},this.debug=!!t&&!0===t.debug;let r=[],o=[];if(e.forEach((e=>{let t=l(e.name);if(t.name in this.cachedRules)r.push("Duplicated rule "+t.name);else{if(this.cachedRules[t.name]=e,e.bnf&&e.bnf.length)e.bnf.forEach((t=>{if("string"==typeof t[0]){if(l(t[0]).name==e.name){let t="Left recursion is not allowed, rule: "+e.name;-1==r.indexOf(t)&&r.push(t)}}t.forEach((e=>{if("string"==typeof e){let t=l(e);t.isLiteral||-1!=o.indexOf(t.name)||-1!=h.indexOf(t.name)||o.push(t.name)}}))}));else{let t="Missing rule content, rule: "+e.name;-1==r.indexOf(t)&&r.push(t)}n==e.name&&(e.implicitWs=!1),e.implicitWs&&-1==o.indexOf(n)&&o.push(n),e.recover&&-1==o.indexOf(e.recover)&&o.push(e.recover)}})),o.forEach((e=>{e in this.cachedRules||r.push("Missing rule "+e)})),r.length)throw new Error(r.join("\n"))}getAST(t,r){r||(r=this.grammarRules.filter((e=>!e.fragment&&0!=e.name.indexOf("%")))[0].name);let n=this.parse(t,r);if(n){c(n.errors,n),u(n,0),f(n,/^%/),this.options&&this.options.keepUpperRules||f(n,e);let t=n.rest;t&&new o.TokenError("Unexpected end of input: \n"+t,n),s(n),n.rest=t}return n}emitSource(){return"CANNOT EMIT SOURCE FROM BASE Parser"}parse(t,r,s=0){let u,c=null,f=l(r),h=this.debug&&/*!isLiteral &*/!e.test(f.name);h&&console.log(new Array(s).join("│  ")+"Trying to get "+r+" from "+JSON.stringify(t.split("\n")[0]));let d=f.name,y=p(f.name,this);if("EOF"==f.name){if(t.length)return null;if(0==t.length)return{type:"EOF",text:"",rest:"",start:0,end:0,fullText:"",errors:[],children:[],parent:null}}try{if(!y&&f.isLiteral){let e=f.name.trim();if(e.startsWith('"')?e=JSON.parse(e):e.startsWith("'")&&(e=e.replace(/^'(.+)'$/,"$1").replace(/\\'/g,"'")),""===e)return{type:"%%EMPTY%%",text:"",rest:t,start:0,end:0,fullText:"",errors:[],children:[],parent:null};u=new RegExp(a(e)),d=null}}catch(e){return e instanceof ReferenceError&&console.error(e),null}if(u){let e=i(t,u);if(e)return e.type=d,e}else{let e=y.bnf;e instanceof Array&&e.forEach((e=>{if(c)return;let r=null,a={type:f.name,text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:t};y.fragment&&(a.fragment=!0);let u=t,p=0,d=e.length>0,m=!1;for(let t=0;t<e.length;t++)if("string"==typeof e[t]){let i,f=l(e[t]);d=d&&f.isOptional;let g=!1;do{if(i=null,y.implicitWs&&(i=this.parse(u,f.name,s+1),!i)){let e;do{if(e=this.parse(u,n,s+1),!e)break;a.text=a.text+e.text,a.end=a.text.length,e.parent=a,a.children.push(e),u=u.substr(e.text.length),p+=e.text.length}while(e&&e.text.length)}if(i=i||this.parse(u,f.name,s+1),f.lookupNegative){if(i)return;break}if(f.lookupPositive&&!i)return;if(!i){if(f.isOptional)break;if(f.atLeastOne&&g)break}if(i&&y.pinned==t+1&&(r=i,h&&console.log(new Array(s+1).join("│  ")+"└─ "+i.type+" PINNED")),i||(i=this.parseRecovery(y,u,s+1)),!i){if(!r)return;c=a,i={type:"SyntaxError",text:u,children:[],end:u.length,errors:[],fullText:"",parent:null,start:0,rest:""},u.length?new o.TokenError(`Unexpected end of input. Expecting ${f.name} Got: ${u}`,i):new o.TokenError(`Unexpected end of input. Missing ${f.name}`,i),h&&console.log(new Array(s+1).join("│  ")+"└─ "+i.type+" "+JSON.stringify(i.text))}if(g=!0,m=!0,"%%EMPTY%%"==i.type)break;i.start+=p,i.end+=p,!f.lookupPositive&&i.type&&(i.fragment?i.children&&i.children.forEach((e=>{e.start+=p,e.end+=p,e.parent=a,a.children.push(e)})):(i.parent=a,a.children.push(i))),f.lookup&&(i.lookup=!0),h&&console.log(new Array(s+1).join("│  ")+"└─ "+i.type+" "+JSON.stringify(i.text)),f.lookup||i.lookup||(a.text=a.text+i.text,a.end=a.text.length,u=u.substr(i.text.length),p+=i.text.length),a.rest=u}while(i&&f.allowRepetition&&u.length&&!i.lookup)}else{let r=i(u,e[t]);if(!r)return;h&&console.log(new Array(s+1).join("│  ")+"└> "+JSON.stringify(r.text)+e[t].source),m=!0,r.start+=p,r.end+=p,a.text=a.text+r.text,a.end=a.text.length,u=u.substr(r.text.length),p+=r.text.length,a.rest=u}m&&(c=a,h&&console.log(new Array(s).join("│  ")+"├<─┴< PUSHING "+c.type+" "+JSON.stringify(c.text)))})),c&&y.simplifyWhenOneChildren&&1==c.children.length&&(c=c.children[0])}return c||h&&console.log(r+" NOT RESOLVED FROM "+t),c}parseRecovery(e,t,r){if(e.recover&&t.length){let n=this.debug;n&&console.log(new Array(r+1).join("│  ")+"Trying to recover until token "+e.recover+" from "+JSON.stringify(t.split("\n")[0]+t.split("\n")[1]));let i,a={type:"SyntaxError",text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:""};do{if(i=this.parse(t,e.recover,r+1),i){new o.TokenError('Unexpected input: "'+a.text+`" Expecting: ${e.name}`,a);break}a.text=a.text+t[0],a.end=a.text.length,t=t.substr(1)}while(!i&&t.length>0);if(a.text.length>0&&i)return n&&console.log(new Array(r+1).join("│  ")+"Recovered text: "+JSON.stringify(a.text)),a}return null}};return ac.Parser=d,ac.default=d,ac}var lc,pc,fc={},hc={},dc={};function yc(){if(pc)return hc;pc=1,Object.defineProperty(hc,"__esModule",{value:!0});const e=(lc||(lc=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.findChildrenByType=void 0,dc.findChildrenByType=function(e,t){return e.children?e.children.filter((e=>e.type==t)):[]}),dc),t=cc();var r;return function(r){function n(t){let r=e.findChildrenByType(t,"term").map((t=>e.findChildrenByType(t,"literal").concat(e.findChildrenByType(t,"rule-name"))[0].text));return e.findChildrenByType(t,"list").forEach((e=>{r=r.concat(n(e))})),r}function o(t,o=r.defaultParser){let i=o.getAST(t);if(!i)throw new Error("Could not parse "+t);if(i.errors&&i.errors.length)throw i.errors[0];let a=e.findChildrenByType(i,"rule").map((t=>{let r=e.findChildrenByType(t,"rule-name")[0].text,o=e.findChildrenByType(t,"firstExpression").concat(e.findChildrenByType(t,"otherExpression")),i=[];return o.forEach((e=>{i.push(n(e))})),{name:r,bnf:i}}));return a.some((e=>"EOL"==e.name))||a.push({name:"EOL",bnf:[['"\\r\\n"','"\\r"','"\\n"']]}),a}r.RULES=[{name:"syntax",bnf:[["RULE_EOL*","rule+"]]},{name:"rule",bnf:[['" "*','"<"',"rule-name",'">"','" "*','"::="',"firstExpression","otherExpression*",'" "*',"RULE_EOL+",'" "*']]},{name:"firstExpression",bnf:[['" "*',"list"]]},{name:"otherExpression",bnf:[['" "*','"|"','" "*',"list"]]},{name:"RULE_EOL",bnf:[['"\\r"'],['"\\n"']]},{name:"list",bnf:[["term",'" "*',"list"],["term"]]},{name:"term",bnf:[["literal"],['"<"',"rule-name",'">"']]},{name:"literal",bnf:[["'\"'","RULE_CHARACTER1*","'\"'"],['"\'"',"RULE_CHARACTER2*",'"\'"']]},{name:"RULE_CHARACTER",bnf:[['" "'],["RULE_LETTER"],["RULE_DIGIT"],["RULE_SYMBOL"]]},{name:"RULE_LETTER",bnf:[['"A"'],['"B"'],['"C"'],['"D"'],['"E"'],['"F"'],['"G"'],['"H"'],['"I"'],['"J"'],['"K"'],['"L"'],['"M"'],['"N"'],['"O"'],['"P"'],['"Q"'],['"R"'],['"S"'],['"T"'],['"U"'],['"V"'],['"W"'],['"X"'],['"Y"'],['"Z"'],['"a"'],['"b"'],['"c"'],['"d"'],['"e"'],['"f"'],['"g"'],['"h"'],['"i"'],['"j"'],['"k"'],['"l"'],['"m"'],['"n"'],['"o"'],['"p"'],['"q"'],['"r"'],['"s"'],['"t"'],['"u"'],['"v"'],['"w"'],['"x"'],['"y"'],['"z"']]},{name:"RULE_DIGIT",bnf:[['"0"'],['"1"'],['"2"'],['"3"'],['"4"'],['"5"'],['"6"'],['"7"'],['"8"'],['"9"']]},{name:"RULE_SYMBOL",bnf:[['"-"'],['"_"'],['"!"'],['"#"'],['"$"'],['"%"'],['"&"'],['"("'],['")"'],['"*"'],['"+"'],['","'],['"-"'],['"."'],['"/"'],['":"'],['";"'],['"<"'],['"="'],['">"'],['"?"'],['"@"'],['"["'],['"\\"'],['"]"'],['"^"'],['"_"'],['"`"'],['"{"'],['"|"'],['"}"'],['"~"']]},{name:"RULE_CHARACTER1",bnf:[["RULE_CHARACTER"],['"\'"']]},{name:"RULE_CHARACTER2",bnf:[["RULE_CHARACTER"],["'\"'"]]},{name:"rule-name",bnf:[["RULE_LETTER","RULE_CHAR*"]]},{name:"RULE_CHAR",bnf:[["RULE_LETTER"],["RULE_DIGIT"],['"_"'],['"-"']]}],r.defaultParser=new t.Parser(r.RULES,{debug:!1}),r.getRules=o,r.Transform=function(e,t=r.defaultParser){return o(e.join(""),t)};class i extends t.Parser{constructor(e,n){super(o(e,n&&!0===n.debugRulesParser?new t.Parser(r.RULES,{debug:!0}):r.defaultParser),n),this.source=e}emitSource(){return this.source}}r.Parser=i}(r||(r={})),hc.default=r,hc}var mc,gc={};function bc(){if(mc)return gc;mc=1,Object.defineProperty(gc,"__esModule",{value:!0});const e=cc();var t;return function(t){t.RULES=[{name:"Grammar",bnf:[["RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_WHITESPACE*",'"|"',"RULE_WHITESPACE*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","Item"],["Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"Item",bnf:[["RULE_WHITESPACE*","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"DecorationName",bnf:[['"ebnf://"',/[^\x5D#]+/]]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*",'")"']]},{name:"StringLiteral",bnf:[["'\"'",/[^"]*/,"'\"'"],['"\'"',/[^']*/,'"\'"']],pinned:1},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[['!"*/"',/[^*]/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],t.defaultParser=new e.Parser(t.RULES,{debug:!1});const r=/^(!|&)/,n=/(\?|\+|\*)$/,o=/^%/;function i(t,i){if("string"==typeof t){if(r.test(t))return"";if(o.test(t)){let r=n.exec(t),o=r?r[0]+" ":"",s=function(t,r){let n=e.findRuleByName(t,r);return n&&1==n.bnf.length&&1==n.bnf[0].length&&(n.bnf[0][0]instanceof RegExp||'"'==n.bnf[0][0][0]||"'"==n.bnf[0][0][0])}(t,i);return s?a(t,i)+o:"("+a(t,i)+")"+o}return t}return t.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function a(t,r){let n=e.findRuleByName(t,r);return n?n.bnf.map((e=>function(e,t){return e.map((e=>i(e,t))).join(" ")}(e,r))).join(" | "):"RULE_NOT_FOUND {"+t+"}"}function s(e){let t=[];return e.grammarRules.forEach((r=>{if(!/^%/.test(r.name)){let n=r.recover?" /* { recoverUntil="+r.recover+" } */":"";t.push(r.name+" ::= "+a(r.name,e)+n)}})),t.join("\n")}t.emit=s;let u=0;function c(e){return new RegExp(e.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function l(e,t,r){let n=null,o=[];return t.children.forEach(((i,a)=>{"Minus"==i.type&&function(e,t){throw console.log("reberia restar "+t+" a "+e),new Error("Difference not supported yet")}(n,i);let s=t.children[a+1];s=s&&"PrimaryDecoration"==s.type&&s.text||"";switch(i.type){case"SubItem":let t="%"+(r+u++);p(e,i,t),o.push(""+t+s);break;case"NCName":case"StringLiteral":o.push(""+i.text+s);break;case"CharCode":case"CharClass":if(s){let t={name:"%"+(r+u++),bnf:[[c(i.text)]]};e.push(t),o.push(""+t.name+s)}else o.push(c(i.text));break;case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+i.type+" -> "+JSON.stringify(i.text))}n=i})),o}function p(e,t,r){let n=t.children.filter((e=>"SequenceOrDifference"==e.type)).map((t=>l(e,t,r))),o={name:r,bnf:n},i=null;n.forEach((e=>{i=i||e.recover,delete e.recover})),0==r.indexOf("%")&&(o.fragment=!0),i&&(o.recover=i),e.push(o)}function f(e,r=t.defaultParser){let n=r.getAST(e);if(!n)throw new Error("Could not parse "+e);if(n.errors&&n.errors.length)throw n.errors[0];let o=[];return n.children.filter((e=>"Production"==e.type)).map((e=>{let t=e.children.filter((e=>"NCName"==e.type))[0].text;p(o,e,t)})),o}t.getRules=f,t.Transform=function(e,r=t.defaultParser){return f(e.join(""),r)};class h extends e.Parser{constructor(r,n){super(f(r,n&&!0===n.debugRulesParser?new e.Parser(t.RULES,{debug:!0}):t.defaultParser),n)}emitSource(){return s(this)}}t.Parser=h}(t||(t={})),gc.default=t,gc}var _c,wc,Ec,vc={};function Ac(){if(_c)return vc;_c=1,Object.defineProperty(vc,"__esModule",{value:!0});const e=uc(),t=cc();var r;return function(r){r.RULES=[{name:"Grammar",bnf:[["RULE_S*","Attributes?","RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","%Choice","RULE_WHITESPACE*","Attributes?","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Attributes",bnf:[['"{"',"Attribute","%Attributes*","RULE_S*",'"}"']]},{name:"%Attributes",bnf:[["RULE_S*",'","',"Attribute"]],fragment:!0},{name:"Attribute",bnf:[["RULE_S*","NCName","RULE_WHITESPACE*",'"="',"RULE_WHITESPACE*","AttributeValue"]]},{name:"AttributeValue",bnf:[["NCName"],[/[1-9][0-9]*/]]},{name:"%Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_S*",'"|"',"RULE_S*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["%Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","%Item"],["%Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"%Item",bnf:[["RULE_WHITESPACE*","PrimaryPreDecoration?","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"PrimaryPreDecoration",bnf:[['"&"'],['"!"'],['"~"']]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_S*","%Choice","RULE_S*",'")"']]},{name:"StringLiteral",bnf:[["'\"'",/[^"]*/,"'\"'"],['"\'"',/[^']*/,'"\'"']]},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[[/[^*]/],['"*"+',/[^/]*/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],r.defaultParser=new t.Parser(r.RULES,{debug:!1});const n=/^(!|&)/,o=/(\?|\+|\*)$/,i=/^%/;function a(e,r){if("string"==typeof e){let a=o.exec(e),u=n.exec(e),c=u?u[0]:"",l=a?a[0]+" ":"";if(i.test(e)){let n=function(e,r){let n=t.findRuleByName(e,r);return n&&1==n.bnf.length&&1==n.bnf[0].length&&(n.bnf[0][0]instanceof RegExp||'"'==n.bnf[0][0][0]||"'"==n.bnf[0][0][0])}(e,r);return n?c+s(e,r)+l:c+"("+s(e,r)+")"+l}return e.replace(n,c)}return e.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function s(e,r){let n=t.findRuleByName(e,r);return n?n.bnf.map((e=>function(e,t){return e.map((e=>a(e,t))).join(" ")}(e,r))).join(" | "):"RULE_NOT_FOUND {"+e+"}"}function u(e){let t=[];return e.grammarRules.forEach((r=>{if(!/^%/.test(r.name)){let n=r.recover?" { recoverUntil="+r.recover+" }":"";t.push(r.name+" ::= "+s(r.name,e)+n)}})),t.join("\n")}r.emit=u;let c=0;function l(e){return new RegExp(e.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function p(e,r,n,o){let i=null,a=[];return r.children.forEach(((s,u)=>{"Minus"==s.type&&function(e,t){throw console.log("reberia restar "+t+" a "+e),new Error("Difference not supported yet")}(i,s);let p=r.children[u+1];p=p&&"PrimaryDecoration"==p.type&&p.text||"";let h="";i&&"PrimaryPreDecoration"==i.type&&(h=i.text);let d="~"==h?1:void 0;switch(d&&(h=""),s.type){case"SubItem":let r="%"+(n+c++);f(e,s,r,o),a.push(h+r+p);break;case"NCName":a.push(h+s.text+p);break;case"StringLiteral":if(p||h||!/^['"/()a-zA-Z0-9&_.:=,+*\-\^\\]+$/.test(s.text))a.push(h+s.text+p);else for(const e of s.text.slice(1,-1))o&&"true"==o.ignoreCase&&/[a-zA-Z]/.test(e)?a.push(new RegExp("["+e.toUpperCase()+e.toLowerCase()+"]")):a.push(new RegExp(t.escapeRegExp(e)));break;case"CharCode":case"CharClass":if(p||h){let t={name:"%"+(n+c++),bnf:[[l(s.text)]],pinned:d};e.push(t),a.push(h+t.name+p)}else a.push(l(s.text));break;case"PrimaryPreDecoration":case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+s.type+" -> "+JSON.stringify(s.text))}i=s})),a}function f(t,r,n,o=void 0){let i=r.children.filter((e=>"Attributes"==e.type))[0],a={};i&&i.children.forEach((t=>{let r=t.children.filter((e=>"NCName"==e.type))[0].text;if(r in a)throw new e.TokenError("Duplicated attribute "+r,t);a[r]=t.children.filter((e=>"AttributeValue"==e.type))[0].text}));let s=r.children.filter((e=>"SequenceOrDifference"==e.type)).map((e=>p(t,e,n,o||a))),u={name:n,bnf:s};if(0==n.indexOf("%")&&(u.fragment=!0),a.recoverUntil&&(u.recover=a.recoverUntil,u.bnf.length>1))throw new e.TokenError("only one-option productions are suitable for error recovering",r);if("pin"in a){let t=parseInt(a.pin);if(isNaN(t)||(u.pinned=t),u.bnf.length>1)throw new e.TokenError("only one-option productions are suitable for pinning",r)}u.implicitWs="ws"in a?"explicit"!=a.ws:null,u.fragment=u.fragment||"true"==a.fragment,u.simplifyWhenOneChildren="true"==a.simplifyWhenOneChildren,t.push(u)}function h(t,n=r.defaultParser){let o=n.getAST(t);if(!o)throw new Error("Could not parse "+t);if(o.errors&&o.errors.length)throw o.errors[0];let i=null,a=o.children.filter((e=>"Attributes"==e.type))[0],s={};a&&a.children.forEach((t=>{let r=t.children.filter((e=>"NCName"==e.type))[0].text;if(r in s)throw new e.TokenError("Duplicated attribute "+r,t);s[r]=t.children.filter((e=>"AttributeValue"==e.type))[0].text})),i="implicit"==s.ws;let u=[];return o.children.filter((e=>"Production"==e.type)).map((e=>{let t=e.children.filter((e=>"NCName"==e.type))[0].text;f(u,e,t)})),u.forEach((e=>{null===e.implicitWs&&(e.implicitWs=i)})),u}r.getRules=h,r.Transform=function(e,t=r.defaultParser){return h(e.join(""),t)};class d extends t.Parser{constructor(e,n){super(h(e,n&&!0===n.debugRulesParser?new t.Parser(r.RULES,{debug:!0}):r.defaultParser),n)}emitSource(){return u(this)}}r.Parser=d}(r||(r={})),vc.default=r,vc}function Sc(){return Ec||(Ec=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=cc();Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return t.Parser}});var r=uc();Object.defineProperty(e,"TokenError",{enumerable:!0,get:function(){return r.TokenError}}),e.Grammars=(wc||(wc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=yc();Object.defineProperty(e,"BNF",{enumerable:!0,get:function(){return t.default}});var r=bc();Object.defineProperty(e,"W3C",{enumerable:!0,get:function(){return r.default}});var n=Ac();Object.defineProperty(e,"Custom",{enumerable:!0,get:function(){return n.default}})}(fc)),fc)}(ic)),ic}var Oc,Rc={};function Pc(){return Oc||(Oc=1,function(e){function t(t={}){const r=Object.assign({...e.DEFAULT_GRAMMAR_OPTIONS},t);function n(e,t){const r=e.map((e=>`"${e}"`)).join(" | ");return t?`${r} /* in general: SAFENAME */`:`SAFENAME /* validated in parser: ${r} */`}const o=e.RULE_KEYS;return[`\n  ${o.Expression}      ::= WS* ( ${o.AndExpression} | ${o.OrExpression} | ${o.ListExpression} | ${o.Term} ) WS*\n  ${o.AndExpression}   ::= ( ${o.Term} WS* AND_INFIX  WS* )+ ${o.Term}\n  ${o.OrExpression}    ::= ( ${o.Term} WS* OR_INFIX   WS* )+ ${o.Term}\n  ${o.ListExpression}  ::= ( ${o.Term} WS+                )+ ${o.Term}\n  ${o.NotExpression}   ::=               NOT_PREFIX WS*    ${o.Term}\n  ${o.Term}            ::= "(" ${o.Expression}  ")" | ${o.NotExpression} | ${o.ClassifierTerm}\n\n  ${o.ClassifierTerm}  ::=  ${o.Classifier} ":" ${o.MatcherExpression}\n  ${o.Classifier}      ::= "$" ${o.Scope} "." ${o.Attribute} | ${o.Attribute}\n  ${o.Scope}           ::= ${n(r.scopes,r.check.scopes)}\n  ${o.Attribute}       ::= ${n(r.classifiers,r.check.classifiers)}\n\n  ${o.MatcherExpression} ::= ${o.DefaultMatcherArgs} | ${o.MatcherTerm}\n  ${o.MatcherTerm}       ::= ${o.MatcherOpTerm} | ${o.Matcher} | ${o.MatcherArg}\n\n  ${o.DefaultMatcherArgs} ::= ( ${o.MatcherArg} "," )+ ${o.MatcherArg} /* default matcher term */\n  ${o.MatcherOpTerm}   ::= ${o.MatcherOperator} "(" ( ")" | ${o.MatcherTerm} ( "," ${o.MatcherTerm} )* ")" )\n  ${o.Matcher}         ::= ${o.MatcherName}     "(" ( ")" | ${o.MatcherArg}  ( "," ${o.MatcherArg}  )* ")" )\n  ${o.MatcherOperator} ::= ${n(r.matcherOps,r.check.matcherOps)}\n  ${o.MatcherName}     ::= ${n(r.matchers.map((e=>e.name)),r.check.matchers)}\n\n  ${o.MatcherArg}      ::= QUOTED_NAME | SAFENAME\n\n  AND_INFIX          ::= '&' |       ('AND' | 'and') !SAFENAME\n  OR_INFIX           ::= '|' |       ('OR'  | 'or' ) !SAFENAME\n  NOT_PREFIX         ::= '-' | '!' | ('NOT' | 'not') !SAFENAME\n\n  QUOTED_NAME        ::= '"' [#x20#x21#x23-#xFFFF]* '"' /* Not '"' */\n  SAFENAME           ::= [a-zA-Z0-9_]+\n  WS                 ::= [#x20#x09#x0A#x0D]   /* Space | Tab | \n | \r */\n`,r]}Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_GRAMMAR=e.DEFAULT_GRAMMAR_OPTIONS=e.MATCHERS=e.SCOPES=e.CLASSIFIERS=e.MATCHER_OPERATORS=e.RULE_KEYS=void 0,e.aliasMatcherFor=function(e,t){return{...t,name:e,functionName:t.functionName??t.name}},e.grammarFor=t,e.RULE_KEYS={Expression:"Expression",AndExpression:"AndExpression",OrExpression:"OrExpression",ListExpression:"ListExpression",NotExpression:"NotExpression",Term:"Term",ClassifierTerm:"ClassifierTerm",Classifier:"Classifier",Scope:"Scope",Attribute:"Attribute",MatcherName:"MatcherName",MatcherOperator:"MatcherOperator",MatcherTerm:"MatcherTerm",MatcherOpTerm:"MatcherOpTerm",DefaultMatcherArgs:"DefaultMatcherArgs",MatcherExpression:"MatcherExpression",Matcher:"Matcher",MatcherArg:"MatcherArg"},e.MATCHER_OPERATORS={not:"not",any:"any",all:"all"},e.CLASSIFIERS={tag:"tag"},e.SCOPES={waylay:"waylay",registry:"registry",runtime:"runtime",function:"function",plugin:"plugin",model:"model",webscript:"webscript"},e.MATCHERS={inIgnoreCase:{name:"inIgnoreCase",minArgs:0,maxArgs:void 0},in:{name:"in",minArgs:0,maxArgs:void 0},equalsIgnoreCase:{name:"equalsIgnoreCase",minArgs:1,maxArgs:1},equals:{name:"equals",minArgs:1,maxArgs:1},like:{name:"like",minArgs:1,maxArgs:1}},e.DEFAULT_GRAMMAR_OPTIONS={scopes:Object.values(e.SCOPES),classifiers:Object.values(e.CLASSIFIERS),matchers:Object.values(e.MATCHERS),matcherOps:Object.values(e.MATCHER_OPERATORS),check:{scopes:!0,classifiers:!1,matcherOps:!0,matchers:!1}},e.DEFAULT_GRAMMAR=t()[0]}(Rc)),Rc}var Tc,Cc={};function xc(){return Tc||(Tc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EXP_SYMBOL_OP=e.EXP_OP_SYMBOL=e.AND=e.OR=e.NOT=e.DEFAULT_OPERATOR=e.DEFAULT_MATCHER=void 0,e.DEFAULT_MATCHER="_default_",e.DEFAULT_OPERATOR="_default_",e.NOT="NOT",e.OR="OR",e.AND="AND",e.EXP_OP_SYMBOL={[e.NOT]:"!",[e.AND]:"&",[e.OR]:"|",[e.DEFAULT_OPERATOR]:" "},e.EXP_SYMBOL_OP={"!":e.NOT,"-":e.NOT,"|":e.OR,"&":e.AND," ":e.DEFAULT_OPERATOR}}(Cc)),Cc}var Uc,jc,qc={};function kc(){if(Uc)return qc;Uc=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.WqlCompilerError=qc.WqlInvalidTokenError=qc.WqlSyntaxError=qc.WqlError=void 0,qc.sanitizeError=r;const e=Sc();function t(e){return{...e,parent:void 0,children:e.children.map(t),errors:[]}}function r(r){return r instanceof e.TokenError&&(r.token=t(r.token)),r}class n extends Error{constructor(e,t){var n;super(t),Object.setPrototypeOf(this,new.target.prototype),this.expression=e.expression??"",this.columnNumber=e.columnNumber??0,e.cause&&(this.cause=null==(n=e.cause)?[]:Array.isArray(n)?n.map(r).filter((e=>e)).flat():[r(n)])}}qc.WqlError=n;qc.WqlSyntaxError=class extends n{constructor(){super(...arguments),this.code="ERR_WQL_INVALID_SYNTAX"}};class o extends n{constructor(e,t="Invalid wql expression."){super(function(e,t){if(null==t)return e;const r=e.expression??t.rest?t.rest:t.text,n=e.columnNumber??t.rest?t.end:t.start,o=e.cause??t.errors;return{...e,expression:r,columnNumber:n,cause:o}}(e,e.token),t),this.code="ERR_WQL_INVALID_TOKEN"}}qc.WqlInvalidTokenError=o;return qc.WqlCompilerError=class extends o{constructor(e,t="Unsupported wql expression."){super(e,t),this.code="ERR_WQL_COMPILER",this.compiler=e.compiler}},qc}function Lc(){if(jc)return oc;jc=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.WqlParser=void 0,oc.compile=a,oc.createGrammarParser=s;const e=Sc(),t=Pc(),r=xc(),n=kc();function o(e){const t=e.text;return t.endsWith('"')?JSON.parse(t):t}const i={NotExpression:r.NOT,AndExpression:r.AND,OrExpression:r.OR,ListExpression:r.DEFAULT_OPERATOR};function a(e,a,s){const u={token:e,classifier:{scope:"waylay",path:[]},defaultMatcher:r.DEFAULT_MATCHER,defaultOperator:r.DEFAULT_OPERATOR};let c;return c=null==e?a.expr({operator:"AND",args:[]},u):l(e,u),null!=a.final?a.final(c,u,s):c;function l(e,o){return function(e,o){switch(e.type){case t.RULE_KEYS.Expression:case t.RULE_KEYS.Term:return l(p(e),o);case t.RULE_KEYS.AndExpression:case t.RULE_KEYS.OrExpression:case t.RULE_KEYS.ListExpression:{if(1===e.children.length)return l(p(e),o);const t=i[e.type]??r.DEFAULT_OPERATOR,n=e.children.map((e=>l(e,o)));return a.expr({operator:t,args:n},o)}case t.RULE_KEYS.NotExpression:{const t=e.children.map((e=>l(e,o)));return a.expr({operator:r.NOT,args:t},o)}case t.RULE_KEYS.ClassifierTerm:{const[r,i]=e.children,s=function(e,r){if(e.type!==t.RULE_KEYS.Classifier)throw new n.WqlInvalidTokenError({token:e},`Expected classifier, got ${e.type}`);let o=r?.classifier.scope??"waylay";const i=e.children.map((e=>e.text));return i.length>0&&e.children[0].type===t.RULE_KEYS.Scope&&(o=i.shift()),{scope:o,path:i}}(r,o),u={...o,classifier:s},c=f(i,u);return a.term({classifier:s,matcher:c},u)}default:throw new n.WqlInvalidTokenError({token:e},`Invalid parser state: ${e.type}`)}}(e,{...o,token:e})}function p(e){if(1!==e.children.length)throw new n.WqlCompilerError({token:e},"Expected single child expression.");return e.children[0]}function f(e,i){return function(e,i){if(e.errors.length>0)throw new n.WqlCompilerError({token:e});switch(e.type){case t.RULE_KEYS.MatcherOpTerm:{const[t,...r]=e.children,n=t.text,o=r.map((e=>f(e,i)));return a.matchExp({operator:n,matchers:o},i)}case t.RULE_KEYS.Matcher:{const[t,...r]=e.children,n=r.map(o),s=t.text;return a.matcher({name:s,args:n},i)}case t.RULE_KEYS.DefaultMatcherArgs:{const t=e.children.map(o),n=r.DEFAULT_MATCHER;return a.matcher({name:n,args:t},i)}case t.RULE_KEYS.MatcherExpression:case t.RULE_KEYS.MatcherTerm:return f(p(e),i);case t.RULE_KEYS.MatcherArg:{const t=[o(e)],n=r.DEFAULT_MATCHER;return a.matcher({name:n,args:t},i)}default:throw new n.WqlInvalidTokenError({token:e},`Invalid parser state: ${e.type}`)}}(e,{...i,token:e})}}function s(t,r={debug:!1}){return new e.Grammars.Custom.Parser(t,r)}const u=s(t.DEFAULT_GRAMMAR);return oc.WqlParser=class{constructor(e,r,n){this.compiler=e,null==r?(this.grammar=t.DEFAULT_GRAMMAR,this.grammarOptions=t.DEFAULT_GRAMMAR_OPTIONS):[this.grammar,this.grammarOptions]=(0,t.grammarFor)(r),this.grammarParser=null==r&&null==n?u:s(this.grammar,n)}parse(e,t){const r=this.parseToken(e);return this.compileToken(r,t)}parseToken(r){try{const e=this.grammarParser.getAST(r,t.RULE_KEYS.Expression);if(e&&e.errors.length>0)throw new n.WqlInvalidTokenError({token:e});if(null!=e)return e;if(r.trim().length>0)throw new n.WqlSyntaxError({expression:r,columnNumber:0},"Invalid wql expression");return e}catch(t){if(t instanceof n.WqlError)throw t;if(t instanceof e.TokenError)throw new n.WqlInvalidTokenError({token:t.token,cause:t});throw new n.WqlSyntaxError({expression:r,columnNumber:0,cause:t},"Invalid wql expression")}}compileToken(e,t){try{return a(e,this.compiler,t)}catch(t){if(t instanceof n.WqlError)throw t;throw new n.WqlCompilerError({token:e,cause:t,compiler:this.compiler.name})}}},oc}var Ic,Fc={},Dc={};var Nc,Mc,$c={},Bc={};function Wc(){if(Nc)return Bc;Nc=1,Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.CompilerBase=void 0;const e=xc(),t=Pc(),r=kc();return Bc.CompilerBase=class{constructor(){this.matcherOptions={...t.MATCHERS,[e.DEFAULT_MATCHER]:(0,t.aliasMatcherFor)(e.DEFAULT_MATCHER,t.MATCHERS.inIgnoreCase)}}matcher(e,t){const n=this.matcherOptions[e.name];if(null==n)throw new r.WqlCompilerError(t,`Unsupported matcher '${e.name}'`);if(e.args.length<n.minArgs){const o=1===n.minArgs?"an argument":`at least ${n.minArgs} arguments`;throw new r.WqlCompilerError(t,`Matcher '${e.name}' requires ${o}.`)}if(n.maxArgs&&e.args.length>n.minArgs){const o=1===n.maxArgs?"an argument":`at most ${n.maxArgs} arguments`;throw new r.WqlCompilerError(t,`Matcher '${e.name}' requires ${o}.`)}return this.matcherFunction(n.functionName??n.name,e.args,t)}matchExp(e,n){switch(e.operator){case t.MATCHER_OPERATORS.any:return 0==e.matchers.length?this.boolPredicate(!1,n):1==e.matchers.length?e.matchers[0]:this.anyPredicate(e.matchers,n);case t.MATCHER_OPERATORS.all:return 0==e.matchers.length?this.boolPredicate(!0,n):1==e.matchers.length?e.matchers[0]:this.allPredicate(e.matchers,n);case t.MATCHER_OPERATORS.not:if(0==e.matchers.length)return this.boolPredicate(!1,n);if(1!=e.matchers.length)throw new r.WqlCompilerError(n,"Not operator requires a single argument");return this.notPredicate(e.matchers[0],n);default:throw new r.WqlCompilerError(n,`Unsupported matcher operator: '${e.operator}'`)}}expr(t,n){switch(t.operator){case e.OR:return 0==t.args.length?this.bool(!1,n):1==t.args.length?t.args[0]:this.or(t.args,n);case e.AND:case e.DEFAULT_OPERATOR:return 0==t.args.length?this.bool(!0,n):1==t.args.length?t.args[0]:this.and(t.args,n);case e.NOT:if(0==t.args.length)return this.bool(!1,n);if(1!=t.args.length)throw new r.WqlCompilerError(n,"Not operator requires a single argument");return this.not(t.args[0],n);default:throw new r.WqlCompilerError(n,`Unsupported operator: '${t.operator}'`)}}},Bc}function zc(){if(Mc)return $c;Mc=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.Normalizer=void 0;const e=kc(),t=Pc(),r=xc(),n=Wc();class o extends n.CompilerBase{constructor(e={}){super(),this.INFIX_SYMBOLS=r.EXP_OP_SYMBOL,this.QUERY_KEY="wql",this.name="wqlNormalizer",this.description="Compiles a wql expression into a normalized expression",this.matcherOptions={...t.MATCHERS,[r.DEFAULT_MATCHER]:{name:r.DEFAULT_MATCHER,minArgs:1}},e.matchers?.forEach((e=>{this.matcherOptions[e.name]=e}))}matcherFunction(e,t,n){const o=t.map((e=>`"${e}"`)).join(",");return e===r.DEFAULT_MATCHER?o:`${e}(${o})`}boolPredicate(e){return e?"":"any()"}anyPredicate(e,r){return this._op(t.MATCHER_OPERATORS.any,e,r)}allPredicate(e,r){return this._op(t.MATCHER_OPERATORS.all,e,r)}notPredicate(e,r){return this._op(t.MATCHER_OPERATORS.not,[e],r)}bool(t,r){if(t)return"";throw new e.WqlCompilerError(r,`cannot express ${t} expression`)}or(e){return i(this.INFIX_SYMBOLS.OR,...e)}and(e){return i(this.INFIX_SYMBOLS.AND,...e)}not(e){return this.INFIX_SYMBOLS.NOT+e}term(e,t){const{scope:r="waylay",path:n=[]}=e.classifier;return`${`${"waylay"===r?"":`$${r}.`}${n.join(".")}`}:${e.matcher}`}final(e,t,r){const n=new URLSearchParams(r?.from),o=n.get(this.QUERY_KEY);return o?n.set(this.QUERY_KEY,`( ${o} ) AND ( ${e} )`):n.append(this.QUERY_KEY,e),n}_op(e,t,r){return`${e}(${t.join(",")})`}}function i(e,...t){return`(${t.join(e)})`}return $c.Normalizer=o,$c.default=new o,$c}var Gc,Hc={};function Yc(){if(Gc)return Hc;Gc=1,Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.QueryRuleCompiler=void 0;const e=kc(),t=Wc(),r=Pc(),n="$and",o="$or",i="tags",a="name";class s extends t.CompilerBase{matcherFunction(t,n,o){switch(t){case r.MATCHERS.inIgnoreCase.name:return 1===n.length?m(h("^"+n[0]+"$","i")):f(n.map((e=>m(h("^"+e+"$","i")))));case r.MATCHERS.equalsIgnoreCase.name:return m(h("^"+n[0]+"$","i"));case r.MATCHERS.in.name:return 1===n.length?m(n[0]):f(n.map(m));case r.MATCHERS.equals.name:return m(n[0]);case r.MATCHERS.like.name:return m(function(e,t={caseInsensitive:!1}){const{caseInsensitive:r}=t,n=g.split("").reduce(((e,t)=>e.replaceAll(t,"\\"+t)),e),o=Object.entries(b).reduce(((e,[t,r])=>e.replaceAll(t,r)),n);return r||n!==o?{$regex:o,$options:r?"i":""}:e}(n[0],{caseInsensitive:!0}));default:throw new e.WqlCompilerError(o,`Unsupported matcher function : '${t}'`)}}boolPredicate(e){return e?c:u}anyPredicate(e){return{[o]:e}}allPredicate(e){return{[n]:e}}notPredicate(e,t){return y(e,t)}bool(e){return e?p:l}or(e){return{[o]:e}}and(e){return{[n]:e}}not(e,t){return d(e,t)}term(t,r){if("tag"!==t.classifier.path[0])throw new e.WqlCompilerError(r,`Unsupported classifier: '${t.classifier.path.join(".")}'`);return{[i]:{$elemMatch:t.matcher}}}final(e){return e}}Hc.QueryRuleCompiler=s,Hc.default=new s;const u={_id:{$exists:!1}},c={},l={_id:{$exists:!1}},p={};function f(e){return 0===e.length?u:{$or:e}}function h(e,t="i"){return{$regex:e,$options:t}}function d(t,r){const{[i]:n,$and:o,$or:a}=t;if(null!=n){const{$not:e}=n;return null!=e?{[i]:e}:{[i]:{$not:n}}}if(null!=o)return{$or:o.map((e=>d(e,r)))};if(null!=a)return{$and:a.map((e=>d(e,r)))};throw new e.WqlCompilerError(r,"Cannot negate")}function y(t,r){const{[a]:n,$and:o,$or:i}=t;if(null!=n)return m("object"==typeof n&&"$not"in n?n.$not:{$not:n});if(null!=o)return{$or:o.map((e=>y(e,r)))};if(null!=i)return{$and:i.map((e=>y(e,r)))};throw new e.WqlCompilerError(r,`Cannot negate: ${r.token.text}}`)}function m(e){return{[a]:e}}const g="\\-[]/{}()+.^$|",b={"*":".*","?":"."};return Hc}var Kc,Vc={};var Jc,Qc={};var Xc,Zc={};var el,tl,rl,nl={};function ol(){if(tl)return Fc;tl=1;var e=Fc&&Fc.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.TAGS_FILTER_MONGO=Fc.AST=Fc.NORMALIZE=Fc.QUERY_RESOURCES=Fc.QUERY_RULES=Fc.QUERY_REGISTRY=Fc.VALIDATE_TAGS_FILTER=void 0;const t=e((Ic||(Ic=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.default={name:"astCompiler",description:"Compiles a wql expression into an Abstract Syntax Tree.\n  The result is a (boolean composition of) matcher terms, each term\n  a (boolean composition of) matcher predicate(s).",matcher:(e,t)=>e,matchExp:(e,t)=>e,term:(e,t)=>e,expr:(e,t)=>e}),Dc));Fc.AST=t.default;const r=e(zc());Fc.NORMALIZE=r.default;const n=e(Yc());Fc.TAGS_FILTER_MONGO=n.default;const o=e(function(){if(Kc)return Vc;Kc=1,Object.defineProperty(Vc,"__esModule",{value:!0});const e=xc(),t=kc(),r=Wc(),n=Pc();function o(e){return"string"==typeof e?{or:[e]}:"or"in e?e:"and"in e&&1===e.and.length?{or:[e.and[0]]}:void 0}function i(e){return"string"==typeof e?{and:[e]}:"and"in e?e:"or"in e&&1===e.or.length?{and:[e.or[0]]}:void 0}class a extends r.CompilerBase{constructor(){super(...arguments),this.name="RulesQueryParams",this.description="Compiles a wql query in to tags query parameters for the Rules entities.",this.matcherOptions={in:n.MATCHERS.in,equals:{...n.MATCHERS.equals,functionName:"in",minArgs:1,maxArgs:1},[e.DEFAULT_MATCHER]:n.MATCHERS.in,inIgnoreCase:void 0,like:void 0,equalsIgnoreCase:void 0}}matcherFunction(e,r,o){switch(e){case n.MATCHERS.in.name:case n.MATCHERS.equals.name:return 1===r.length?r[0]:{or:r}}throw new t.WqlCompilerError(o,`Unsupported matcher '${e}'`)}boolPredicate(e,r){throw new t.WqlCompilerError(r,`Cannot produce a statement that is always ${e}`)}anyPredicate(e,r){return{or:e.map((e=>{const n=o(e);if(null==n)throw new t.WqlCompilerError(r,"Unsupported matcher operator: 'any'");return n.or})).flat()}}allPredicate(e,r){throw new t.WqlCompilerError(r,"Unsupported matcher operator: 'all'")}notPredicate(e,r){throw new t.WqlCompilerError(r,"Unsupported matcher operator: 'not'")}bool(e,r){if(e)return{and:[]};throw new t.WqlCompilerError(r,"Cannot produce a statement that is always false")}or(e,r){return{or:e.map((e=>{const n=o(e);if(null==n)throw new t.WqlCompilerError(r,"OR operator not supported on AND statements.");return n.or})).flat()}}and(e,r){return{and:e.map((e=>{const n=i(e);if(null==n)throw new t.WqlCompilerError(r,"AND operator not supported on OR/in statements.");return n.and})).flat()}}not(e,r){throw new t.WqlCompilerError(r,"Operator NOT unsupported")}term(e,r){const n=e.classifier.path[0];if("tag"!==n)throw new t.WqlCompilerError(r,`Classifier '${n}' not supported.`);return e.matcher}final(e,r,n){const a=new URLSearchParams(n?.from),s=o(e);if(null!=s){if(a.get("tags"))throw new t.WqlCompilerError(r,"Cannot combine existing 'tags' filter with the new OR filter.");return s.or.forEach((e=>a.append("tags",e))),a}const u=i(e);return null!=u&&u.and.forEach((e=>a.append(`tags.${e}`,""))),a}}return Vc.default=new a,Vc}());Fc.QUERY_RULES=o.default;const i=e(function(){if(Jc)return Qc;Jc=1,Object.defineProperty(Qc,"__esModule",{value:!0});const e=kc(),t=Pc(),r=xc(),n=zc(),o={...t.MATCHERS.equalsIgnoreCase,functionName:"eq"},i={...t.MATCHERS.inIgnoreCase,functionName:"in"};class a extends n.Normalizer{constructor(){super(...arguments),this.name="ResourcesQueryParams",this.description="Compiles query parameters for the entities of the 'resource' service.",this.INFIX_SYMBOLS={AND:" AND ",OR:" OR ",[r.DEFAULT_OPERATOR]:" ",NOT:"-"},this.QUERY_KEY="query",this.matcherOptions={equalsIgnoreCase:o,inIgnoreCase:i,like:t.MATCHERS.like,equals:void 0,in:void 0,[r.DEFAULT_MATCHER]:(0,t.aliasMatcherFor)(r.DEFAULT_MATCHER,i)}}_op(t,r,n){throw new e.WqlCompilerError(n,`Unsupported matcher operator: '${t}'`)}term(t,r){const n=t.classifier.path[0];if("tag"!==n)throw new e.WqlCompilerError(r,`Unsupported classifier '${n}'`);return`tags:${t.matcher}`}}return Qc.default=new a,Qc}());Fc.QUERY_RESOURCES=i.default;const a=e(function(){if(Xc)return Zc;Xc=1,Object.defineProperty(Zc,"__esModule",{value:!0});const e=kc(),t=xc(),r=zc();class n extends r.Normalizer{constructor(){super(...arguments),this.name="RegistryQueryParams",this.description="Compiles query parameters for the entities of the 'registry' service.",this.INFIX_SYMBOLS={AND:" AND ",OR:" OR ",[t.DEFAULT_OPERATOR]:" ",NOT:"NOT "}}term(t,r){const n=t.classifier.path[0];if("tag"!==n)throw new e.WqlCompilerError(r,`Unsupported classifier '${n}'`);return super.term(t,r)}}return Zc.default=new n,Zc}());Fc.QUERY_REGISTRY=a.default;const s=e(function(){if(el)return nl;el=1,Object.defineProperty(nl,"__esModule",{value:!0});const e=kc(),t=xc(),r=Wc();class n extends r.CompilerBase{constructor(){super(...arguments),this.name="validate Tags Filter Query",this.description="Recompiles a WQL query, validating it only uses supported `tag:` expressions",this.matcherOptions={[t.DEFAULT_MATCHER]:{name:t.DEFAULT_MATCHER,minArgs:1}}}matcherFunction(r,n,o){if(r===t.DEFAULT_MATCHER)return"ok";throw new e.WqlCompilerError(o,`Unsupported match operation '${r}'`)}boolPredicate(t,r){throw new e.WqlCompilerError(r,`Cannot produce a statement that is always ${t}`)}anyPredicate(t,r){throw new e.WqlCompilerError(r,"any operator not supported.")}allPredicate(t,r){throw new e.WqlCompilerError(r,"all operator not supported.")}notPredicate(t,r){throw new e.WqlCompilerError(r,"not operator not supported.")}bool(r,n){if(r)return{operator:t.AND,args:[]};throw new e.WqlCompilerError(n,"Cannot produce a statement that is always false")}or(r,n){if(0===r.length)throw new e.WqlCompilerError(n,"OR operator needs at least 1 argument.");if(1===r.length)return r[0];if(r.find((e=>"operator"in e&&e.operator===t.AND)))throw new e.WqlCompilerError(n,"OR operator not supported on case sensitive matches.");return{operator:t.OR,args:r}}and(r,n){if(1===r.length)return r[0];if(r.find((e=>"operator"in e&&e.operator===t.OR)))throw new e.WqlCompilerError(n,"AND operator not supported on case insensitive matches.");return{operator:t.AND,args:r}}not(t,r){throw new e.WqlCompilerError(r,"Operator NOT unsupported")}term(t,r){const n=t.classifier.path[0];if("tag"!==n)throw new e.WqlCompilerError(r,`Classifier '${n}' not supported.`);return t}final(e,t){let r="tag filter";const n="operator"in e&&e.operator;return n&&(r=`${n} combination of tag filters`),`'${t.token.text}' is a valid ${r}.`}}return nl.default=new n,nl}());return Fc.VALIDATE_TAGS_FILTER=s.default,Fc}var il=(rl||(rl=1,function(e){var t=nc&&nc.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=nc&&nc.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=nc&&nc.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&t(n,e,o);return r(n,e),n};Object.defineProperty(e,"__esModule",{value:!0}),e.compilers=e.WqlError=e.WqlParser=void 0;const o=Lc();Object.defineProperty(e,"WqlParser",{enumerable:!0,get:function(){return o.WqlParser}});const i=kc();Object.defineProperty(e,"WqlError",{enumerable:!0,get:function(){return i.WqlError}});const a=n(ol());e.compilers=a}(nc)),nc),al=e({__proto__:null,default:r(il)},[il]);return ec}));
//# sourceMappingURL=waylay.umd.js.map
